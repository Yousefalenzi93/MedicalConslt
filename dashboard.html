<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุญุฉ ุงูุชุญูู - ุทุฑููุชู ุงูุนูุงุฌู</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'arabic': ['Cairo', 'Tajawal', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8'
                        },
                        medical: {
                            50: '#f0f9ff',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1'
                        }
                    }
                }
            }
        }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; }
    </style>
</head>

<body class="bg-gray-50">
    <!-- Emergency Login Modal -->
    <div id="emergencyLoginModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-4">
                    <span class="text-white text-2xl">๐จโโ๏ธ</span>
                </div>
                <h2 class="text-2xl font-bold text-gray-900">ุชุณุฌูู ุฏุฎูู ุณุฑูุน</h2>
                <p class="text-gray-600 mt-2">ูุจุฏู ุฃูู ูู ุชุณุฌู ุงูุฏุฎูู ุจุนุฏ</p>
            </div>

            <div class="space-y-4">
                <button onclick="quickDoctorLogin()" class="w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors">
                    ๐จโโ๏ธ ุฏุฎูู ูุทุจูุจ ุชุฌุฑูุจู
                </button>
                <button onclick="goToMainPage()" class="w-full bg-gray-600 text-white py-3 px-4 rounded-lg hover:bg-gray-700 transition-colors">
                    ๐ ุงูุนูุฏุฉ ููุตูุญุฉ ุงูุฑุฆูุณูุฉ
                </button>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-6xl mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center">
                    <a href="index.html" class="flex items-center hover:opacity-80 transition-opacity">
                        <div class="w-10 h-10 bg-medical-600 rounded-lg flex items-center justify-center">
                            <span class="text-white font-bold text-xl">ุท</span>
                        </div>
                        <h1 class="mr-3 text-xl font-bold text-gray-800">ุทุฑููุชู ุงูุนูุงุฌู</h1>
                    </a>
                </div>

                <div class="flex items-center space-x-4 space-x-reverse">
                    <a href="dashboard.html" class="bg-blue-100 text-blue-700 px-3 py-2 rounded-lg transition-colors">
                        ๐ ููุญุฉ ุงูุชุญูู
                    </a>
                    <a href="profile.html" class="text-gray-600 hover:text-gray-800 hover:bg-gray-100 px-3 py-2 rounded-lg transition-colors">
                        ๐ค ุงูููู ุงูุดุฎุตู
                    </a>
                    <a href="test-auth.html" class="text-purple-600 hover:text-purple-800 hover:bg-purple-100 px-3 py-2 rounded-lg transition-colors">
                        ๐ ุงุฎุชุจุงุฑ ุงููุตุงุฏูุฉ
                    </a>
                    <a href="register.html" class="text-green-600 hover:text-green-800 hover:bg-green-100 px-3 py-2 rounded-lg transition-colors">
                        ๐ ุชุณุฌูู ุทุจูุจ ุฌุฏูุฏ
                    </a>
                    <div class="flex items-center space-x-2 space-x-reverse">
                        <span class="text-sm text-gray-600">ูุฑุญุจุงูุ <span data-user-name>ุฏ. ููุงุฒ</span></span>
                        <button onclick="logout()" class="text-red-600 hover:text-red-700 px-3 py-2 rounded-lg hover:bg-red-50 transition-colors text-sm">
                            ุฎุฑูุฌ
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="min-h-screen bg-gray-50 py-8">
        <div class="max-w-7xl mx-auto px-4">
            <!-- Welcome Section -->
            <div class="mb-8">
                <h1 class="text-3xl font-bold text-gray-900 mb-2">ูุฑุญุจุงูุ <span data-user-name>ุฏ. ููุงุฒ</span></h1>
                <p class="text-gray-600">ูุธุฑุฉ ุนุงูุฉ ุนูู ูุดุงุทู ูู ุงูููุตุฉ</p>
                <p class="text-sm text-gray-500 mt-1">ุงูุชุฎุตุต: <span data-user-specialty>ุทุจ ุงูููุจ</span></p>
            </div>

            <!-- Stats Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                            <span class="text-blue-600 text-xl">๐ฌ</span>
                        </div>
                        <div class="mr-4">
                            <p class="text-sm font-medium text-gray-600">ุงูุงุณุชุดุงุฑุงุช</p>
                            <p class="text-2xl font-bold text-gray-900">45</p>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                            <span class="text-green-600 text-xl">๐ง</span>
                        </div>
                        <div class="mr-4">
                            <p class="text-sm font-medium text-gray-600">ุงูุฑุณุงุฆู</p>
                            <p class="text-2xl font-bold text-gray-900">12</p>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                            <span class="text-purple-600 text-xl">๐</span>
                        </div>
                        <div class="mr-4">
                            <p class="text-sm font-medium text-gray-600">ุงูููุงุนูุฏ</p>
                            <p class="text-2xl font-bold text-gray-900">8</p>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center">
                            <span class="text-yellow-600 text-xl">โญ</span>
                        </div>
                        <div class="mr-4">
                            <p class="text-sm font-medium text-gray-600">ุงูุชูููู</p>
                            <p class="text-2xl font-bold text-gray-900">4.8</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Platform Growth Section -->
            <div class="bg-white rounded-lg shadow mb-8">
                <div class="px-6 py-4 border-b border-gray-200">
                    <h3 class="text-lg font-medium text-gray-900 flex items-center">
                        <span class="text-green-600 text-xl mr-2">๐</span>
                        ููู ุงูููุตุฉ
                    </h3>
                </div>
                <div class="p-6">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Monthly Growth Chart -->
                        <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4">
                            <h4 class="font-semibold text-blue-800 mb-4">๐ ููู ุงูุงุณุชุดุงุฑุงุช ุงูุดูุฑูุฉ</h4>
                            <div class="relative h-48">
                                <canvas id="monthlyGrowthChart" class="w-full h-full"></canvas>
                            </div>
                            <div class="mt-3 text-sm text-blue-700">
                                <p>๐ ุฒูุงุฏุฉ 25% ูุฐุง ุงูุดูุฑ</p>
                                <p>๐ฏ ุงููุฏู: 500 ุงุณุชุดุงุฑุฉ</p>
                            </div>
                        </div>

                        <!-- User Activity Chart -->
                        <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4">
                            <h4 class="font-semibold text-green-800 mb-4">๐ฅ ูุดุงุท ุงูุฃุทุจุงุก</h4>
                            <div class="relative h-48">
                                <canvas id="userActivityChart" class="w-full h-full"></canvas>
                            </div>
                            <div class="mt-3 text-sm text-green-700">
                                <p>๐ฅ 120 ุทุจูุจ ูุดุท</p>
                                <p>โญ ูุนุฏู ุงูุฑุถุง: 4.8/5</p>
                            </div>
                        </div>
                    </div>

                    <!-- Weekly Stats -->
                    <div class="mt-6 grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div class="bg-purple-50 rounded-lg p-4 text-center">
                            <div class="text-2xl font-bold text-purple-600">342</div>
                            <div class="text-sm text-purple-700">ุงุณุชุดุงุฑุงุช ูุฐุง ุงูุฃุณุจูุน</div>
                            <div class="text-xs text-purple-500 mt-1">+15% ูู ุงูุฃุณุจูุน ุงููุงุถู</div>
                        </div>
                        <div class="bg-orange-50 rounded-lg p-4 text-center">
                            <div class="text-2xl font-bold text-orange-600">89</div>
                            <div class="text-sm text-orange-700">ุฃุทุจุงุก ุฌุฏุฏ</div>
                            <div class="text-xs text-orange-500 mt-1">+8% ูู ุงูุฃุณุจูุน ุงููุงุถู</div>
                        </div>
                        <div class="bg-pink-50 rounded-lg p-4 text-center">
                            <div class="text-2xl font-bold text-pink-600">1,247</div>
                            <div class="text-sm text-pink-700">ุฑุณุงุฆู ูุชุจุงุฏูุฉ</div>
                            <div class="text-xs text-pink-500 mt-1">+22% ูู ุงูุฃุณุจูุน ุงููุงุถู</div>
                        </div>
                        <div class="bg-indigo-50 rounded-lg p-4 text-center">
                            <div class="text-2xl font-bold text-indigo-600">96%</div>
                            <div class="text-sm text-indigo-700">ูุนุฏู ุงูุงุณุชุฌุงุจุฉ</div>
                            <div class="text-xs text-indigo-500 mt-1">+3% ูู ุงูุฃุณุจูุน ุงููุงุถู</div>
                        </div>
                    </div>

                    <!-- Real-time Activity -->
                    <div class="mt-6 bg-gray-50 rounded-lg p-4">
                        <h4 class="font-semibold text-gray-800 mb-3 flex items-center">
                            <span class="w-3 h-3 bg-green-500 rounded-full mr-2 animate-pulse"></span>
                            ุงููุดุงุท ุงููุจุงุดุฑ
                        </h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                            <div class="flex items-center justify-between">
                                <span class="text-gray-600">ุงูุฃุทุจุงุก ุงููุชุตููู:</span>
                                <span class="font-semibold text-green-600">47</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-gray-600">ุงูุงุณุชุดุงุฑุงุช ุงููุดุทุฉ:</span>
                                <span class="font-semibold text-blue-600">12</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-gray-600">ูุชูุณุท ููุช ุงูุงุณุชุฌุงุจุฉ:</span>
                                <span class="font-semibold text-purple-600">3.2 ุฏูููุฉ</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Content Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Recent Consultations -->
                <div class="lg:col-span-2">
                    <div class="bg-white rounded-lg shadow">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-medium text-gray-900">ุงูุงุณุชุดุงุฑุงุช ุงูุญุฏูุซุฉ</h3>
                        </div>
                        <div class="p-6">
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                                    <div>
                                        <p class="font-medium text-gray-900">ูุฑูุถ #1234</p>
                                        <p class="text-sm text-gray-600">ุทุจ ุงูููุจ</p>
                                    </div>
                                    <div class="text-left">
                                        <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800">
                                            ุฌุฏูุฏุฉ
                                        </span>
                                        <p class="text-xs text-gray-500 mt-1">ููุฐ 5 ุฏูุงุฆู</p>
                                    </div>
                                </div>

                                <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                                    <div>
                                        <p class="font-medium text-gray-900">ูุฑูุถ #1235</p>
                                        <p class="text-sm text-gray-600">ุทุจ ุนุงู</p>
                                    </div>
                                    <div class="text-left">
                                        <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800">
                                            ููุฏ ุงููุฑุงุฌุนุฉ
                                        </span>
                                        <p class="text-xs text-gray-500 mt-1">ููุฐ 15 ุฏูููุฉ</p>
                                    </div>
                                </div>

                                <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                                    <div>
                                        <p class="font-medium text-gray-900">ูุฑูุถ #1236</p>
                                        <p class="text-sm text-gray-600">ุทุจ ุงูุฃุทูุงู</p>
                                    </div>
                                    <div class="text-left">
                                        <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">
                                            ููุชููุฉ
                                        </span>
                                        <p class="text-xs text-gray-500 mt-1">ููุฐ ุณุงุนุฉ</p>
                                    </div>
                                </div>
                            </div>
                            <button onclick="viewAllConsultations()" class="w-full mt-4 text-blue-600 hover:text-blue-700 font-medium">
                                ุนุฑุถ ุฌููุน ุงูุงุณุชุดุงุฑุงุช
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions & Notifications -->
                <div class="space-y-6">
                    <!-- Quick Actions -->
                    <div class="bg-white rounded-lg shadow">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-medium text-gray-900">ุฅุฌุฑุงุกุงุช ุณุฑูุนุฉ</h3>
                        </div>
                        <div class="p-6 space-y-3">
                            <button onclick="newConsultation()" class="w-full flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700">
                                ๐ฌ ุงุณุชุดุงุฑุฉ ุฌุฏูุฏุฉ
                            </button>
                            <button onclick="scheduleAppointment()" class="w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                                ๐ ุฌุฏููุฉ ููุนุฏ
                            </button>
                            <a href="profile.html" class="w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                                ๐ค ุชุญุฏูุซ ุงูููู ุงูุดุฎุตู
                            </a>
                        </div>
                    </div>

                    <!-- Recent Messages -->
                    <div class="bg-white rounded-lg shadow">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-medium text-gray-900">ุงูุฑุณุงุฆู ุงูุญุฏูุซุฉ</h3>
                        </div>
                        <div class="p-6">
                            <div class="space-y-3">
                                <div class="border-b border-gray-100 pb-3">
                                    <p class="font-medium text-sm text-gray-900">ุฏ. ุฑุงูุงู</p>
                                    <p class="text-sm text-gray-600 truncate">ุดูุฑุงู ูู ุนูู ุงูุงุณุชุดุงุฑุฉ...</p>
                                    <p class="text-xs text-gray-500">ููุฐ 10 ุฏูุงุฆู</p>
                                </div>
                                <div class="border-b border-gray-100 pb-3">
                                    <p class="font-medium text-sm text-gray-900">ุฅุฏุงุฑุฉ ุงูููุตุฉ</p>
                                    <p class="text-sm text-gray-600 truncate">ุชุญุฏูุซ ุฌุฏูุฏ ูุชุงุญ...</p>
                                    <p class="text-xs text-gray-500">ููุฐ ุณุงุนุฉ</p>
                                </div>
                                <div class="pb-3">
                                    <p class="font-medium text-sm text-gray-900">ุฏ. ูุฑูู</p>
                                    <p class="text-sm text-gray-600 truncate">ูู ููููู ูุฑุงุฌุนุฉ ูุฐู ุงูุญุงูุฉุ</p>
                                    <p class="text-xs text-gray-500">ููุฐ ุณุงุนุชูู</p>
                                </div>
                            </div>
                            <button onclick="viewAllMessages()" class="w-full mt-4 text-blue-600 hover:text-blue-700 font-medium text-sm">
                                ุนุฑุถ ุฌููุน ุงูุฑุณุงุฆู
                            </button>
                        </div>
                    </div>

                    <!-- Today's Schedule -->
                    <div class="bg-white rounded-lg shadow">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-medium text-gray-900">ุฌุฏูู ุงูููู</h3>
                        </div>
                        <div class="p-6">
                            <div class="space-y-3">
                                <div class="flex items-center">
                                    <div class="w-16 text-sm font-medium text-gray-900">09:00</div>
                                    <div class="flex-1 text-sm text-gray-600">ุงุณุชุดุงุฑุฉ - ุทุจ ุงูููุจ</div>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-16 text-sm font-medium text-gray-900">11:30</div>
                                    <div class="flex-1 text-sm text-gray-600">ุงุฌุชูุงุน ูุฑูู ุทุจู</div>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-16 text-sm font-medium text-gray-900">14:00</div>
                                    <div class="flex-1 text-sm text-gray-600">ูุฑุงุฌุนุฉ ุญุงูุงุช</div>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-16 text-sm font-medium text-gray-900">16:00</div>
                                    <div class="flex-1 text-sm text-gray-600">ุงุณุชุดุงุฑุฉ - ุทุจ ุนุงู</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-12">
        <div class="max-w-6xl mx-auto px-4">
            <div class="text-center">
                <!-- Founders Section -->
                <div class="bg-gradient-to-r from-blue-900/30 to-green-900/30 rounded-lg p-4 mb-4 border border-blue-500/20">
                    <h3 class="text-white font-bold mb-3 flex items-center justify-center text-sm">
                        <span class="text-yellow-400 mr-2">๐</span>
                        ุงููุคุณุณูู ูุงููุทูุฑูู
                        <span class="text-yellow-400 ml-2">๐</span>
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-3 text-xs">
                        <div class="bg-white/10 rounded-lg p-2 backdrop-blur-sm">
                            <div class="text-blue-300 font-semibold">ุฏ. ููุงุฒ ุฌูุงู ุงูุฏูุฏุจ</div>
                            <div class="text-blue-200 text-xs mt-1">๐ฉบ ุงุณุชุดุงุฑู ุจุงุทููุฉ</div>
                        </div>
                        <div class="bg-white/10 rounded-lg p-2 backdrop-blur-sm">
                            <div class="text-green-300 font-semibold">ูุญูุฏ ููุงุน ุงูุฑูููู</div>
                            <div class="text-green-200 text-xs mt-1">๐ ุตูุฏูู ุฃูู ุณููู</div>
                        </div>
                        <div class="bg-white/10 rounded-lg p-2 backdrop-blur-sm">
                            <div class="text-purple-300 font-semibold">ููุณู ูุณูุฑ ุงูุนูุฒู</div>
                            <div class="text-purple-200 text-xs mt-1">๐ป ุจุฑูุฌุฉ ูุชุทููุฑ</div>
                        </div>
                    </div>
                </div>

                <!-- Copyright -->
                <div class="text-gray-400 text-xs">
                    <p class="flex items-center justify-center mb-1">
                        <span class="text-blue-400 mr-1">ยฉ</span>
                        <span class="font-semibold">2024 ุทุฑููุชู ุงูุนูุงุฌู</span>
                        <span class="text-blue-400 ml-1">ยฉ</span>
                    </p>
                    <p>ุฌููุน ุงูุญููู ูุญููุธุฉ ูููุคุณุณูู ูุงููุทูุฑูู <span class="text-yellow-400">โจ</span></p>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Debug function to show storage contents
        function debugStorage() {
            console.log('๐ ูุญุชููุงุช ุงูุชุฎุฒูู:');
            console.log('localStorage:', {
                currentUser: localStorage.getItem('currentUser'),
                userType: localStorage.getItem('userType')
            });
            console.log('sessionStorage:', {
                currentUser: sessionStorage.getItem('currentUser'),
                userType: sessionStorage.getItem('userType')
            });
        }

        // Enhanced user authentication check with fallback
        function checkUserAuth() {
            // Debug storage contents first
            debugStorage();

            // Check both localStorage and sessionStorage for compatibility
            let currentUser = localStorage.getItem('currentUser') || sessionStorage.getItem('currentUser');
            let userType = localStorage.getItem('userType') || sessionStorage.getItem('userType');

            console.log('๐ ูุญุต ุญุงูุฉ ุงููุณุชุฎุฏู:', {
                currentUser: !!currentUser,
                userType,
                localStorage: !!localStorage.getItem('currentUser'),
                sessionStorage: !!sessionStorage.getItem('currentUser'),
                url: window.location.href
            });

            // Check URL parameters for direct access
            const urlParams = new URLSearchParams(window.location.search);
            const directAccess = urlParams.get('user');

            if (directAccess === 'doctor') {
                console.log('๐ ูุตูู ูุจุงุดุฑ ููุทุจูุจ ูู ุงูุฑุงุจุท');
                // Create a default doctor user for direct access
                const defaultDoctor = {
                    name: 'ุฏ. ูุณุชุฎุฏู ุชุฌุฑูุจู',
                    license: 'DOC999',
                    email: 'test@tariqi-alilaji.com',
                    phone: '+966 50 123 4567',
                    userType: 'doctor',
                    specialty: 'ุทุจ ุนุงู'
                };

                localStorage.setItem('currentUser', JSON.stringify(defaultDoctor));
                localStorage.setItem('userType', 'doctor');
                sessionStorage.setItem('currentUser', JSON.stringify(defaultDoctor));
                sessionStorage.setItem('userType', 'doctor');

                currentUser = JSON.stringify(defaultDoctor);
                userType = 'doctor';
            }

            if (!currentUser || userType !== 'doctor') {
                console.log('โ ุงููุณุชุฎุฏู ุบูุฑ ูุณุฌู ุฃู ููุณ ุทุจูุจ');

                // Show emergency login modal instead of alert
                showEmergencyLoginModal();
                return false;
            }

            try {
                const user = JSON.parse(currentUser);
                console.log('โ ูุณุชุฎุฏู ูุณุฌู:', user.name);

                // ุชุญุฏูุซ ุงุณู ุงููุณุชุฎุฏู ูู ุงูุตูุญุฉ
                const userNameElements = document.querySelectorAll('[data-user-name]');
                userNameElements.forEach(element => {
                    element.textContent = user.name || 'ุฏ. ูุณุชุฎุฏู';
                });

                // ุชุญุฏูุซ ุงูุชุฎุตุต
                const specialtyElements = document.querySelectorAll('[data-user-specialty]');
                specialtyElements.forEach(element => {
                    element.textContent = user.specialty || 'ุทุจ ุนุงู';
                });

                // Update page title
                document.title = `ููุญุฉ ุงูุชุญูู - ${user.name || 'ุทุจูุจ'}`;

                console.log('โ ุชู ุชุญุฏูุซ ุจูุงูุงุช ุงููุณุชุฎุฏู ูู ุงูุตูุญุฉ');

                // Sync data between localStorage and sessionStorage for compatibility
                if (!localStorage.getItem('currentUser')) {
                    localStorage.setItem('currentUser', currentUser);
                    localStorage.setItem('userType', userType);
                }
                if (!sessionStorage.getItem('currentUser')) {
                    sessionStorage.setItem('currentUser', currentUser);
                    sessionStorage.setItem('userType', userType);
                }

                return true;
            } catch (error) {
                console.error('โ ุฎุทุฃ ูู ูุฑุงุกุฉ ุจูุงูุงุช ุงููุณุชุฎุฏู:', error);
                // Clear both storages
                localStorage.removeItem('currentUser');
                localStorage.removeItem('userType');
                sessionStorage.removeItem('currentUser');
                sessionStorage.removeItem('userType');
                window.location.href = 'index.html';
                return false;
            }
        }

        // Emergency login functions
        function showEmergencyLoginModal() {
            console.log('๐จ ุนุฑุถ ูููุฐุฌ ุชุณุฌูู ุงูุฏุฎูู ุงูุทุงุฑุฆ');
            document.getElementById('emergencyLoginModal').classList.remove('hidden');
        }

        function hideEmergencyLoginModal() {
            document.getElementById('emergencyLoginModal').classList.add('hidden');
        }

        function quickDoctorLogin() {
            console.log('โก ุชุณุฌูู ุฏุฎูู ุณุฑูุน ูุทุจูุจ');

            const doctorUser = {
                name: 'ุฏ. ูุณุชุฎุฏู ุชุฌุฑูุจู',
                license: 'QUICK001',
                email: 'quick@tariqi-alilaji.com',
                phone: '+966 50 123 4567',
                userType: 'doctor',
                specialty: 'ุทุจ ุนุงู'
            };

            // Save to both storages
            localStorage.setItem('currentUser', JSON.stringify(doctorUser));
            localStorage.setItem('userType', 'doctor');
            sessionStorage.setItem('currentUser', JSON.stringify(doctorUser));
            sessionStorage.setItem('userType', 'doctor');

            console.log('โ ุชู ุญูุธ ุจูุงูุงุช ุงูุทุจูุจ ุงูุณุฑูุน');

            hideEmergencyLoginModal();

            // Reload page to apply changes
            window.location.reload();
        }

        function goToMainPage() {
            window.location.href = 'index.html';
        }

        // Enhanced logout function
        function logout() {
            console.log('๐ช ุชุณุฌูู ุงูุฎุฑูุฌ ูู ููุญุฉ ุงูุชุญูู...');

            // Clear both storages completely
            localStorage.removeItem('currentUser');
            localStorage.removeItem('userType');
            sessionStorage.removeItem('currentUser');
            sessionStorage.removeItem('userType');

            // Show logout message
            const messageEl = document.createElement('div');
            messageEl.className = 'fixed top-4 left-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50';
            messageEl.textContent = 'ุชู ุชุณุฌูู ุงูุฎุฑูุฌ ุจูุฌุงุญ';
            document.body.appendChild(messageEl);

            setTimeout(() => {
                window.location.href = 'index.html';
            }, 1000);
        }

        // Initialize page with delay to ensure data is saved
        document.addEventListener('DOMContentLoaded', function() {
            console.log('๐ ุชุญููู ุตูุญุฉ ููุญุฉ ุงูุชุญูู...');

            // Add a small delay to ensure localStorage/sessionStorage is ready
            setTimeout(() => {
                console.log('๐ ุจุฏุก ูุญุต ุงููุตุงุฏูุฉ...');

                if (checkUserAuth()) {
                    console.log('โ ุชู ุงูุชุญูู ูู ุงููุตุงุฏูุฉ ุจูุฌุงุญ');

                    // Show welcome message
                    setTimeout(() => {
                        const messageEl = document.createElement('div');
                        messageEl.className = 'fixed top-4 left-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50';
                        messageEl.textContent = 'ูุฑุญุจุงู ุจู ูู ููุญุฉ ุงูุชุญูู!';
                        document.body.appendChild(messageEl);

                        setTimeout(() => {
                            if (document.body.contains(messageEl)) {
                                document.body.removeChild(messageEl);
                            }
                        }, 3000);
                    }, 500);
                } else {
                    console.log('โ ูุดู ูู ุงูุชุญูู ูู ุงููุตุงุฏูุฉ');
                }
            }, 100); // Small delay to ensure storage is ready
        });

        // Quick Actions Functions
        function newConsultation() {
            console.log('๐ฌ ุจุฏุก ุงุณุชุดุงุฑุฉ ุฌุฏูุฏุฉ');

            // Create consultation modal
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
                    <div class="text-center mb-6">
                        <div class="w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-white text-2xl">๐ฌ</span>
                        </div>
                        <h2 class="text-2xl font-bold text-gray-900">ุงุณุชุดุงุฑุฉ ุฌุฏูุฏุฉ</h2>
                        <p class="text-gray-600 mt-2">ุงุจุฏุฃ ุงุณุชุดุงุฑุฉ ุทุจูุฉ ุฌุฏูุฏุฉ</p>
                    </div>

                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ุงุณู ุงููุฑูุถ</label>
                            <input type="text" id="patientName" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="ุฃุฏุฎู ุงุณู ุงููุฑูุถ">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ููุน ุงูุงุณุชุดุงุฑุฉ</label>
                            <select id="consultationType" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                <option value="">ุงุฎุชุฑ ููุน ุงูุงุณุชุดุงุฑุฉ</option>
                                <option value="ุนุงูุฉ">ุงุณุชุดุงุฑุฉ ุนุงูุฉ</option>
                                <option value="ุทุงุฑุฆุฉ">ุงุณุชุดุงุฑุฉ ุทุงุฑุฆุฉ</option>
                                <option value="ูุชุงุจุนุฉ">ูุชุงุจุนุฉ</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ูุตู ุงูุญุงูุฉ</label>
                            <textarea id="caseDescription" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="ุงูุชุจ ูุตู ูุฎุชุตุฑ ููุญุงูุฉ..."></textarea>
                        </div>
                    </div>

                    <div class="flex space-x-4 space-x-reverse mt-6">
                        <button onclick="startConsultation()" class="flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors">
                            ุจุฏุก ุงูุงุณุชุดุงุฑุฉ
                        </button>
                        <button onclick="closeModal()" class="flex-1 bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors">
                            ุฅูุบุงุก
                        </button>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
            window.currentModal = modal;
        }

        function scheduleAppointment() {
            console.log('๐ ุฌุฏููุฉ ููุนุฏ ุฌุฏูุฏ');

            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
                    <div class="text-center mb-6">
                        <div class="w-16 h-16 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-white text-2xl">๐</span>
                        </div>
                        <h2 class="text-2xl font-bold text-gray-900">ุฌุฏููุฉ ููุนุฏ</h2>
                        <p class="text-gray-600 mt-2">ุญุฏุฏ ููุนุฏ ูููุฑูุถ</p>
                    </div>

                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ุงุณู ุงููุฑูุถ</label>
                            <input type="text" id="appointmentPatient" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500" placeholder="ุฃุฏุฎู ุงุณู ุงููุฑูุถ">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ุงูุชุงุฑูุฎ</label>
                            <input type="date" id="appointmentDate" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ุงูููุช</label>
                            <input type="time" id="appointmentTime" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ููุน ุงูููุนุฏ</label>
                            <select id="appointmentType" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                                <option value="">ุงุฎุชุฑ ููุน ุงูููุนุฏ</option>
                                <option value="ูุดู">ูุดู ุนุงู</option>
                                <option value="ูุชุงุจุนุฉ">ูุชุงุจุนุฉ</option>
                                <option value="ุงุณุชุดุงุฑุฉ">ุงุณุชุดุงุฑุฉ</option>
                            </select>
                        </div>
                    </div>

                    <div class="flex space-x-4 space-x-reverse mt-6">
                        <button onclick="confirmAppointment()" class="flex-1 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors">
                            ุชุฃููุฏ ุงูููุนุฏ
                        </button>
                        <button onclick="closeModal()" class="flex-1 bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors">
                            ุฅูุบุงุก
                        </button>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
            window.currentModal = modal;
        }

        function viewAllConsultations() {
            console.log('๐๏ธ ุนุฑุถ ุฌููุน ุงูุงุณุชุดุงุฑุงุช');

            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-8 max-w-4xl w-full mx-4 max-h-[80vh] overflow-y-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-900">ุฌููุน ุงูุงุณุชุดุงุฑุงุช</h2>
                        <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700">
                            <span class="text-2xl">ร</span>
                        </button>
                    </div>

                    <div class="space-y-4">
                        <!-- Consultation 1 -->
                        <div class="bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors cursor-pointer" onclick="viewConsultationDetails('cons1')">
                            <div class="flex justify-between items-start mb-3">
                                <div class="flex-1">
                                    <h3 class="font-medium text-gray-900">ุฏ. ููุงุฒ</h3>
                                    <p class="text-sm text-gray-600">ุงุณุชุดุงุฑุฉ ุทุจูุฉ - ุญุงูุฉ ููุจูุฉ ูุนูุฏุฉ</p>
                                    <p class="text-xs text-gray-500">ุงููููุ 2:30 ู</p>
                                </div>
                                <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">ููุชููุฉ</span>
                            </div>
                            <div class="flex space-x-2 space-x-reverse">
                                <button onclick="event.stopPropagation(); viewConsultationDetails('cons1')" class="bg-blue-600 text-white px-3 py-1 rounded text-xs hover:bg-blue-700">
                                    ๐๏ธ ุนุฑุถ ุงูุชูุงุตูู
                                </button>
                                <button onclick="event.stopPropagation(); downloadConsultationReport('cons1')" class="bg-green-600 text-white px-3 py-1 rounded text-xs hover:bg-green-700">
                                    ๐ ุชูุฑูุฑ
                                </button>
                                <button onclick="event.stopPropagation(); followUpConsultation('cons1')" class="bg-purple-600 text-white px-3 py-1 rounded text-xs hover:bg-purple-700">
                                    ๐ ูุชุงุจุนุฉ
                                </button>
                            </div>
                        </div>

                        <!-- Consultation 2 -->
                        <div class="bg-blue-50 rounded-lg p-4 hover:bg-blue-100 transition-colors cursor-pointer border-l-4 border-blue-500" onclick="viewConsultationDetails('cons2')">
                            <div class="flex justify-between items-start mb-3">
                                <div class="flex-1">
                                    <h3 class="font-medium text-gray-900">ุฏ. ุฑุงูุงู</h3>
                                    <p class="text-sm text-gray-600">ุงุณุชุดุงุฑุฉ ุจุงุทูุฉ - ุฅุฏุงุฑุฉ ุถุบุท ุงูุฏู</p>
                                    <p class="text-xs text-gray-500">ุฃูุณุ 11:15 ุต</p>
                                </div>
                                <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">ุฌุงุฑูุฉ</span>
                            </div>
                            <div class="flex space-x-2 space-x-reverse">
                                <button onclick="event.stopPropagation(); continueConsultation('cons2')" class="bg-blue-600 text-white px-3 py-1 rounded text-xs hover:bg-blue-700">
                                    ๐ฌ ูุชุงุจุนุฉ ุงูุขู
                                </button>
                                <button onclick="event.stopPropagation(); viewConsultationDetails('cons2')" class="bg-gray-600 text-white px-3 py-1 rounded text-xs hover:bg-gray-700">
                                    ๐๏ธ ุงูุชูุงุตูู
                                </button>
                                <button onclick="event.stopPropagation(); completeConsultation('cons2')" class="bg-green-600 text-white px-3 py-1 rounded text-xs hover:bg-green-700">
                                    โ ุฅููุงุก
                                </button>
                            </div>
                        </div>

                        <!-- Consultation 3 -->
                        <div class="bg-red-50 rounded-lg p-4 hover:bg-red-100 transition-colors cursor-pointer border-l-4 border-red-500" onclick="viewConsultationDetails('cons3')">
                            <div class="flex justify-between items-start mb-3">
                                <div class="flex-1">
                                    <h3 class="font-medium text-gray-900">ุฏ. ุฎุงูุฏ</h3>
                                    <p class="text-sm text-gray-600">ุงุณุชุดุงุฑุฉ ุทูุงุฑุฆ - ุญุงูุฉ ุญูู ูุนูุฏุฉ</p>
                                    <p class="text-xs text-gray-500">ุฃูุณุ 8:45 ู</p>
                                </div>
                                <span class="px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full animate-pulse">ุนุงุฌูุฉ</span>
                            </div>
                            <div class="flex space-x-2 space-x-reverse">
                                <button onclick="event.stopPropagation(); urgentConsultation('cons3')" class="bg-red-600 text-white px-3 py-1 rounded text-xs hover:bg-red-700">
                                    ๐จ ุฑุฏ ุนุงุฌู
                                </button>
                                <button onclick="event.stopPropagation(); callPatient('cons3')" class="bg-orange-600 text-white px-3 py-1 rounded text-xs hover:bg-orange-700">
                                    ๐ ุงุชุตุงู
                                </button>
                                <button onclick="event.stopPropagation(); referToSpecialist('cons3')" class="bg-purple-600 text-white px-3 py-1 rounded text-xs hover:bg-purple-700">
                                    ๐จโโ๏ธ ุชุญููู
                                </button>
                            </div>
                        </div>

                        <!-- Consultation 4 -->
                        <div class="bg-yellow-50 rounded-lg p-4 hover:bg-yellow-100 transition-colors cursor-pointer border-l-4 border-yellow-500" onclick="viewConsultationDetails('cons4')">
                            <div class="flex justify-between items-start mb-3">
                                <div class="flex-1">
                                    <h3 class="font-medium text-gray-900">ุฏ. ูุฑูู</h3>
                                    <p class="text-sm text-gray-600">ุงุณุชุดุงุฑุฉ ููุณูุฉ - ุฅุฏุงุฑุฉ ุงูููู ูุงูุงูุชุฆุงุจ</p>
                                    <p class="text-xs text-gray-500">ููุฐ 3 ุณุงุนุงุช</p>
                                </div>
                                <span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full">ูู ุงูุงูุชุธุงุฑ</span>
                            </div>
                            <div class="flex space-x-2 space-x-reverse">
                                <button onclick="event.stopPropagation(); startConsultationAction('cons4')" class="bg-green-600 text-white px-3 py-1 rounded text-xs hover:bg-green-700">
                                    โถ๏ธ ุจุฏุก ุงูุงุณุชุดุงุฑุฉ
                                </button>
                                <button onclick="event.stopPropagation(); viewPatientHistory('cons4')" class="bg-blue-600 text-white px-3 py-1 rounded text-xs hover:bg-blue-700">
                                    ๐ ุงูุชุงุฑูุฎ ุงููุฑุถู
                                </button>
                                <button onclick="event.stopPropagation(); scheduleConsultation('cons4')" class="bg-purple-600 text-white px-3 py-1 rounded text-xs hover:bg-purple-700">
                                    ๐ ุฌุฏููุฉ
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="mt-6 text-center">
                        <button onclick="closeModal()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                            ุฅุบูุงู
                        </button>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
            window.currentModal = modal;
        }

        function viewAllMessages() {
            console.log('๐ฌ ุนุฑุถ ุฌููุน ุงูุฑุณุงุฆู');

            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-8 max-w-4xl w-full mx-4 max-h-[80vh] overflow-y-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-900">ุฌููุน ุงูุฑุณุงุฆู</h2>
                        <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700">
                            <span class="text-2xl">ร</span>
                        </button>
                    </div>

                    <div class="space-y-4">
                        <!-- Message 1 - Unread -->
                        <div class="bg-blue-50 rounded-lg p-4 hover:bg-blue-100 transition-colors cursor-pointer border-l-4 border-blue-500" onclick="openMessage('msg1')">
                            <div class="flex justify-between items-start mb-3">
                                <div class="flex-1">
                                    <div class="flex items-center">
                                        <h3 class="font-medium text-gray-900">ุฏ. ุณุงุฑุฉ ุฃุญูุฏ</h3>
                                        <span class="w-2 h-2 bg-blue-500 rounded-full ml-2 animate-pulse"></span>
                                    </div>
                                    <p class="text-sm text-gray-600">ูู ููููู ูุฑุงุฌุนุฉ ูุฐู ุงูุญุงูุฉุ ุงููุฑูุถ ูุนุงูู ูู ุฃุนุฑุงุถ ุบูุฑ ูุงุถุญุฉ...</p>
                                    <p class="text-xs text-gray-500">ููุฐ ุณุงุนุชูู</p>
                                </div>
                                <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">ุฌุฏูุฏุฉ</span>
                            </div>
                            <div class="flex space-x-2 space-x-reverse">
                                <button onclick="event.stopPropagation(); replyToMessage('msg1')" class="bg-blue-600 text-white px-3 py-1 rounded text-xs hover:bg-blue-700">
                                    ๐ฌ ุฑุฏ
                                </button>
                                <button onclick="event.stopPropagation(); forwardMessage('msg1')" class="bg-green-600 text-white px-3 py-1 rounded text-xs hover:bg-green-700">
                                    ๐ค ุฅุนุงุฏุฉ ุชูุฌูู
                                </button>
                                <button onclick="event.stopPropagation(); markAsRead('msg1')" class="bg-gray-600 text-white px-3 py-1 rounded text-xs hover:bg-gray-700">
                                    โ ุชู ุงููุฑุงุกุฉ
                                </button>
                            </div>
                        </div>

                        <!-- Message 2 - System -->
                        <div class="bg-green-50 rounded-lg p-4 hover:bg-green-100 transition-colors cursor-pointer border-l-4 border-green-500" onclick="openMessage('msg2')">
                            <div class="flex justify-between items-start mb-3">
                                <div class="flex-1">
                                    <div class="flex items-center">
                                        <h3 class="font-medium text-gray-900">ุฅุฏุงุฑุฉ ุงูููุตุฉ</h3>
                                        <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full ml-2">ูุธุงู</span>
                                    </div>
                                    <p class="text-sm text-gray-600">ุชุญุฏูุซ ุฌุฏูุฏ ุนูู ุงููุธุงู - ุชู ุฅุถุงูุฉ ููุฒุงุช ุฌุฏูุฏุฉ ููุงุณุชุดุงุฑุงุช</p>
                                    <p class="text-xs text-gray-500">ููุฐ 4 ุณุงุนุงุช</p>
                                </div>
                                <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">ุฅุนูุงู</span>
                            </div>
                            <div class="flex space-x-2 space-x-reverse">
                                <button onclick="event.stopPropagation(); viewSystemUpdate('msg2')" class="bg-green-600 text-white px-3 py-1 rounded text-xs hover:bg-green-700">
                                    ๐ ุนุฑุถ ุงูุชุญุฏูุซ
                                </button>
                                <button onclick="event.stopPropagation(); dismissNotification('msg2')" class="bg-gray-600 text-white px-3 py-1 rounded text-xs hover:bg-gray-700">
                                    โ ุฅุฎูุงุก
                                </button>
                            </div>
                        </div>

                        <!-- Message 3 - Thank you -->
                        <div class="bg-purple-50 rounded-lg p-4 hover:bg-purple-100 transition-colors cursor-pointer border-l-4 border-purple-500" onclick="openMessage('msg3')">
                            <div class="flex justify-between items-start mb-3">
                                <div class="flex-1">
                                    <h3 class="font-medium text-gray-900">ุฏ. ูุญูุฏ ุนูู</h3>
                                    <p class="text-sm text-gray-600">ุดูุฑุงู ูู ุนูู ุงููุณุงุนุฏุฉ ูู ุงูุญุงูุฉ ุงูุฃุฎูุฑุฉุ ูุงูุช ูุตุงุฆุญู ูููุฏุฉ ุฌุฏุงู</p>
                                    <p class="text-xs text-gray-500">ุฃูุณ</p>
                                </div>
                                <span class="px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full">ุดูุฑ</span>
                            </div>
                            <div class="flex space-x-2 space-x-reverse">
                                <button onclick="event.stopPropagation(); replyToMessage('msg3')" class="bg-purple-600 text-white px-3 py-1 rounded text-xs hover:bg-purple-700">
                                    ๐ฌ ุฑุฏ
                                </button>
                                <button onclick="event.stopPropagation(); likeMessage('msg3')" class="bg-pink-600 text-white px-3 py-1 rounded text-xs hover:bg-pink-700">
                                    โค๏ธ ุฅุนุฌุงุจ
                                </button>
                                <button onclick="event.stopPropagation(); archiveMessage('msg3')" class="bg-gray-600 text-white px-3 py-1 rounded text-xs hover:bg-gray-700">
                                    ๐ ุฃุฑุดูุฉ
                                </button>
                            </div>
                        </div>

                        <!-- Message 4 - Urgent -->
                        <div class="bg-red-50 rounded-lg p-4 hover:bg-red-100 transition-colors cursor-pointer border-l-4 border-red-500" onclick="openMessage('msg4')">
                            <div class="flex justify-between items-start mb-3">
                                <div class="flex-1">
                                    <div class="flex items-center">
                                        <h3 class="font-medium text-gray-900">ุฏ. ุฎุงูุฏ</h3>
                                        <span class="w-2 h-2 bg-red-500 rounded-full ml-2 animate-pulse"></span>
                                    </div>
                                    <p class="text-sm text-gray-600">ุญุงูุฉ ุทุงุฑุฆุฉ ุชุญุชุงุฌ ุงุณุชุดุงุฑุฉ ููุฑูุฉ - ูุฑูุถ ูู ุงูุนูุงูุฉ ุงููุฑูุฒุฉ</p>
                                    <p class="text-xs text-gray-500">ููุฐ 30 ุฏูููุฉ</p>
                                </div>
                                <span class="px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full animate-pulse">ุนุงุฌู</span>
                            </div>
                            <div class="flex space-x-2 space-x-reverse">
                                <button onclick="event.stopPropagation(); urgentReply('msg4')" class="bg-red-600 text-white px-3 py-1 rounded text-xs hover:bg-red-700">
                                    ๐จ ุฑุฏ ุนุงุฌู
                                </button>
                                <button onclick="event.stopPropagation(); callDoctor('msg4')" class="bg-orange-600 text-white px-3 py-1 rounded text-xs hover:bg-orange-700">
                                    ๐ ุงุชุตุงู
                                </button>
                                <button onclick="event.stopPropagation(); escalateMessage('msg4')" class="bg-purple-600 text-white px-3 py-1 rounded text-xs hover:bg-purple-700">
                                    โฌ๏ธ ุชุตุนูุฏ
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="mt-6 text-center">
                        <button onclick="closeModal()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                            ุฅุบูุงู
                        </button>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
            window.currentModal = modal;
        }

        function startConsultation() {
            const patientName = document.getElementById('patientName').value;
            const consultationType = document.getElementById('consultationType').value;
            const caseDescription = document.getElementById('caseDescription').value;

            if (!patientName || !consultationType) {
                alert('ูุฑุฌู ููุก ุฌููุน ุงูุญููู ุงููุทููุจุฉ');
                return;
            }

            console.log('ุจุฏุก ุงูุงุณุชุดุงุฑุฉ:', { patientName, consultationType, caseDescription });
            showSuccessMessage(`ุชู ุจุฏุก ุงุณุชุดุงุฑุฉ ุฌุฏูุฏุฉ ูููุฑูุถ: ${patientName}`);
            closeModal();
        }

        function confirmAppointment() {
            const patientName = document.getElementById('appointmentPatient').value;
            const date = document.getElementById('appointmentDate').value;
            const time = document.getElementById('appointmentTime').value;
            const type = document.getElementById('appointmentType').value;

            if (!patientName || !date || !time || !type) {
                alert('ูุฑุฌู ููุก ุฌููุน ุงูุญููู ุงููุทููุจุฉ');
                return;
            }

            console.log('ุชุฃููุฏ ุงูููุนุฏ:', { patientName, date, time, type });
            showSuccessMessage(`ุชู ุชุฃููุฏ ููุนุฏ ${patientName} ูู ${date} ุงูุณุงุนุฉ ${time}`);
            closeModal();
        }

        function closeModal() {
            if (window.currentModal) {
                document.body.removeChild(window.currentModal);
                window.currentModal = null;
            }
        }

        // Consultation Functions
        function viewConsultationDetails(consultationId) {
            console.log('๐๏ธ ุนุฑุถ ุชูุงุตูู ุงูุงุณุชุดุงุฑุฉ:', consultationId);

            const consultations = {
                'cons1': {
                    doctor: 'ุฏ. ููุงุฒ',
                    specialty: 'ุทุจ ุงูููุจ',
                    hospital: 'ูุณุชุดูู ุงูููู ููุฏ',
                    case: 'ุญุงูุฉ ููุจูุฉ ูุนูุฏุฉ',
                    symptoms: 'ูุฑูุถ 45 ุณูุฉ ูุนุงูู ูู ุฃูู ุญุงุฏ ูู ุงูุตุฏุฑ ุงูุฃูุณุฑุ ุถูู ูู ุงูุชููุณุ ุชุนุฑู',
                    diagnosis: 'ุงูุชูุงุจ ูู ุนุถูุฉ ุงูููุจ - ุชู ุงุณุชุจุนุงุฏ ุงูุฌูุทุฉ ุงูููุจูุฉ',
                    treatment: 'ุฑุงุญุฉ ุชุงูุฉุ ูุถุงุฏุงุช ุงูุงูุชูุงุจุ ูุชุงุจุนุฉ ุฏูุฑูุฉ ูุน ุชุฎุทูุท ุงูููุจ',
                    medications: 'ุฅูุจูุจุฑูููู 400mgุ ุฃุณุจุฑูู 75mgุ ููุชูุจุฑูููู 50mg',
                    status: 'ููุชููุฉ',
                    date: 'ุงููููุ 2:30 ู',
                    duration: '45 ุฏูููุฉ',
                    priority: 'ูุชูุณุทุฉ'
                },
                'cons2': {
                    doctor: 'ุฏ. ุฑุงูุงู',
                    specialty: 'ุทุจ ุงูุจุงุทูุฉ',
                    hospital: 'ูุณุชุดูู ุงูููู ููุตู',
                    case: 'ุฅุฏุงุฑุฉ ุถุบุท ุงูุฏู ุงูููุงูู',
                    symptoms: 'ูุฑูุถ 38 ุณูุฉ ูุนุงูู ูู ุตุฏุงุน ูุณุชูุฑุ ุฏูุฎุฉุ ุฎููุงู ูู ุงูููุจ',
                    diagnosis: 'ุงุฑุชูุงุน ุถุบุท ุงูุฏู ุงูุฃุณุงุณู ููุงูู ููุนูุงุฌ ุงูุชูููุฏู',
                    treatment: 'ุชุนุฏูู ุงูุจุฑูุชูููู ุงูุนูุงุฌูุ ูุธุงู ุบุฐุงุฆู ููุฎูุถ ุงูุตูุฏูููุ ุฑูุงุถุฉ ููุชุธูุฉ',
                    medications: 'ุฃูููุฏูุจูู 10mgุ ููุณูููุจุฑูู 20mgุ ููุฏุฑููููุฑูุซูุงุฒูุฏ 25mg',
                    status: 'ุฌุงุฑูุฉ',
                    date: 'ุฃูุณุ 11:15 ุต',
                    duration: '30 ุฏูููุฉ',
                    priority: 'ุนุงููุฉ'
                },
                'cons3': {
                    doctor: 'ุฏ. ุฎุงูุฏ',
                    specialty: 'ุทุจ ุงูุทูุงุฑุฆ',
                    hospital: 'ูุณุชุดูู ุงูููู ุฎุงูุฏ',
                    case: 'ุญุงูุฉ ุญูู ูุนูุฏุฉ',
                    symptoms: 'ูุฑูุถ 32 ุณูุฉ ูุนุงูู ูู ุญูู ุดุฏูุฏุฉ 39.5ยฐุ ูุดุนุฑูุฑุฉุ ุตุฏุงุน ุญุงุฏ',
                    diagnosis: 'ุนุฏูู ุจูุชูุฑูุฉ ูุญุชููุฉ - ูุญุชุงุฌ ูุญูุตุงุช ุฅุถุงููุฉ',
                    treatment: 'ูุถุงุฏุงุช ุญูููุฉ ูุงุณุนุฉ ุงููุฌุงูุ ุฎุงูุถุงุช ุญุฑุงุฑุฉุ ุณูุงุฆู ูุฑูุฏูุฉ',
                    medications: 'ุณููุชุฑูุงูุณูู 1gุ ุจุงุฑุงุณูุชุงููู 1gุ ูุญููู ููุญู',
                    status: 'ุนุงุฌูุฉ',
                    date: 'ุฃูุณุ 8:45 ู',
                    duration: '60 ุฏูููุฉ',
                    priority: 'ุนุงุฌูุฉ'
                },
                'cons4': {
                    doctor: 'ุฏ. ูุฑูู',
                    specialty: 'ุงูุทุจ ุงูููุณู',
                    hospital: 'ูุณุชุดูู ุงูููู ุณููุงู',
                    case: 'ุฅุฏุงุฑุฉ ุงูููู ูุงูุงูุชุฆุงุจ',
                    symptoms: 'ูุฑูุถุฉ 29 ุณูุฉ ุชุนุงูู ูู ููู ุดุฏูุฏุ ุงูุชุฆุงุจุ ุถูู ุชููุณุ ุตุนูุจุฉ ููู',
                    diagnosis: 'ุงุถุทุฑุงุจ ุงูููู ุงููุนูู ูุน ููุจุงุช ุงูุชุฆุงุจ ูุชูุณุทุฉ',
                    treatment: 'ุนูุงุฌ ููุณู ูุนุฑูู ุณููููุ ุชูููุงุช ุงูุงุณุชุฑุฎุงุกุ ุฏุนู ุงุฌุชูุงุนู',
                    medications: 'ุณูุฑุชุฑุงููู 50mgุ ููุฑุงุฒูุจุงู 0.5mg ุนูุฏ ุงูุญุงุฌุฉ',
                    status: 'ูู ุงูุงูุชุธุงุฑ',
                    date: 'ููุฐ 3 ุณุงุนุงุช',
                    duration: 'ุบูุฑ ูุญุฏุฏ',
                    priority: 'ูุชูุณุทุฉ'
                }
            };

            const consultation = consultations[consultationId] || consultations['cons1'];

            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-8 max-w-5xl w-full mx-4 max-h-[80vh] overflow-y-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-blue-600">๐๏ธ ุชูุงุตูู ุงูุงุณุชุดุงุฑุฉ ุงูุทุจูุฉ</h2>
                        <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700">
                            <span class="text-2xl">ร</span>
                        </button>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Doctor Info -->
                        <div class="bg-blue-50 rounded-lg p-4">
                            <h3 class="font-bold text-blue-800 mb-3">ูุนูููุงุช ุงูุทุจูุจ ุงููุณุชุดุงุฑ</h3>
                            <div class="space-y-2 text-sm">
                                <div class="flex items-center">
                                    <span class="text-2xl ml-2">๐จโโ๏ธ</span>
                                    <div>
                                        <p class="font-semibold">${consultation.doctor}</p>
                                        <p class="text-gray-600">${consultation.specialty}</p>
                                    </div>
                                </div>
                                <p><strong>ุงููุณุชุดูู:</strong> ${consultation.hospital}</p>
                                <p><strong>ุชุงุฑูุฎ ุงูุงุณุชุดุงุฑุฉ:</strong> ${consultation.date}</p>
                                <p><strong>ูุฏุฉ ุงูุงุณุชุดุงุฑุฉ:</strong> ${consultation.duration}</p>
                                <p><strong>ุงูุฃููููุฉ:</strong>
                                    <span class="px-2 py-1 rounded-full text-xs ${
                                        consultation.priority === 'ุนุงุฌูุฉ' ? 'bg-red-100 text-red-800' :
                                        consultation.priority === 'ุนุงููุฉ' ? 'bg-orange-100 text-orange-800' :
                                        'bg-green-100 text-green-800'
                                    }">${consultation.priority}</span>
                                </p>
                            </div>
                        </div>

                        <!-- Case Details -->
                        <div class="lg:col-span-2 space-y-4">
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h4 class="font-semibold text-gray-800 mb-2">๐ ุชูุงุตูู ุงูุญุงูุฉ:</h4>
                                <p class="text-sm text-gray-700">${consultation.case}</p>
                            </div>

                            <div class="bg-yellow-50 rounded-lg p-4">
                                <h4 class="font-semibold text-yellow-800 mb-2">๐ ุงูุฃุนุฑุงุถ ูุงูุชุงุฑูุฎ ุงููุฑุถู:</h4>
                                <p class="text-sm text-yellow-700">${consultation.symptoms}</p>
                            </div>

                            <div class="bg-green-50 rounded-lg p-4">
                                <h4 class="font-semibold text-green-800 mb-2">๐ฉบ ุงูุชุดุฎูุต:</h4>
                                <p class="text-sm text-green-700">${consultation.diagnosis}</p>
                            </div>

                            <div class="bg-purple-50 rounded-lg p-4">
                                <h4 class="font-semibold text-purple-800 mb-2">๐ ุงูุนูุงุฌ ุงูููุชุฑุญ:</h4>
                                <p class="text-sm text-purple-700">${consultation.treatment}</p>
                            </div>

                            <div class="bg-orange-50 rounded-lg p-4">
                                <h4 class="font-semibold text-orange-800 mb-2">๐ ุงูุฃุฏููุฉ ุงูููุตููุฉ:</h4>
                                <p class="text-sm text-orange-700">${consultation.medications}</p>
                            </div>
                        </div>
                    </div>

                    <!-- Status and Actions -->
                    <div class="mt-6 bg-gray-50 rounded-lg p-4">
                        <div class="flex justify-between items-center mb-4">
                            <h4 class="font-semibold text-gray-800">ุญุงูุฉ ุงูุงุณุชุดุงุฑุฉ:</h4>
                            <span class="px-3 py-1 rounded-full text-sm ${
                                consultation.status === 'ููุชููุฉ' ? 'bg-green-100 text-green-800' :
                                consultation.status === 'ุฌุงุฑูุฉ' ? 'bg-blue-100 text-blue-800' :
                                consultation.status === 'ุนุงุฌูุฉ' ? 'bg-red-100 text-red-800' :
                                'bg-yellow-100 text-yellow-800'
                            }">${consultation.status}</span>
                        </div>

                        <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                            <button onclick="downloadDetailedReport('${consultationId}')" class="bg-blue-600 text-white px-3 py-2 rounded text-sm hover:bg-blue-700">
                                ๐ ุชูุฑูุฑ ููุตู
                            </button>
                            <button onclick="shareConsultation('${consultationId}')" class="bg-green-600 text-white px-3 py-2 rounded text-sm hover:bg-green-700">
                                ๐ค ูุดุงุฑูุฉ
                            </button>
                            <button onclick="addToFavorites('${consultationId}')" class="bg-purple-600 text-white px-3 py-2 rounded text-sm hover:bg-purple-700">
                                โญ ุฅุถุงูุฉ ููููุถูุฉ
                            </button>
                            <button onclick="printConsultation('${consultationId}')" class="bg-gray-600 text-white px-3 py-2 rounded text-sm hover:bg-gray-700">
                                ๐จ๏ธ ุทุจุงุนุฉ
                            </button>
                        </div>
                    </div>

                    <div class="flex space-x-4 space-x-reverse mt-6">
                        <button onclick="continueConsultation('${consultationId}')" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700">
                            ๐ฌ ูุชุงุจุนุฉ ุงูุงุณุชุดุงุฑุฉ
                        </button>
                        <button onclick="scheduleFollowUp()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700">
                            ๐ ุฌุฏููุฉ ูุชุงุจุนุฉ
                        </button>
                        <button onclick="prescribeMedication()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">
                            ๐ ูุตู ุฏูุงุก
                        </button>
                        <button onclick="closeModal()" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700">
                            ุฅุบูุงู
                        </button>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
            window.currentModal = modal;
        }

        function downloadConsultationReport(consultationId) {
            console.log('๐ ุชุญููู ุชูุฑูุฑ ุงูุงุณุชุดุงุฑุฉ:', consultationId);
            showSuccessMessage('ุฌุงุฑู ุชุญุถูุฑ ุงูุชูุฑูุฑ...');

            setTimeout(() => {
                showSuccessMessage('ุชู ุชุญููู ุงูุชูุฑูุฑ ุจูุฌุงุญ');
            }, 2000);
        }

        function followUpConsultation(consultationId) {
            console.log('๐ ูุชุงุจุนุฉ ุงูุงุณุชุดุงุฑุฉ:', consultationId);
            showInfoMessage('ุชู ุฌุฏููุฉ ูุชุงุจุนุฉ ูููุฑูุถ ุฎูุงู ุฃุณุจูุน');
        }

        function continueConsultation(consultationId) {
            console.log('๐ฌ ูุชุงุจุนุฉ ุงูุงุณุชุดุงุฑุฉ ุงูุฌุงุฑูุฉ:', consultationId);

            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-8 max-w-4xl w-full mx-4 max-h-[80vh] overflow-y-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-900">๐ฌ ูุชุงุจุนุฉ ุงูุงุณุชุดุงุฑุฉ - ุฏ. ุฑุงูุงู</h2>
                        <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700">
                            <span class="text-2xl">ร</span>
                        </button>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Doctor Info -->
                        <div class="bg-blue-50 rounded-lg p-4">
                            <h3 class="font-bold text-blue-800 mb-3">ูุนูููุงุช ุงูุทุจูุจ</h3>
                            <div class="space-y-2 text-sm">
                                <p><strong>ุงูุทุจูุจ:</strong> ุฏ. ุฑุงูุงู</p>
                                <p><strong>ุงูุชุฎุตุต:</strong> ุทุจ ุงูุจุงุทูุฉ</p>
                                <p><strong>ุงููุณุชุดูู:</strong> ูุณุชุดูู ุงูููู ููุตู</p>
                                <p><strong>ุขุฎุฑ ุชูุงุตู:</strong> ุฃูุณุ 11:15 ุต</p>
                            </div>
                        </div>

                        <!-- Chat Area -->
                        <div class="lg:col-span-2">
                            <div class="bg-gray-50 rounded-lg p-4 h-64 overflow-y-auto mb-4">
                                <div class="space-y-3">
                                    <div class="bg-blue-100 rounded-lg p-3 max-w-xs">
                                        <p class="text-sm">ูุฑุญุจุงู ุฒููููุ ุฃุญุชุงุฌ ุงุณุชุดุงุฑุชู ูู ุญุงูุฉ ุถุบุท ุฏู ูุนูุฏุฉ</p>
                                        <span class="text-xs text-gray-500">ุฏ. ุฑุงูุงู - ููุฐ ุณุงุนุฉ</span>
                                    </div>
                                    <div class="bg-green-100 rounded-lg p-3 max-w-xs ml-auto">
                                        <p class="text-sm">ุฃููุงู ุฏ. ุฑุงูุงูุ ุจุงูุทุจุน. ูุง ูู ุชูุงุตูู ุงูุญุงูุฉุ</p>
                                        <span class="text-xs text-gray-500">ุฃูุช - ููุฐ 45 ุฏูููุฉ</span>
                                    </div>
                                    <div class="bg-blue-100 rounded-lg p-3 max-w-xs">
                                        <p class="text-sm">ูุฑูุถ 45 ุณูุฉุ ุถุบุท ููุงูู ููุนูุงุฌุ ูู ุชูุตุญ ุจุชุบููุฑ ุงูุจุฑูุชููููุ</p>
                                        <span class="text-xs text-gray-500">ุฏ. ุฑุงูุงู - ููุฐ 30 ุฏูููุฉ</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Message Input -->
                            <div class="flex space-x-2 space-x-reverse">
                                <input type="text" id="messageInput" placeholder="ุงูุชุจ ุฑุณุงูุชู ููุง..."
                                       class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                <button onclick="sendMessage()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                                    ุฅุฑุณุงู
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="flex space-x-4 space-x-reverse mt-6">
                        <button onclick="prescribeMedication()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">
                            ๐ ูุตู ุฏูุงุก
                        </button>
                        <button onclick="scheduleFollowUp()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700">
                            ๐ ุฌุฏููุฉ ูุชุงุจุนุฉ
                        </button>
                        <button onclick="completeConsultation('${consultationId}')" class="bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700">
                            โ ุฅููุงุก ุงูุงุณุชุดุงุฑุฉ
                        </button>
                        <button onclick="closeModal()" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700">
                            ุฅุบูุงู
                        </button>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
            window.currentModal = modal;
        }

        function completeConsultation(consultationId) {
            console.log('โ ุฅููุงุก ุงูุงุณุชุดุงุฑุฉ:', consultationId);
            if (confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุฅููุงุก ูุฐู ุงูุงุณุชุดุงุฑุฉุ')) {
                showSuccessMessage('ุชู ุฅููุงุก ุงูุงุณุชุดุงุฑุฉ ูุฅุฑุณุงู ุงูุชูุฑูุฑ ูููุฑูุถ');
            }
        }

        function urgentConsultation(consultationId) {
            console.log('๐จ ุงุณุชุดุงุฑุฉ ุนุงุฌูุฉ:', consultationId);

            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-8 max-w-4xl w-full mx-4 max-h-[80vh] overflow-y-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-red-600">๐จ ุฑุฏ ุนุงุฌู - ุฏ. ุฎุงูุฏ</h2>
                        <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700">
                            <span class="text-2xl">ร</span>
                        </button>
                    </div>

                    <div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-6">
                        <div class="flex items-center mb-2">
                            <span class="text-red-600 text-xl mr-2">โ๏ธ</span>
                            <h3 class="font-bold text-red-800">ุญุงูุฉ ุทุงุฑุฆุฉ</h3>
                        </div>
                        <p class="text-red-700 text-sm">ุงููุฑูุถ ูุนุงูู ูู ุญูู ุดุฏูุฏุฉ - ูุญุชุงุฌ ุฑุฏ ููุฑู</p>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Patient Emergency Info -->
                        <div class="bg-red-50 rounded-lg p-4">
                            <h3 class="font-bold text-red-800 mb-3">ูุนูููุงุช ุงูุญุงูุฉ ุงูุทุงุฑุฆุฉ</h3>
                            <div class="space-y-2 text-sm">
                                <p><strong>ุงูุทุจูุจ:</strong> ุฏ. ุฎุงูุฏ</p>
                                <p><strong>ุงูุชุฎุตุต:</strong> ุทุจ ุงูุทูุงุฑุฆ</p>
                                <p><strong>ุงูุฃุนุฑุงุถ:</strong> ุญูู ุดุฏูุฏุฉ (39.5ยฐ)</p>
                                <p><strong>ุงูููุช:</strong> ุฃูุณุ 8:45 ู</p>
                                <p><strong>ุงูุญุงูุฉ:</strong> <span class="text-red-600 font-bold">ุนุงุฌูุฉ</span></p>
                            </div>
                        </div>

                        <!-- Quick Response -->
                        <div class="space-y-4">
                            <h3 class="font-bold text-gray-800">ุงูุฑุฏ ุงูุณุฑูุน</h3>

                            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3">
                                <h4 class="font-semibold text-yellow-800 mb-2">ุฑุณุงูุฉ ุงููุฑูุถ:</h4>
                                <p class="text-sm text-yellow-700">"ุฏูุชูุฑุ ุญุฑุงุฑุชู 39.5 ุฏุฑุฌุฉ ููุฐ 3 ุณุงุนุงุชุ ุฃุดุนุฑ ุจูุดุนุฑูุฑุฉ ุดุฏูุฏุฉ ูุตุฏุงุน. ูุงุฐุง ุฃูุนูุ"</p>
                            </div>

                            <textarea id="urgentResponse" rows="4" placeholder="ุงูุชุจ ุฑุฏู ุงูุนุงุฌู ููุง..."
                                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500"></textarea>
                        </div>
                    </div>

                    <!-- Quick Action Buttons -->
                    <div class="mt-6">
                        <h4 class="font-bold text-gray-800 mb-3">ุฅุฌุฑุงุกุงุช ุณุฑูุนุฉ:</h4>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                            <button onclick="quickAdvice('fever')" class="bg-blue-600 text-white px-3 py-2 rounded text-sm hover:bg-blue-700">
                                ๐ก๏ธ ูุตุงุฆุญ ุงูุญูู
                            </button>
                            <button onclick="prescribeUrgent()" class="bg-green-600 text-white px-3 py-2 rounded text-sm hover:bg-green-700">
                                ๐ ูุตู ุนุงุฌู
                            </button>
                            <button onclick="recommendER()" class="bg-red-600 text-white px-3 py-2 rounded text-sm hover:bg-red-700">
                                ๐ฅ ุชูุฌู ููุทูุงุฑุฆ
                            </button>
                            <button onclick="callPatient('${consultationId}')" class="bg-orange-600 text-white px-3 py-2 rounded text-sm hover:bg-orange-700">
                                ๐ ุงุชุตุงู ููุฑู
                            </button>
                        </div>
                    </div>

                    <div class="flex space-x-4 space-x-reverse mt-6">
                        <button onclick="sendUrgentResponse()" class="bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700">
                            ๐จ ุฅุฑุณุงู ุฑุฏ ุนุงุฌู
                        </button>
                        <button onclick="escalateToER()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700">
                            โฌ๏ธ ุชุตุนูุฏ ููุทูุงุฑุฆ
                        </button>
                        <button onclick="closeModal()" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700">
                            ุฅุบูุงู
                        </button>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
            window.currentModal = modal;
        }

        function callPatient(consultationId) {
            console.log('๐ ุงุชุตุงู ุจุงููุฑูุถ:', consultationId);
            showInfoMessage('ุฌุงุฑู ุงูุงุชุตุงู ุจุงููุฑูุถ...');
        }

        function referToSpecialist(consultationId) {
            console.log('๐จโโ๏ธ ุชุญููู ููุฎุชุต:', consultationId);
            showSuccessMessage('ุชู ุชุญููู ุงูุญุงูุฉ ูุทุจูุจ ูุฎุชุต');
        }

        function startConsultationAction(consultationId) {
            console.log('โถ๏ธ ุจุฏุก ุงูุงุณุชุดุงุฑุฉ:', consultationId);

            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-8 max-w-5xl w-full mx-4 max-h-[80vh] overflow-y-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-green-600">โถ๏ธ ุจุฏุก ุงุณุชุดุงุฑุฉ ุฌุฏูุฏุฉ - ุฏ. ูุฑูู</h2>
                        <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700">
                            <span class="text-2xl">ร</span>
                        </button>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Patient Profile -->
                        <div class="bg-purple-50 rounded-lg p-4">
                            <h3 class="font-bold text-purple-800 mb-3">ููู ุงููุฑูุถ</h3>
                            <div class="space-y-3 text-sm">
                                <div class="flex items-center">
                                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Ccircle cx='20' cy='20' r='20' fill='%23e5e7eb'/%3E%3Ctext x='20' y='25' text-anchor='middle' fill='%23374151' font-size='16'%3E๐ฉ%3C/text%3E%3C/svg%3E"
                                         alt="ูุฑูู" class="w-10 h-10 rounded-full ml-3">
                                    <div>
                                        <p class="font-semibold">ุฏ. ูุฑูู</p>
                                        <p class="text-gray-600">ุงูุทุจ ุงูููุณู</p>
                                    </div>
                                </div>
                                <div class="border-t pt-3">
                                    <p><strong>ุงูุญุงูุฉ:</strong> ููู ูุงูุชุฆุงุจ</p>
                                    <p><strong>ุงูููุน:</strong> ุงุณุชุดุงุฑุฉ ููุณูุฉ</p>
                                    <p><strong>ุงูููุช:</strong> ููุฐ 3 ุณุงุนุงุช</p>
                                    <p><strong>ุงูุฃููููุฉ:</strong> <span class="text-yellow-600">ูุชูุณุทุฉ</span></p>
                                </div>
                            </div>
                        </div>

                        <!-- Consultation Setup -->
                        <div class="lg:col-span-2 space-y-4">
                            <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                                <h4 class="font-semibold text-green-800 mb-2">ุฑุณุงูุฉ ุงููุฑูุถ ุงูุฃููู:</h4>
                                <p class="text-sm text-green-700">"ูุฑุญุจุงู ุฏูุชูุฑุ ุฃุนุงูู ูู ููู ุดุฏูุฏ ูุญุงูุฉ ุงูุชุฆุงุจ ููุฐ ุฃุณุงุจูุน. ุฃุดุนุฑ ุจุถูู ูู ุงูุชููุณ ูุตุนูุจุฉ ูู ุงูููู. ุฃุญุชุงุฌ ูุณุงุนุฏุชูู."</p>
                            </div>

                            <!-- Quick Assessment -->
                            <div class="bg-blue-50 rounded-lg p-4">
                                <h4 class="font-semibold text-blue-800 mb-3">ุชูููู ุณุฑูุน</h4>
                                <div class="grid grid-cols-2 gap-4 text-sm">
                                    <div>
                                        <label class="block font-medium mb-1">ูุณุชูู ุงูููู (1-10):</label>
                                        <input type="range" min="1" max="10" value="7" class="w-full">
                                        <span class="text-blue-600">7 - ูุฑุชูุน</span>
                                    </div>
                                    <div>
                                        <label class="block font-medium mb-1">ูุณุชูู ุงูุงูุชุฆุงุจ (1-10):</label>
                                        <input type="range" min="1" max="10" value="6" class="w-full">
                                        <span class="text-blue-600">6 - ูุชูุณุท ุฅูู ูุฑุชูุน</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Initial Response -->
                            <div>
                                <label class="block font-semibold text-gray-800 mb-2">ุฑุฏู ุงูุฃููู:</label>
                                <textarea id="initialResponse" rows="4" placeholder="ุงูุชุจ ุฑุฏู ุงูุฃููู ูุงูุชุฑุญูุจ ุจุงููุฑูุถ..."
                                          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">ูุฑุญุจุงู ูุฑููุ ุฃุดูุฑู ุนูู ุซูุชู ุจู. ุฃููู ูุง ุชูุฑูู ุจู ูู ููู ูุงูุชุฆุงุจุ ููุฐุง ุฃูุฑ ูููู ุงูุชุนุงูู ูุนู ุจูุนุงููุฉ. ุฏุนููุง ูุจุฏุฃ ุจููู ุญุงูุชู ุฃูุซุฑ...</textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Consultation Tools -->
                    <div class="mt-6">
                        <h4 class="font-bold text-gray-800 mb-3">ุฃุฏูุงุช ุงูุงุณุชุดุงุฑุฉ:</h4>
                        <div class="grid grid-cols-2 md:grid-cols-5 gap-3">
                            <button onclick="openVideoCall()" class="bg-blue-600 text-white px-3 py-2 rounded text-sm hover:bg-blue-700">
                                ๐น ููุงููุฉ ููุฏูู
                            </button>
                            <button onclick="openVoiceCall()" class="bg-green-600 text-white px-3 py-2 rounded text-sm hover:bg-green-700">
                                ๐ ููุงููุฉ ุตูุชูุฉ
                            </button>
                            <button onclick="shareScreen()" class="bg-purple-600 text-white px-3 py-2 rounded text-sm hover:bg-purple-700">
                                ๐ฅ๏ธ ูุดุงุฑูุฉ ุงูุดุงุดุฉ
                            </button>
                            <button onclick="sendFile()" class="bg-orange-600 text-white px-3 py-2 rounded text-sm hover:bg-orange-700">
                                ๐ ุฅุฑุณุงู ููู
                            </button>
                            <button onclick="useTemplate()" class="bg-gray-600 text-white px-3 py-2 rounded text-sm hover:bg-gray-700">
                                ๐ ููุงูุจ ุฌุงูุฒุฉ
                            </button>
                        </div>
                    </div>

                    <div class="flex space-x-4 space-x-reverse mt-6">
                        <button onclick="startConsultationNow()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700">
                            โถ๏ธ ุจุฏุก ุงูุงุณุชุดุงุฑุฉ ุงูุขู
                        </button>
                        <button onclick="scheduleForLater()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                            ๐ ุฌุฏููุฉ ูุงุญูุงู
                        </button>
                        <button onclick="requestMoreInfo()" class="bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700">
                            โ ุทูุจ ูุนูููุงุช ุฅุถุงููุฉ
                        </button>
                        <button onclick="closeModal()" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700">
                            ุฅุบูุงู
                        </button>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
            window.currentModal = modal;
        }

        function viewPatientHistory(consultationId) {
            console.log('๐ ุนุฑุถ ุงูุชุงุฑูุฎ ุงููุฑุถู:', consultationId);
            showInfoMessage('ุชู ูุชุญ ููู ุงูุชุงุฑูุฎ ุงููุฑุถู ูููุฑูุถ');
        }

        function scheduleConsultation(consultationId) {
            console.log('๐ ุฌุฏููุฉ ุงูุงุณุชุดุงุฑุฉ:', consultationId);
            showSuccessMessage('ุชู ุฌุฏููุฉ ุงูุงุณุชุดุงุฑุฉ ูููุนุฏ ูุงุญู');
        }

        // Message Functions
        function openMessage(messageId) {
            console.log('๐ง ูุชุญ ุงูุฑุณุงูุฉ:', messageId);

            const messages = {
                'msg1': {
                    from: 'ุฏ. ุณุงุฑุฉ ุฃุญูุฏ',
                    subject: 'ูุฑุงุฌุนุฉ ุญุงูุฉ ูุฑูุถ',
                    content: 'ูู ููููู ูุฑุงุฌุนุฉ ูุฐู ุงูุญุงูุฉุ ุงููุฑูุถ ูุนุงูู ูู ุฃุนุฑุงุถ ุบูุฑ ูุงุถุญุฉ ูุฃุญุชุงุฌ ุฑุฃูู ุงูุทุจู.',
                    time: 'ููุฐ ุณุงุนุชูู'
                },
                'msg2': {
                    from: 'ุฅุฏุงุฑุฉ ุงูููุตุฉ',
                    subject: 'ุชุญุฏูุซ ุงููุธุงู',
                    content: 'ุชู ุฅุถุงูุฉ ููุฒุงุช ุฌุฏูุฏุฉ ููุงุณุชุดุงุฑุงุช ุชุดูู ุงูููุฏูู ูุงููููุงุช ุงููุฑููุฉ.',
                    time: 'ููุฐ 4 ุณุงุนุงุช'
                }
            };

            const message = messages[messageId] || messages['msg1'];
            showInfoMessage(`ุฑุณุงูุฉ ูู: ${message.from} - ${message.subject}`);
        }

        function replyToMessage(messageId) {
            console.log('๐ฌ ุงูุฑุฏ ุนูู ุงูุฑุณุงูุฉ:', messageId);
            showSuccessMessage('ุชู ูุชุญ ูุงูุฐุฉ ุงูุฑุฏ');
        }

        function forwardMessage(messageId) {
            console.log('๐ค ุฅุนุงุฏุฉ ุชูุฌูู ุงูุฑุณุงูุฉ:', messageId);
            showInfoMessage('ุชู ูุชุญ ูุงูุฐุฉ ุฅุนุงุฏุฉ ุงูุชูุฌูู');
        }

        function markAsRead(messageId) {
            console.log('โ ุชู ุชุญุฏูุฏ ูููุฑูุกุฉ:', messageId);
            showSuccessMessage('ุชู ุชุญุฏูุฏ ุงูุฑุณุงูุฉ ูููุฑูุกุฉ');
        }

        function viewSystemUpdate(messageId) {
            console.log('๐ ุนุฑุถ ุชุญุฏูุซ ุงููุธุงู:', messageId);
            showInfoMessage('ุชู ูุชุญ ุตูุญุฉ ุชูุงุตูู ุงูุชุญุฏูุซ');
        }

        function dismissNotification(messageId) {
            console.log('โ ุฅุฎูุงุก ุงูุฅุดุนุงุฑ:', messageId);
            showSuccessMessage('ุชู ุฅุฎูุงุก ุงูุฅุดุนุงุฑ');
        }

        function likeMessage(messageId) {
            console.log('โค๏ธ ุฅุนุฌุงุจ ุจุงูุฑุณุงูุฉ:', messageId);
            showSuccessMessage('ุชู ุฅุถุงูุฉ ุฅุนุฌุงุจ ููุฑุณุงูุฉ');
        }

        function archiveMessage(messageId) {
            console.log('๐ ุฃุฑุดูุฉ ุงูุฑุณุงูุฉ:', messageId);
            showSuccessMessage('ุชู ููู ุงูุฑุณุงูุฉ ููุฃุฑุดูู');
        }

        function urgentReply(messageId) {
            console.log('๐จ ุฑุฏ ุนุงุฌู:', messageId);
            showWarningMessage('ุชู ูุชุญ ูุงูุฐุฉ ุงูุฑุฏ ุงูุนุงุฌู');
        }

        function callDoctor(messageId) {
            console.log('๐ ุงุชุตุงู ุจุงูุทุจูุจ:', messageId);
            showInfoMessage('ุฌุงุฑู ุงูุงุชุตุงู ุจุงูุทุจูุจ...');
        }

        function escalateMessage(messageId) {
            console.log('โฌ๏ธ ุชุตุนูุฏ ุงูุฑุณุงูุฉ:', messageId);
            showWarningMessage('ุชู ุชุตุนูุฏ ุงูุฑุณุงูุฉ ููุฅุฏุงุฑุฉ');
        }

        // Utility Functions
        function showSuccessMessage(message) {
            const messageEl = document.createElement('div');
            messageEl.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50';
            messageEl.textContent = message;
            document.body.appendChild(messageEl);

            setTimeout(() => {
                if (document.body.contains(messageEl)) {
                    document.body.removeChild(messageEl);
                }
            }, 3000);
        }

        function showInfoMessage(message) {
            const messageEl = document.createElement('div');
            messageEl.className = 'fixed top-4 right-4 bg-blue-500 text-white px-6 py-3 rounded-lg shadow-lg z-50';
            messageEl.textContent = message;
            document.body.appendChild(messageEl);

            setTimeout(() => {
                if (document.body.contains(messageEl)) {
                    document.body.removeChild(messageEl);
                }
            }, 3000);
        }

        function showWarningMessage(message) {
            const messageEl = document.createElement('div');
            messageEl.className = 'fixed top-4 right-4 bg-orange-500 text-white px-6 py-3 rounded-lg shadow-lg z-50';
            messageEl.textContent = message;
            document.body.appendChild(messageEl);

            setTimeout(() => {
                if (document.body.contains(messageEl)) {
                    document.body.removeChild(messageEl);
                }
            }, 3000);
        }

        // Additional Functions for Consultation Modals

        // Chat Functions
        function sendMessage() {
            const input = document.getElementById('messageInput');
            if (input && input.value.trim()) {
                showSuccessMessage('ุชู ุฅุฑุณุงู ุงูุฑุณุงูุฉ: ' + input.value);
                input.value = '';
            }
        }

        function prescribeMedication() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-8 max-w-4xl w-full mx-4 max-h-[80vh] overflow-y-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-green-600">๐ ูุตู ุฏูุงุก ููุทุจูุจ</h2>
                        <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700">
                            <span class="text-2xl">ร</span>
                        </button>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Doctor Info -->
                        <div class="bg-green-50 rounded-lg p-4">
                            <h3 class="font-bold text-green-800 mb-3">ูุนูููุงุช ุงูุทุจูุจ</h3>
                            <div class="space-y-2 text-sm">
                                <p><strong>ุงูุทุจูุจ:</strong> ุฏ. ุฑุงูุงู</p>
                                <p><strong>ุงูุชุฎุตุต:</strong> ุทุจ ุงูุจุงุทูุฉ</p>
                                <p><strong>ุงููุณุชุดูู:</strong> ูุณุชุดูู ุงูููู ููุตู</p>
                                <p><strong>ุงูุญุงูุฉ:</strong> ุงุฑุชูุงุน ุถุบุท ุงูุฏู</p>
                            </div>
                        </div>

                        <!-- Prescription Form -->
                        <div class="space-y-4">
                            <div>
                                <label class="block font-semibold text-gray-700 mb-2">ุงุณู ุงูุฏูุงุก:</label>
                                <select id="medicationName" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                    <option value="">ุงุฎุชุฑ ุงูุฏูุงุก</option>
                                    <option value="amlodipine">ุฃูููุฏูุจูู 5mg</option>
                                    <option value="lisinopril">ููุณูููุจุฑูู 10mg</option>
                                    <option value="metformin">ููุชููุฑููู 500mg</option>
                                    <option value="atorvastatin">ุฃุชูุฑูุงุณุชุงุชูู 20mg</option>
                                </select>
                            </div>

                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block font-semibold text-gray-700 mb-2">ุงูุฌุฑุนุฉ:</label>
                                    <select id="dosage" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                        <option value="once">ูุฑุฉ ูุงุญุฏุฉ ููููุงู</option>
                                        <option value="twice">ูุฑุชูู ููููุงู</option>
                                        <option value="three">ุซูุงุซ ูุฑุงุช ููููุงู</option>
                                        <option value="four">ุฃุฑุจุน ูุฑุงุช ููููุงู</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block font-semibold text-gray-700 mb-2">ุงููุฏุฉ:</label>
                                    <select id="duration" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                        <option value="7">ุฃุณุจูุน ูุงุญุฏ</option>
                                        <option value="14">ุฃุณุจูุนูู</option>
                                        <option value="30">ุดูุฑ ูุงุญุฏ</option>
                                        <option value="90">ุซูุงุซุฉ ุฃุดูุฑ</option>
                                    </select>
                                </div>
                            </div>

                            <div>
                                <label class="block font-semibold text-gray-700 mb-2">ุชุนูููุงุช ุฎุงุตุฉ:</label>
                                <textarea id="instructions" rows="3" placeholder="ุชุนูููุงุช ุฅุถุงููุฉ ููุทุจูุจ..."
                                          class="w-full px-3 py-2 border border-gray-300 rounded-lg">ุชูุงูู ุงูุฏูุงุก ูุน ุงูุทุนุงูุ ูุฑุงูุจุฉ ุถุบุท ุงูุฏู ููููุงู</textarea>
                            </div>
                        </div>
                    </div>

                    <div class="mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <h4 class="font-semibold text-blue-800 mb-2">ูุนุงููุฉ ุงููุตูุฉ:</h4>
                        <div id="prescriptionPreview" class="text-sm text-blue-700">
                            ุณูุชู ุนุฑุถ ุงููุตูุฉ ููุง ุจุนุฏ ุงุฎุชูุงุฑ ุงูุฏูุงุก...
                        </div>
                    </div>

                    <div class="flex space-x-4 space-x-reverse mt-6">
                        <button onclick="savePrescription()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700">
                            ๐พ ุญูุธ ุงููุตูุฉ
                        </button>
                        <button onclick="sendPrescription()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                            ๐ค ุฅุฑุณุงู ููุทุจูุจ
                        </button>
                        <button onclick="printPrescription()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700">
                            ๐จ๏ธ ุทุจุงุนุฉ
                        </button>
                        <button onclick="closeModal()" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700">
                            ุฅุบูุงู
                        </button>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
            window.currentModal = modal;

            // Add event listeners for real-time preview
            const medicationSelect = document.getElementById('medicationName');
            const dosageSelect = document.getElementById('dosage');
            const durationSelect = document.getElementById('duration');

            [medicationSelect, dosageSelect, durationSelect].forEach(element => {
                element.addEventListener('change', updatePrescriptionPreview);
            });
        }

        function scheduleFollowUp() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-8 max-w-4xl w-full mx-4 max-h-[80vh] overflow-y-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-purple-600">๐ ุฌุฏููุฉ ูุชุงุจุนุฉ ูุน ุทุจูุจ</h2>
                        <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700">
                            <span class="text-2xl">ร</span>
                        </button>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Doctor Info -->
                        <div class="bg-purple-50 rounded-lg p-4">
                            <h3 class="font-bold text-purple-800 mb-3">ูุนูููุงุช ุงูุทุจูุจ</h3>
                            <div class="space-y-2 text-sm">
                                <p><strong>ุงูุทุจูุจ:</strong> ุฏ. ุฑุงูุงู</p>
                                <p><strong>ุงูุชุฎุตุต:</strong> ุทุจ ุงูุจุงุทูุฉ</p>
                                <p><strong>ุงููุณุชุดูู:</strong> ูุณุชุดูู ุงูููู ููุตู</p>
                                <p><strong>ุขุฎุฑ ุงุณุชุดุงุฑุฉ:</strong> ุฃูุณุ 11:15 ุต</p>
                            </div>
                        </div>

                        <!-- Schedule Form -->
                        <div class="space-y-4">
                            <div>
                                <label class="block font-semibold text-gray-700 mb-2">ููุน ุงููุชุงุจุนุฉ:</label>
                                <select id="followUpType" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                    <option value="consultation">ุงุณุชุดุงุฑุฉ ุทุจูุฉ</option>
                                    <option value="checkup">ูุญุต ุฏูุฑู</option>
                                    <option value="results">ูุฑุงุฌุนุฉ ูุชุงุฆุฌ</option>
                                    <option value="medication">ูุชุงุจุนุฉ ุฏูุงุก</option>
                                </select>
                            </div>

                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block font-semibold text-gray-700 mb-2">ุงูุชุงุฑูุฎ:</label>
                                    <input type="date" id="followUpDate"
                                           class="w-full px-3 py-2 border border-gray-300 rounded-lg"
                                           min="${new Date().toISOString().split('T')[0]}">
                                </div>
                                <div>
                                    <label class="block font-semibold text-gray-700 mb-2">ุงูููุช:</label>
                                    <select id="followUpTime" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                        <option value="09:00">9:00 ุตุจุงุญุงู</option>
                                        <option value="10:00">10:00 ุตุจุงุญุงู</option>
                                        <option value="11:00">11:00 ุตุจุงุญุงู</option>
                                        <option value="14:00">2:00 ูุณุงุกู</option>
                                        <option value="15:00">3:00 ูุณุงุกู</option>
                                        <option value="16:00">4:00 ูุณุงุกู</option>
                                    </select>
                                </div>
                            </div>

                            <div>
                                <label class="block font-semibold text-gray-700 mb-2">ุทุฑููุฉ ุงููุชุงุจุนุฉ:</label>
                                <div class="space-y-2">
                                    <label class="flex items-center">
                                        <input type="radio" name="method" value="video" class="mr-2">
                                        <span>๐น ููุงููุฉ ููุฏูู</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="radio" name="method" value="voice" class="mr-2">
                                        <span>๐ ููุงููุฉ ุตูุชูุฉ</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="radio" name="method" value="chat" class="mr-2" checked>
                                        <span>๐ฌ ูุญุงุฏุซุฉ ูุตูุฉ</span>
                                    </label>
                                </div>
                            </div>

                            <div>
                                <label class="block font-semibold text-gray-700 mb-2">ููุงุญุธุงุช:</label>
                                <textarea id="followUpNotes" rows="3" placeholder="ููุงุญุธุงุช ุฅุถุงููุฉ ูููุชุงุจุนุฉ..."
                                          class="w-full px-3 py-2 border border-gray-300 rounded-lg">ูุชุงุจุนุฉ ุญุงูุฉ ุถุบุท ุงูุฏู ููุนุงููุฉ ุงูุนูุงุฌ ุงูุญุงูู</textarea>
                            </div>
                        </div>
                    </div>

                    <div class="mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                        <h4 class="font-semibold text-yellow-800 mb-2">ุชุฐููุฑ:</h4>
                        <div class="text-sm text-yellow-700">
                            <p>โข ุณูุชู ุฅุฑุณุงู ุชุฐููุฑ ููุทุจูุจ ูุจู ุงูููุนุฏ ุจู 24 ุณุงุนุฉ</p>
                            <p>โข ูููู ุฅุนุงุฏุฉ ุฌุฏููุฉ ุงูููุนุฏ ุญุชู 2 ุณุงุนุฉ ูุจู ุงูููุช ุงููุญุฏุฏ</p>
                            <p>โข ูู ุญุงูุฉ ุงูุทูุงุฑุฆุ ูุฑุฌู ุงูุชูุงุตู ููุฑุงู</p>
                        </div>
                    </div>

                    <div class="flex space-x-4 space-x-reverse mt-6">
                        <button onclick="confirmSchedule()" class="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700">
                            โ ุชุฃููุฏ ุงูุฌุฏููุฉ
                        </button>
                        <button onclick="sendCalendarInvite()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                            ๐ง ุฅุฑุณุงู ุฏุนูุฉ
                        </button>
                        <button onclick="setReminder()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">
                            โฐ ุชุนููู ุชุฐููุฑ
                        </button>
                        <button onclick="closeModal()" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700">
                            ุฅุบูุงู
                        </button>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
            window.currentModal = modal;

            // Set default date to next week
            const nextWeek = new Date();
            nextWeek.setDate(nextWeek.getDate() + 7);
            document.getElementById('followUpDate').value = nextWeek.toISOString().split('T')[0];
        }

        // Urgent Consultation Functions
        function quickAdvice(type) {
            const advice = {
                'fever': 'ูุตุงุฆุญ ููุญูู: ุฑุงุญุฉ ุชุงูุฉุ ุดุฑุจ ุณูุงุฆู ูุซูุฑุฉุ ููุงุฏุงุช ุจุงุฑุฏุฉุ ูุฑุงูุจุฉ ุงูุญุฑุงุฑุฉ'
            };
            showInfoMessage(advice[type] || 'ูุตูุญุฉ ุทุจูุฉ ุนุงูุฉ');
        }

        function prescribeUrgent() {
            showSuccessMessage('ุชู ูุตู: ุจุงุฑุงุณูุชุงููู 500mg ูู 6 ุณุงุนุงุช + ูุฑุงุฌุนุฉ ููุฑูุฉ ุฅุฐุง ูู ุชุชุญุณู ุงูุญุงูุฉ');
        }

        function recommendER() {
            showWarningMessage('ุชู ุฅุฑุณุงู ุชูุตูุฉ ูููุฑูุถ ุจุงูุชูุฌู ููุฑุงู ููุณู ุงูุทูุงุฑุฆ');
        }

        function sendUrgentResponse() {
            const response = document.getElementById('urgentResponse');
            if (response && response.value.trim()) {
                showSuccessMessage('ุชู ุฅุฑุณุงู ุงูุฑุฏ ุงูุนุงุฌู ูููุฑูุถ');
                closeModal();
            } else {
                showWarningMessage('ูุฑุฌู ูุชุงุจุฉ ุงูุฑุฏ ุฃููุงู');
            }
        }

        function escalateToER() {
            showWarningMessage('ุชู ุชุตุนูุฏ ุงูุญุงูุฉ ููุณู ุงูุทูุงุฑุฆ - ุณูุชู ุงูุชูุงุตู ูุน ุงููุฑูุถ ุฎูุงู 5 ุฏูุงุฆู');
            closeModal();
        }

        // Start Consultation Functions
        function openVideoCall() {
            showInfoMessage('ุฌุงุฑู ูุชุญ ููุงููุฉ ุงูููุฏูู...');
        }

        function openVoiceCall() {
            showInfoMessage('ุฌุงุฑู ุจุฏุก ุงูููุงููุฉ ุงูุตูุชูุฉ...');
        }

        function shareScreen() {
            showInfoMessage('ุชู ุชูุนูู ูุดุงุฑูุฉ ุงูุดุงุดุฉ');
        }

        function sendFile() {
            showInfoMessage('ุชู ูุชุญ ูุงูุฐุฉ ุฅุฑุณุงู ุงููููุงุช');
        }

        function useTemplate() {
            showInfoMessage('ุชู ูุชุญ ุงูููุงูุจ ุงูุฌุงูุฒุฉ ููุงุณุชุดุงุฑุงุช ุงูููุณูุฉ');
        }

        function startConsultationNow() {
            const response = document.getElementById('initialResponse');
            if (response && response.value.trim()) {
                showSuccessMessage('ุชู ุจุฏุก ุงูุงุณุชุดุงุฑุฉ ูุฅุฑุณุงู ุงูุฑุฏ ุงูุฃููู ูููุฑูุถ');
                closeModal();
            } else {
                showWarningMessage('ูุฑุฌู ูุชุงุจุฉ ุงูุฑุฏ ุงูุฃููู ุฃููุงู');
            }
        }

        function scheduleForLater() {
            showInfoMessage('ุชู ุฌุฏููุฉ ุงูุงุณุชุดุงุฑุฉ ูููุนุฏ ูุงุญู - ุณูุชู ุฅุดุนุงุฑ ุงููุฑูุถ');
            closeModal();
        }

        function requestMoreInfo() {
            showInfoMessage('ุชู ุฅุฑุณุงู ุทูุจ ููุทุจูุจ ูุชูุฏูู ูุนูููุงุช ุฅุถุงููุฉ');
            closeModal();
        }

        // Prescription Functions
        function updatePrescriptionPreview() {
            const medication = document.getElementById('medicationName')?.value;
            const dosage = document.getElementById('dosage')?.value;
            const duration = document.getElementById('duration')?.value;
            const instructions = document.getElementById('instructions')?.value;

            const preview = document.getElementById('prescriptionPreview');
            if (preview && medication) {
                const medicationNames = {
                    'amlodipine': 'ุฃูููุฏูุจูู 5mg',
                    'lisinopril': 'ููุณูููุจุฑูู 10mg',
                    'metformin': 'ููุชููุฑููู 500mg',
                    'atorvastatin': 'ุฃุชูุฑูุงุณุชุงุชูู 20mg'
                };

                const dosageText = {
                    'once': 'ูุฑุฉ ูุงุญุฏุฉ ููููุงู',
                    'twice': 'ูุฑุชูู ููููุงู',
                    'three': 'ุซูุงุซ ูุฑุงุช ููููุงู',
                    'four': 'ุฃุฑุจุน ูุฑุงุช ููููุงู'
                };

                preview.innerHTML = `
                    <strong>ุงูุฏูุงุก:</strong> ${medicationNames[medication]}<br>
                    <strong>ุงูุฌุฑุนุฉ:</strong> ${dosageText[dosage] || dosage}<br>
                    <strong>ุงููุฏุฉ:</strong> ${duration} ููู<br>
                    <strong>ุงูุชุนูููุงุช:</strong> ${instructions || 'ูุง ุชูุฌุฏ ุชุนูููุงุช ุฅุถุงููุฉ'}
                `;
            }
        }

        function savePrescription() {
            const medication = document.getElementById('medicationName')?.value;
            if (medication) {
                showSuccessMessage('ุชู ุญูุธ ุงููุตูุฉ ูู ููู ุงูุทุจูุจ');
            } else {
                showWarningMessage('ูุฑุฌู ุงุฎุชูุงุฑ ุงูุฏูุงุก ุฃููุงู');
            }
        }

        function sendPrescription() {
            const medication = document.getElementById('medicationName')?.value;
            if (medication) {
                showSuccessMessage('ุชู ุฅุฑุณุงู ุงููุตูุฉ ููุทุจูุจ ุงููุฎุชุต');
                closeModal();
            } else {
                showWarningMessage('ูุฑุฌู ุงุฎุชูุงุฑ ุงูุฏูุงุก ุฃููุงู');
            }
        }

        function printPrescription() {
            const medication = document.getElementById('medicationName')?.value;
            if (medication) {
                showInfoMessage('ุฌุงุฑู ุชุญุถูุฑ ุงููุตูุฉ ููุทุจุงุนุฉ...');
                setTimeout(() => {
                    showSuccessMessage('ุชู ุฅุฑุณุงู ุงููุตูุฉ ููุทุงุจุนุฉ');
                }, 2000);
            } else {
                showWarningMessage('ูุฑุฌู ุงุฎุชูุงุฑ ุงูุฏูุงุก ุฃููุงู');
            }
        }

        // Schedule Functions
        function confirmSchedule() {
            const date = document.getElementById('followUpDate')?.value;
            const time = document.getElementById('followUpTime')?.value;
            const type = document.getElementById('followUpType')?.value;

            if (date && time) {
                showSuccessMessage(`ุชู ุชุฃููุฏ ุงูููุนุฏ: ${date} ูู ${time}`);
                closeModal();
            } else {
                showWarningMessage('ูุฑุฌู ุงุฎุชูุงุฑ ุงูุชุงุฑูุฎ ูุงูููุช');
            }
        }

        function sendCalendarInvite() {
            const date = document.getElementById('followUpDate')?.value;
            if (date) {
                showInfoMessage('ุชู ุฅุฑุณุงู ุฏุนูุฉ ุงูุชูููู ููุทุจูุจ');
            } else {
                showWarningMessage('ูุฑุฌู ุงุฎุชูุงุฑ ุงูุชุงุฑูุฎ ุฃููุงู');
            }
        }

        function setReminder() {
            const date = document.getElementById('followUpDate')?.value;
            if (date) {
                showSuccessMessage('ุชู ุชุนููู ุชุฐููุฑ ูุจู ุงูููุนุฏ ุจู 24 ุณุงุนุฉ');
            } else {
                showWarningMessage('ูุฑุฌู ุงุฎุชูุงุฑ ุงูุชุงุฑูุฎ ุฃููุงู');
            }
        }

        // Consultation Details Functions
        function downloadDetailedReport(consultationId) {
            console.log('๐ ุชุญููู ุชูุฑูุฑ ููุตู:', consultationId);
            showSuccessMessage('ุฌุงุฑู ุชุญุถูุฑ ุงูุชูุฑูุฑ ุงูููุตู...');

            setTimeout(() => {
                showSuccessMessage('ุชู ุชุญููู ุงูุชูุฑูุฑ ุงูููุตู ุจูุฌุงุญ - ูุญุชูู ุนูู ุฌููุน ุชูุงุตูู ุงูุงุณุชุดุงุฑุฉ');
            }, 2000);
        }

        function shareConsultation(consultationId) {
            console.log('๐ค ูุดุงุฑูุฉ ุงูุงุณุชุดุงุฑุฉ:', consultationId);

            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-bold text-gray-900">๐ค ูุดุงุฑูุฉ ุงูุงุณุชุดุงุฑุฉ</h3>
                        <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700">
                            <span class="text-xl">ร</span>
                        </button>
                    </div>

                    <div class="space-y-3">
                        <button onclick="shareViaEmail()" class="w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700">
                            ๐ง ูุดุงุฑูุฉ ุนุจุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
                        </button>
                        <button onclick="shareViaWhatsApp()" class="w-full bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700">
                            ๐ฑ ูุดุงุฑูุฉ ุนุจุฑ ูุงุชุณุงุจ
                        </button>
                        <button onclick="copyShareLink()" class="w-full bg-purple-600 text-white py-2 px-4 rounded hover:bg-purple-700">
                            ๐ ูุณุฎ ุฑุงุจุท ุงููุดุงุฑูุฉ
                        </button>
                        <button onclick="generateQRCode()" class="w-full bg-orange-600 text-white py-2 px-4 rounded hover:bg-orange-700">
                            ๐ฑ ุฅูุดุงุก ุฑูุฒ QR
                        </button>
                    </div>

                    <div class="mt-4 text-center">
                        <button onclick="closeModal()" class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700">
                            ุฅุบูุงู
                        </button>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
            window.currentModal = modal;
        }

        function addToFavorites(consultationId) {
            console.log('โญ ุฅุถุงูุฉ ููููุถูุฉ:', consultationId);
            showSuccessMessage('ุชู ุฅุถุงูุฉ ุงูุงุณุชุดุงุฑุฉ ููููุถูุฉ - ููููู ุงููุตูู ุฅูููุง ุจุณุฑุนุฉ ูุงุญูุงู');
        }

        function printConsultation(consultationId) {
            console.log('๐จ๏ธ ุทุจุงุนุฉ ุงูุงุณุชุดุงุฑุฉ:', consultationId);
            showInfoMessage('ุฌุงุฑู ุชุญุถูุฑ ุงูุงุณุชุดุงุฑุฉ ููุทุจุงุนุฉ...');

            setTimeout(() => {
                showSuccessMessage('ุชู ุฅุฑุณุงู ุงูุงุณุชุดุงุฑุฉ ููุทุงุจุนุฉ');
            }, 1500);
        }

        // Share Functions
        function shareViaEmail() {
            showSuccessMessage('ุชู ูุชุญ ุชุทุจูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุน ุชูุงุตูู ุงูุงุณุชุดุงุฑุฉ');
            closeModal();
        }

        function shareViaWhatsApp() {
            showSuccessMessage('ุชู ูุชุญ ูุงุชุณุงุจ ูุน ุฑุงุจุท ุงูุงุณุชุดุงุฑุฉ');
            closeModal();
        }

        function copyShareLink() {
            showSuccessMessage('ุชู ูุณุฎ ุฑุงุจุท ุงูุงุณุชุดุงุฑุฉ ุฅูู ุงูุญุงูุธุฉ');
            closeModal();
        }

        function generateQRCode() {
            showInfoMessage('ุชู ุฅูุดุงุก ุฑูุฒ QR ููุงุณุชุดุงุฑุฉ - ูููู ูุณุญู ูููุตูู ุงูุณุฑูุน');
            closeModal();
        }

        // Initialize Charts
        function initializeCharts() {
            // Monthly Growth Chart
            const monthlyCtx = document.getElementById('monthlyGrowthChart');
            if (monthlyCtx) {
                new Chart(monthlyCtx, {
                    type: 'line',
                    data: {
                        labels: ['ููุงูุฑ', 'ูุจุฑุงูุฑ', 'ูุงุฑุณ', 'ุฃุจุฑูู', 'ูุงูู', 'ููููู'],
                        datasets: [{
                            label: 'ุนุฏุฏ ุงูุงุณุชุดุงุฑุงุช',
                            data: [120, 190, 300, 250, 420, 380],
                            borderColor: 'rgb(59, 130, 246)',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: {
                                    color: 'rgba(59, 130, 246, 0.1)'
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                }
                            }
                        }
                    }
                });
            }

            // User Activity Chart
            const activityCtx = document.getElementById('userActivityChart');
            if (activityCtx) {
                new Chart(activityCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['ุฃุทุจุงุก ูุดุทูู', 'ุฃุทุจุงุก ุบูุฑ ูุชุตููู', 'ุฃุทุจุงุก ุฌุฏุฏ'],
                        datasets: [{
                            data: [120, 45, 25],
                            backgroundColor: [
                                'rgb(34, 197, 94)',
                                'rgb(156, 163, 175)',
                                'rgb(249, 115, 22)'
                            ],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    padding: 20,
                                    usePointStyle: true,
                                    font: {
                                        size: 12
                                    }
                                }
                            }
                        }
                    }
                });
            }
        }

        // Initialize charts when page loads
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(initializeCharts, 500); // Small delay to ensure elements are rendered
        });

        // Update charts with real-time data (simulation)
        function updateChartsData() {
            // Simulate real-time updates
            const stats = document.querySelectorAll('.bg-purple-50 .text-2xl, .bg-orange-50 .text-2xl, .bg-pink-50 .text-2xl, .bg-indigo-50 .text-2xl');

            stats.forEach((stat, index) => {
                const currentValue = parseInt(stat.textContent);
                const variation = Math.floor(Math.random() * 10) - 5; // Random variation between -5 and +5
                const newValue = Math.max(0, currentValue + variation);

                if (index === 3) { // Percentage value
                    stat.textContent = Math.min(100, newValue) + '%';
                } else {
                    stat.textContent = newValue.toLocaleString();
                }
            });

            // Update real-time activity numbers
            const onlineDoctors = document.querySelector('.text-green-600');
            const activeConsultations = document.querySelector('.text-blue-600');
            const responseTime = document.querySelector('.text-purple-600');

            if (onlineDoctors) {
                const current = parseInt(onlineDoctors.textContent);
                onlineDoctors.textContent = Math.max(20, current + Math.floor(Math.random() * 6) - 3);
            }

            if (activeConsultations) {
                const current = parseInt(activeConsultations.textContent);
                activeConsultations.textContent = Math.max(0, current + Math.floor(Math.random() * 4) - 2);
            }

            if (responseTime) {
                const variation = (Math.random() * 0.6) - 0.3; // ยฑ0.3 minutes
                const newTime = Math.max(1.0, 3.2 + variation);
                responseTime.textContent = newTime.toFixed(1) + ' ุฏูููุฉ';
            }
        }

        // Update data every 30 seconds
        setInterval(updateChartsData, 30000);
    </script>
</body>
</html>
