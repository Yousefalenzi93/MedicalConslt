<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥ØµÙ„Ø§Ø­ Ù…Ø´ÙƒÙ„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Cairo', sans-serif; }
    </style>
</head>
<body class="bg-gray-50 p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold text-center mb-8">ğŸ”§ Ø¥ØµÙ„Ø§Ø­ Ù…Ø´ÙƒÙ„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h1>
        
        <!-- Quick Fix Buttons -->
        <div class="bg-white rounded-lg shadow p-6 mb-6">
            <h2 class="text-xl font-bold mb-4">Ø­Ù„ÙˆÙ„ Ø³Ø±ÙŠØ¹Ø©</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <button onclick="fixDoctorLogin()" class="bg-blue-600 text-white px-6 py-4 rounded-lg hover:bg-blue-700 text-lg">
                    ğŸ‘¨â€âš•ï¸ Ø¥ØµÙ„Ø§Ø­ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø·Ø¨ÙŠØ¨
                </button>
                <button onclick="fixAdminLogin()" class="bg-red-600 text-white px-6 py-4 rounded-lg hover:bg-red-700 text-lg">
                    âš™ï¸ Ø¥ØµÙ„Ø§Ø­ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¯ÙŠØ±
                </button>
            </div>
        </div>

        <!-- Test Links -->
        <div class="bg-white rounded-lg shadow p-6 mb-6">
            <h2 class="text-xl font-bold mb-4">Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <a href="dashboard.html" class="bg-blue-600 text-white px-4 py-3 rounded-lg text-center hover:bg-blue-700">
                    ğŸ‘¨â€âš•ï¸ Ø§Ø®ØªØ¨Ø§Ø± Ù„ÙˆØ­Ø© Ø§Ù„Ø·Ø¨ÙŠØ¨
                </a>
                <a href="admin-dashboard.html" class="bg-red-600 text-white px-4 py-3 rounded-lg text-center hover:bg-red-700">
                    âš™ï¸ Ø§Ø®ØªØ¨Ø§Ø± Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ±
                </a>
                <a href="index.html" class="bg-gray-600 text-white px-4 py-3 rounded-lg text-center hover:bg-gray-700">
                    ğŸ  Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                </a>
            </div>
        </div>

        <!-- Status Display -->
        <div class="bg-white rounded-lg shadow p-6 mb-6">
            <h2 class="text-xl font-bold mb-4">Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</h2>
            <div id="status-display" class="space-y-2">
                <!-- Status will be displayed here -->
            </div>
        </div>

        <!-- Instructions -->
        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6">
            <h2 class="text-xl font-bold text-yellow-800 mb-4">ğŸ“‹ ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</h2>
            <ol class="list-decimal list-inside space-y-2 text-yellow-700">
                <li>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø¥ØµÙ„Ø§Ø­ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø·Ø¨ÙŠØ¨" Ù„Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø·Ø¨ÙŠØ¨</li>
                <li>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø¥ØµÙ„Ø§Ø­ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¯ÙŠØ±" Ù„Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¯ÙŠØ±</li>
                <li>Ø§Ø³ØªØ®Ø¯Ù… Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ù…Ù„ Ø§Ù„Ù†Ø¸Ø§Ù…</li>
                <li>Ø¥Ø°Ø§ Ø§Ø³ØªÙ…Ø±Øª Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŒ Ø§Ù…Ø³Ø­ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØµÙØ­ ÙˆØ£Ø¹Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</li>
            </ol>
        </div>
    </div>

    <script>
        function updateStatus(message, type = 'info') {
            const statusDiv = document.getElementById('status-display');
            const statusItem = document.createElement('div');
            statusItem.className = `p-3 rounded-lg ${
                type === 'success' ? 'bg-green-100 text-green-800' :
                type === 'error' ? 'bg-red-100 text-red-800' :
                'bg-blue-100 text-blue-800'
            }`;
            statusItem.innerHTML = `<strong>${new Date().toLocaleTimeString()}</strong> - ${message}`;
            statusDiv.appendChild(statusItem);
            statusDiv.scrollTop = statusDiv.scrollHeight;
        }

        function fixDoctorLogin() {
            updateStatus('ğŸ”§ Ø¨Ø¯Ø¡ Ø¥ØµÙ„Ø§Ø­ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø·Ø¨ÙŠØ¨...');
            
            try {
                // Clear any existing data
                localStorage.removeItem('currentUser');
                localStorage.removeItem('userType');
                sessionStorage.removeItem('currentUser');
                sessionStorage.removeItem('userType');
                
                updateStatus('ğŸ—‘ï¸ ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©');

                // Create doctor user
                const doctorUser = {
                    name: 'Ø¯. Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙØµÙ„Ø­',
                    license: 'FIX001',
                    email: 'fixed@tariqi-alilaji.com',
                    phone: '+966 50 123 4567',
                    userType: 'doctor',
                    specialty: 'Ø·Ø¨ Ø¹Ø§Ù…'
                };

                // Save to both storages
                localStorage.setItem('currentUser', JSON.stringify(doctorUser));
                localStorage.setItem('userType', 'doctor');
                sessionStorage.setItem('currentUser', JSON.stringify(doctorUser));
                sessionStorage.setItem('userType', 'doctor');

                updateStatus('âœ… ØªÙ… Ø¥ØµÙ„Ø§Ø­ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø·Ø¨ÙŠØ¨ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                updateStatus('ğŸ‘¨â€âš•ï¸ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„Ø·Ø¨ÙŠØ¨', 'success');

                // Auto-redirect after 3 seconds
                setTimeout(() => {
                    updateStatus('ğŸ”„ ØªÙˆØ¬ÙŠÙ‡ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„Ø·Ø¨ÙŠØ¨...');
                    window.location.href = 'dashboard.html';
                }, 3000);

            } catch (error) {
                updateStatus(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥ØµÙ„Ø§Ø­ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø·Ø¨ÙŠØ¨: ${error.message}`, 'error');
            }
        }

        function fixAdminLogin() {
            updateStatus('ğŸ”§ Ø¨Ø¯Ø¡ Ø¥ØµÙ„Ø§Ø­ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¯ÙŠØ±...');
            
            try {
                // Clear any existing data
                localStorage.removeItem('currentUser');
                localStorage.removeItem('userType');
                sessionStorage.removeItem('currentUser');
                sessionStorage.removeItem('userType');
                
                updateStatus('ğŸ—‘ï¸ ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©');

                // Create admin user
                const adminUser = {
                    name: 'Ù…Ø¯ÙŠØ± Ù…ÙØµÙ„Ø­',
                    license: 'ADMIN001',
                    email: 'admin@tariqi-alilaji.com',
                    phone: '+966 11 123 4567',
                    userType: 'admin',
                    specialty: 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ø¸Ø§Ù…'
                };

                // Save to both storages
                localStorage.setItem('currentUser', JSON.stringify(adminUser));
                localStorage.setItem('userType', 'admin');
                sessionStorage.setItem('currentUser', JSON.stringify(adminUser));
                sessionStorage.setItem('userType', 'admin');

                updateStatus('âœ… ØªÙ… Ø¥ØµÙ„Ø§Ø­ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¯ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                updateStatus('âš™ï¸ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ±', 'success');

                // Auto-redirect after 3 seconds
                setTimeout(() => {
                    updateStatus('ğŸ”„ ØªÙˆØ¬ÙŠÙ‡ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ±...');
                    window.location.href = 'admin-dashboard.html';
                }, 3000);

            } catch (error) {
                updateStatus(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥ØµÙ„Ø§Ø­ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¯ÙŠØ±: ${error.message}`, 'error');
            }
        }

        function checkCurrentStatus() {
            const localUser = localStorage.getItem('currentUser');
            const localType = localStorage.getItem('userType');
            const sessionUser = sessionStorage.getItem('currentUser');
            const sessionType = sessionStorage.getItem('userType');

            updateStatus('ğŸ“Š ÙØ­Øµ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©...');
            
            if (localUser && localType) {
                try {
                    const user = JSON.parse(localUser);
                    updateStatus(`âœ… localStorage: ${user.name} (${localType})`, 'success');
                } catch (e) {
                    updateStatus('âŒ localStorage: Ø¨ÙŠØ§Ù†Ø§Øª ØªØ§Ù„ÙØ©', 'error');
                }
            } else {
                updateStatus('âŒ localStorage: Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª', 'error');
            }

            if (sessionUser && sessionType) {
                try {
                    const user = JSON.parse(sessionUser);
                    updateStatus(`âœ… sessionStorage: ${user.name} (${sessionType})`, 'success');
                } catch (e) {
                    updateStatus('âŒ sessionStorage: Ø¨ÙŠØ§Ù†Ø§Øª ØªØ§Ù„ÙØ©', 'error');
                }
            } else {
                updateStatus('âŒ sessionStorage: Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª', 'error');
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateStatus('ğŸš€ ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø£Ø¯Ø§Ø© Ø§Ù„Ø¥ØµÙ„Ø§Ø­');
            checkCurrentStatus();
        });
    </script>
</body>
</html>
