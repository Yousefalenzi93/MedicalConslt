<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تسجيل طبيب جديد - طريقتي العلاجي</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'arabic': ['Cairo', 'Tajawal', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8'
                        },
                        medical: {
                            50: '#f0f9ff',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1'
                        }
                    }
                }
            }
        }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; }
        .medical-gradient {
            background: linear-gradient(135deg, #0284c7 0%, #0369a1 100%);
        }
        .step-indicator {
            transition: all 0.3s ease;
        }
        .step-active {
            background: #0284c7;
            color: white;
        }
        .step-completed {
            background: #10b981;
            color: white;
        }
        .step-inactive {
            background: #e5e7eb;
            color: #6b7280;
        }
    </style>
</head>

<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-6xl mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center">
                    <a href="index.html" class="flex items-center hover:opacity-80 transition-opacity">
                        <div class="w-10 h-10 bg-medical-600 rounded-lg flex items-center justify-center">
                            <span class="text-white font-bold text-xl">ط</span>
                        </div>
                        <h1 class="mr-3 text-xl font-bold text-gray-800">طريقتي العلاجي - تسجيل طبيب جديد</h1>
                    </a>
                </div>
                
                <div class="flex items-center space-x-4 space-x-reverse">
                    <a href="index.html" class="text-gray-600 hover:text-gray-800 hover:bg-gray-100 px-3 py-2 rounded-lg transition-colors">
                        🏠 الرئيسية
                    </a>
                    <a href="fix-login.html" class="text-purple-600 hover:text-purple-800 hover:bg-purple-100 px-3 py-2 rounded-lg transition-colors">
                        🔧 أدوات الإصلاح
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="min-h-screen bg-gray-50 py-12 px-4">
        <div class="max-w-2xl mx-auto">
            <!-- Registration Card -->
            <div class="bg-white rounded-lg shadow-xl overflow-hidden">
                <!-- Header -->
                <div class="medical-gradient p-8 text-center">
                    <div class="w-20 h-20 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-white text-3xl">👨‍⚕️</span>
                    </div>
                    <h2 class="text-3xl font-bold text-white">انضم إلى منصة الأطباء</h2>
                    <p class="text-blue-100 mt-2">سجل الآن وابدأ في تقديم الاستشارات الطبية</p>
                </div>

                <!-- Step Indicator -->
                <div class="bg-gray-50 px-8 py-4">
                    <div class="flex justify-between items-center">
                        <div class="flex items-center space-x-4 space-x-reverse">
                            <div id="step1" class="step-indicator step-active w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold">1</div>
                            <div class="w-16 h-1 bg-gray-300"></div>
                            <div id="step2" class="step-indicator step-inactive w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold">2</div>
                            <div class="w-16 h-1 bg-gray-300"></div>
                            <div id="step3" class="step-indicator step-inactive w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold">3</div>
                        </div>
                        <div class="text-sm text-gray-600">
                            <span id="stepText">الخطوة 1 من 3: البيانات الأساسية</span>
                        </div>
                    </div>
                </div>

                <!-- Registration Form -->
                <form id="registrationForm" class="p-8">
                    <!-- Step 1: Basic Information -->
                    <div id="step1Content" class="step-content">
                        <h3 class="text-xl font-bold text-gray-900 mb-6">البيانات الأساسية</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="fullName" class="block text-sm font-medium text-gray-700 mb-2">
                                    الاسم الكامل *
                                </label>
                                <input 
                                    type="text" 
                                    id="fullName" 
                                    name="fullName"
                                    required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-transparent"
                                    placeholder="د. أحمد محمد السعيد"
                                >
                            </div>

                            <div>
                                <label for="email" class="block text-sm font-medium text-gray-700 mb-2">
                                    البريد الإلكتروني *
                                </label>
                                <input 
                                    type="email" 
                                    id="email" 
                                    name="email"
                                    required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-transparent"
                                    placeholder="doctor@example.com"
                                >
                            </div>

                            <div>
                                <label for="phone" class="block text-sm font-medium text-gray-700 mb-2">
                                    رقم الهاتف *
                                </label>
                                <input 
                                    type="tel" 
                                    id="phone" 
                                    name="phone"
                                    required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-transparent"
                                    placeholder="+966 50 123 4567"
                                >
                            </div>

                            <div>
                                <label for="license" class="block text-sm font-medium text-gray-700 mb-2">
                                    رقم الترخيص الطبي *
                                </label>
                                <input 
                                    type="text" 
                                    id="license" 
                                    name="license"
                                    required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-transparent"
                                    placeholder="DOC123456"
                                >
                            </div>
                        </div>

                        <div class="mt-6">
                            <label for="password" class="block text-sm font-medium text-gray-700 mb-2">
                                كلمة المرور *
                            </label>
                            <input 
                                type="password" 
                                id="password" 
                                name="password"
                                required
                                minlength="6"
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-transparent"
                                placeholder="كلمة مرور قوية"
                            >
                        </div>

                        <div class="mt-6">
                            <label for="confirmPassword" class="block text-sm font-medium text-gray-700 mb-2">
                                تأكيد كلمة المرور *
                            </label>
                            <input 
                                type="password" 
                                id="confirmPassword" 
                                name="confirmPassword"
                                required
                                minlength="6"
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-transparent"
                                placeholder="أعد كتابة كلمة المرور"
                            >
                        </div>
                    </div>

                    <!-- Step 2: Professional Information -->
                    <div id="step2Content" class="step-content hidden">
                        <h3 class="text-xl font-bold text-gray-900 mb-6">المعلومات المهنية</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="specialty" class="block text-sm font-medium text-gray-700 mb-2">
                                    التخصص *
                                </label>
                                <select 
                                    id="specialty" 
                                    name="specialty"
                                    required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-transparent"
                                >
                                    <option value="">اختر التخصص</option>
                                    <option value="طب القلب">طب القلب</option>
                                    <option value="طب الأطفال">طب الأطفال</option>
                                    <option value="طب الجلدية">طب الجلدية</option>
                                    <option value="طب العيون">طب العيون</option>
                                    <option value="طب الأعصاب">طب الأعصاب</option>
                                    <option value="جراحة العظام">جراحة العظام</option>
                                    <option value="الطب النفسي">الطب النفسي</option>
                                    <option value="طب عام">طب عام</option>
                                    <option value="أخرى">أخرى</option>
                                </select>
                            </div>

                            <div>
                                <label for="experience" class="block text-sm font-medium text-gray-700 mb-2">
                                    سنوات الخبرة *
                                </label>
                                <select 
                                    id="experience" 
                                    name="experience"
                                    required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-transparent"
                                >
                                    <option value="">اختر سنوات الخبرة</option>
                                    <option value="أقل من سنة">أقل من سنة</option>
                                    <option value="1-3 سنوات">1-3 سنوات</option>
                                    <option value="3-5 سنوات">3-5 سنوات</option>
                                    <option value="5-10 سنوات">5-10 سنوات</option>
                                    <option value="أكثر من 10 سنوات">أكثر من 10 سنوات</option>
                                </select>
                            </div>
                        </div>

                        <div class="mt-6">
                            <label for="hospital" class="block text-sm font-medium text-gray-700 mb-2">
                                المستشفى أو العيادة *
                            </label>
                            <input 
                                type="text" 
                                id="hospital" 
                                name="hospital"
                                required
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-transparent"
                                placeholder="مستشفى الملك فيصل التخصصي"
                            >
                        </div>

                        <div class="mt-6">
                            <label for="bio" class="block text-sm font-medium text-gray-700 mb-2">
                                نبذة مختصرة
                            </label>
                            <textarea 
                                id="bio" 
                                name="bio"
                                rows="4"
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-transparent"
                                placeholder="اكتب نبذة مختصرة عن خبرتك ومجال تخصصك..."
                            ></textarea>
                        </div>
                    </div>

                    <!-- Step 3: Confirmation -->
                    <div id="step3Content" class="step-content hidden">
                        <h3 class="text-xl font-bold text-gray-900 mb-6">مراجعة البيانات</h3>
                        
                        <div class="bg-gray-50 rounded-lg p-6 mb-6">
                            <h4 class="font-bold text-gray-900 mb-4">ملخص البيانات المدخلة:</h4>
                            <div id="summaryContent" class="space-y-2 text-sm">
                                <!-- Summary will be populated by JavaScript -->
                            </div>
                        </div>

                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                            <div class="flex items-start">
                                <div class="flex-shrink-0">
                                    <span class="text-blue-600 text-xl">ℹ️</span>
                                </div>
                                <div class="mr-3">
                                    <h4 class="text-blue-900 font-medium">ملاحظة مهمة</h4>
                                    <p class="text-blue-700 text-sm mt-1">
                                        سيتم مراجعة طلبك من قبل فريق الإدارة خلال 24-48 ساعة. 
                                        ستصلك رسالة تأكيد على البريد الإلكتروني المسجل.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="flex items-center mb-6">
                            <input 
                                type="checkbox" 
                                id="terms" 
                                name="terms"
                                required
                                class="h-4 w-4 text-medical-600 focus:ring-medical-500 border-gray-300 rounded"
                            >
                            <label for="terms" class="mr-2 text-sm text-gray-700">
                                أوافق على <a href="#" class="text-medical-600 hover:text-medical-700">الشروط والأحكام</a> 
                                و <a href="#" class="text-medical-600 hover:text-medical-700">سياسة الخصوصية</a>
                            </label>
                        </div>
                    </div>

                    <!-- Navigation Buttons -->
                    <div class="flex justify-between items-center mt-8 pt-6 border-t border-gray-200">
                        <button 
                            type="button" 
                            id="prevBtn" 
                            onclick="previousStep()"
                            class="hidden bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors"
                        >
                            ← السابق
                        </button>
                        
                        <div class="flex space-x-4 space-x-reverse">
                            <button 
                                type="button" 
                                id="nextBtn" 
                                onclick="nextStep()"
                                class="bg-medical-600 text-white px-6 py-2 rounded-lg hover:bg-medical-700 transition-colors"
                            >
                                التالي →
                            </button>
                            
                            <button 
                                type="submit" 
                                id="submitBtn" 
                                class="hidden bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors"
                            >
                                إرسال الطلب
                            </button>
                        </div>
                    </div>
                </form>

                <!-- Quick Registration -->
                <div class="bg-gray-50 px-8 py-4 border-t border-gray-200">
                    <div class="text-center">
                        <p class="text-sm text-gray-600 mb-2">للاختبار السريع:</p>
                        <button 
                            onclick="fillDemoData()" 
                            class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors text-sm"
                        >
                            🧪 ملء بيانات تجريبية
                        </button>
                    </div>
                </div>
            </div>

            <!-- Login Link -->
            <div class="text-center mt-6">
                <p class="text-gray-600">
                    لديك حساب بالفعل؟ 
                    <a href="index.html" class="text-medical-600 hover:text-medical-700 font-medium">سجل الدخول</a>
                </p>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 3;

        function nextStep() {
            if (validateCurrentStep()) {
                if (currentStep < totalSteps) {
                    currentStep++;
                    updateStepDisplay();
                }
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                updateStepDisplay();
            }
        }

        function updateStepDisplay() {
            // Hide all step contents
            document.querySelectorAll('.step-content').forEach(content => {
                content.classList.add('hidden');
            });

            // Show current step content
            document.getElementById(`step${currentStep}Content`).classList.remove('hidden');

            // Update step indicators
            for (let i = 1; i <= totalSteps; i++) {
                const stepEl = document.getElementById(`step${i}`);
                if (i < currentStep) {
                    stepEl.className = 'step-indicator step-completed w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold';
                } else if (i === currentStep) {
                    stepEl.className = 'step-indicator step-active w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold';
                } else {
                    stepEl.className = 'step-indicator step-inactive w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold';
                }
            }

            // Update step text
            const stepTexts = [
                'الخطوة 1 من 3: البيانات الأساسية',
                'الخطوة 2 من 3: المعلومات المهنية',
                'الخطوة 3 من 3: مراجعة البيانات'
            ];
            document.getElementById('stepText').textContent = stepTexts[currentStep - 1];

            // Update navigation buttons
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const submitBtn = document.getElementById('submitBtn');

            if (currentStep === 1) {
                prevBtn.classList.add('hidden');
            } else {
                prevBtn.classList.remove('hidden');
            }

            if (currentStep === totalSteps) {
                nextBtn.classList.add('hidden');
                submitBtn.classList.remove('hidden');
                updateSummary();
            } else {
                nextBtn.classList.remove('hidden');
                submitBtn.classList.add('hidden');
            }
        }

        function validateCurrentStep() {
            const currentStepContent = document.getElementById(`step${currentStep}Content`);
            const requiredFields = currentStepContent.querySelectorAll('[required]');

            let isValid = true;

            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    field.classList.add('border-red-500');
                    isValid = false;
                } else {
                    field.classList.remove('border-red-500');
                }
            });

            // Additional validation for step 1
            if (currentStep === 1) {
                const password = document.getElementById('password').value;
                const confirmPassword = document.getElementById('confirmPassword').value;

                if (password !== confirmPassword) {
                    document.getElementById('confirmPassword').classList.add('border-red-500');
                    showErrorMessage('كلمات المرور غير متطابقة');
                    isValid = false;
                }

                const email = document.getElementById('email').value;
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(email)) {
                    document.getElementById('email').classList.add('border-red-500');
                    showErrorMessage('البريد الإلكتروني غير صحيح');
                    isValid = false;
                }
            }

            if (!isValid) {
                showErrorMessage('يرجى ملء جميع الحقول المطلوبة بشكل صحيح');
            }

            return isValid;
        }

        function updateSummary() {
            const summaryContent = document.getElementById('summaryContent');
            const formData = new FormData(document.getElementById('registrationForm'));

            const summary = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div><strong>الاسم:</strong> ${formData.get('fullName')}</div>
                    <div><strong>البريد الإلكتروني:</strong> ${formData.get('email')}</div>
                    <div><strong>الهاتف:</strong> ${formData.get('phone')}</div>
                    <div><strong>رقم الترخيص:</strong> ${formData.get('license')}</div>
                    <div><strong>التخصص:</strong> ${formData.get('specialty')}</div>
                    <div><strong>الخبرة:</strong> ${formData.get('experience')}</div>
                    <div class="md:col-span-2"><strong>المستشفى:</strong> ${formData.get('hospital')}</div>
                    ${formData.get('bio') ? `<div class="md:col-span-2"><strong>النبذة:</strong> ${formData.get('bio')}</div>` : ''}
                </div>
            `;

            summaryContent.innerHTML = summary;
        }

        function fillDemoData() {
            document.getElementById('fullName').value = 'د. أحمد محمد السعيد';
            document.getElementById('email').value = 'ahmed.doctor@example.com';
            document.getElementById('phone').value = '+966 50 123 4567';
            document.getElementById('license').value = 'DOC123456';
            document.getElementById('password').value = 'demo123';
            document.getElementById('confirmPassword').value = 'demo123';
            document.getElementById('specialty').value = 'طب القلب';
            document.getElementById('experience').value = '5-10 سنوات';
            document.getElementById('hospital').value = 'مستشفى الملك فيصل التخصصي';
            document.getElementById('bio').value = 'طبيب متخصص في طب القلب مع خبرة واسعة في علاج أمراض القلب والأوعية الدموية';

            showSuccessMessage('تم ملء البيانات التجريبية بنجاح');
        }

        // Form submission
        document.getElementById('registrationForm').addEventListener('submit', function(e) {
            e.preventDefault();

            if (!validateCurrentStep()) {
                return;
            }

            const termsCheckbox = document.getElementById('terms');
            if (!termsCheckbox.checked) {
                showErrorMessage('يجب الموافقة على الشروط والأحكام');
                return;
            }

            // Collect form data
            const formData = new FormData(this);
            const doctorData = {
                name: formData.get('fullName'),
                email: formData.get('email'),
                phone: formData.get('phone'),
                license: formData.get('license'),
                specialty: formData.get('specialty'),
                experience: formData.get('experience'),
                hospital: formData.get('hospital'),
                bio: formData.get('bio'),
                status: 'pending',
                registrationDate: new Date().toISOString(),
                userType: 'doctor'
            };

            console.log('📝 بيانات التسجيل:', doctorData);

            // Simulate registration process
            showSuccessMessage('جاري إرسال طلب التسجيل...');

            setTimeout(() => {
                // Save to localStorage for demo purposes
                const existingRequests = JSON.parse(localStorage.getItem('registrationRequests') || '[]');
                existingRequests.push(doctorData);
                localStorage.setItem('registrationRequests', JSON.stringify(existingRequests));

                showSuccessMessage('تم إرسال طلب التسجيل بنجاح!');

                setTimeout(() => {
                    window.location.href = 'index.html?registered=true';
                }, 2000);
            }, 2000);
        });

        function showSuccessMessage(message) {
            const messageEl = document.createElement('div');
            messageEl.className = 'fixed top-4 left-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50';
            messageEl.textContent = message;
            document.body.appendChild(messageEl);

            setTimeout(() => {
                if (document.body.contains(messageEl)) {
                    document.body.removeChild(messageEl);
                }
            }, 3000);
        }

        function showErrorMessage(message) {
            const messageEl = document.createElement('div');
            messageEl.className = 'fixed top-4 left-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50';
            messageEl.textContent = message;
            document.body.appendChild(messageEl);

            setTimeout(() => {
                if (document.body.contains(messageEl)) {
                    document.body.removeChild(messageEl);
                }
            }, 3000);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateStepDisplay();
        });
    </script>
</body>
</html>
