<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุญุฉ ุชุญูู ุงููุฏูุฑ - ุทุฑููุชู ุงูุนูุงุฌู</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Firebase SDK -->
    <script type="module">
        // Import Firebase modules
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import {
            getFirestore,
            collection,
            getDocs,
            doc,
            updateDoc,
            deleteDoc,
            query,
            where,
            orderBy,
            serverTimestamp,
            onSnapshot,
            addDoc,
            getDoc
        } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        import {
            getDatabase,
            ref,
            push,
            set,
            get,
            remove,
            onValue,
            off
        } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';
        import {
            getAuth,
            signInWithEmailAndPassword,
            onAuthStateChanged
        } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import {
            getAnalytics
        } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js';

        // Firebase configuration - Updated with complete settings
        const firebaseConfig = {
            apiKey: "AIzaSyDsrOCUDUevhiv2rYc5ATx4NTnBkKQ-T9k",
            authDomain: "mtmconsult-f48f1.firebaseapp.com",
            databaseURL: "https://mtmconsult-f48f1-default-rtdb.firebaseio.com",
            projectId: "mtmconsult-f48f1",
            storageBucket: "mtmconsult-f48f1.firebasestorage.app",
            messagingSenderId: "668149959230",
            appId: "1:668149959230:web:06c54fd158d03faf8e9f6f",
            measurementId: "G-TR97F5BZ7L"
        };

        // Initialize Firebase with error handling
        let app, db, realtimeDb, auth, analytics;
        let firebaseInitialized = false;

        try {
            console.log('๐ฅ ุชููุฆุฉ Firebase...');
            app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            realtimeDb = getDatabase(app);
            auth = getAuth(app);
            analytics = getAnalytics(app);
            firebaseInitialized = true;
            console.log('โ ุชู ุชููุฆุฉ Firebase ุจูุฌุงุญ');
        } catch (error) {
            console.error('โ ุฎุทุฃ ูู ุชููุฆุฉ Firebase:', error);
            console.warn('โ๏ธ ุณูุชู ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ');
            firebaseInitialized = false;
        }

        // Make Firebase available globally
        window.firebaseApp = app;
        window.db = db;
        window.realtimeDb = realtimeDb;
        window.auth = auth;
        window.analytics = analytics;
        window.firebaseModules = {
            // Firestore modules
            collection,
            getDocs,
            doc,
            updateDoc,
            deleteDoc,
            query,
            where,
            orderBy,
            serverTimestamp,
            onSnapshot,
            addDoc,
            getDoc,
            // Realtime Database modules
            ref,
            push,
            set,
            get,
            remove,
            onValue,
            off,
            // Auth modules
            signInWithEmailAndPassword,
            onAuthStateChanged
        };

        console.log('๐ฅ Firebase ุชู ุชุญูููู ุจูุฌุงุญ ูุน Firestore ู Realtime Database');

        // Database helper functions with Firebase fallback
        window.dbHelpers = {
            // Choose between Firestore and Realtime Database
            useFirestore: true, // Set to false to use Realtime Database

            // Check if Firebase is available
            isFirebaseAvailable() {
                return firebaseInitialized && window.db && window.realtimeDb;
            },

            // Get data from preferred database
            async getData(path) {
                if (!this.isFirebaseAvailable()) {
                    throw new Error('Firebase ุบูุฑ ูุชุงุญ - ุงุณุชุฎุฏู ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ');
                }

                try {
                    if (this.useFirestore) {
                        const { collection, getDocs } = window.firebaseModules;
                        const snapshot = await getDocs(collection(window.db, path));
                        const data = [];
                        snapshot.forEach(doc => data.push({ id: doc.id, ...doc.data() }));
                        console.log(`โ ุชู ุชุญููู ${data.length} ุนูุตุฑ ูู Firestore/${path}`);
                        return data;
                    } else {
                        const { ref, get } = window.firebaseModules;
                        const snapshot = await get(ref(window.realtimeDb, path));
                        const data = snapshot.exists() ? Object.entries(snapshot.val()).map(([id, data]) => ({ id, ...data })) : [];
                        console.log(`โ ุชู ุชุญููู ${data.length} ุนูุตุฑ ูู Realtime Database/${path}`);
                        return data;
                    }
                } catch (error) {
                    console.error(`โ ุฎุทุฃ ูู ุชุญููู ุงูุจูุงูุงุช ูู ${path}:`, error);
                    throw error;
                }
            },

            // Add data to preferred database
            async addData(path, data) {
                if (!this.isFirebaseAvailable()) {
                    throw new Error('Firebase ุบูุฑ ูุชุงุญ - ูุง ูููู ุญูุธ ุงูุจูุงูุงุช');
                }

                try {
                    if (this.useFirestore) {
                        const { collection, addDoc, serverTimestamp } = window.firebaseModules;
                        const result = await addDoc(collection(window.db, path), {
                            ...data,
                            createdAt: serverTimestamp(),
                            updatedAt: serverTimestamp()
                        });
                        console.log(`โ ุชู ุฅุถุงูุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ ุฅูู Firestore/${path}:`, result.id);
                        return result;
                    } else {
                        const { ref, push } = window.firebaseModules;
                        const result = await push(ref(window.realtimeDb, path), {
                            ...data,
                            createdAt: Date.now(),
                            updatedAt: Date.now()
                        });
                        console.log(`โ ุชู ุฅุถุงูุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ ุฅูู Realtime Database/${path}:`, result.key);
                        return result;
                    }
                } catch (error) {
                    console.error(`โ ุฎุทุฃ ูู ุฅุถุงูุฉ ุงูุจูุงูุงุช ุฅูู ${path}:`, error);
                    throw error;
                }
            },

            // Update data in preferred database
            async updateData(path, id, data) {
                if (this.useFirestore) {
                    const { doc, updateDoc, serverTimestamp } = window.firebaseModules;
                    return await updateDoc(doc(window.db, path, id), {
                        ...data,
                        updatedAt: serverTimestamp()
                    });
                } else {
                    const { ref, set } = window.firebaseModules;
                    return await set(ref(window.realtimeDb, `${path}/${id}`), {
                        ...data,
                        updatedAt: Date.now()
                    });
                }
            },

            // Delete data from preferred database
            async deleteData(path, id) {
                if (this.useFirestore) {
                    const { doc, deleteDoc } = window.firebaseModules;
                    return await deleteDoc(doc(window.db, path, id));
                } else {
                    const { ref, remove } = window.firebaseModules;
                    return await remove(ref(window.realtimeDb, `${path}/${id}`));
                }
            }
        };

        // Performance monitoring
        window.performanceMonitor = {
            startTime: null,

            start(operation) {
                this.startTime = performance.now();
                console.log(`โฑ๏ธ ุจุฏุก ${operation}...`);
            },

            end(operation) {
                if (this.startTime) {
                    const duration = performance.now() - this.startTime;
                    console.log(`โ ุงูุชูู ${operation} ูู ${duration.toFixed(2)}ms`);
                    this.startTime = null;
                    return duration;
                }
            }
        };
    </script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'arabic': ['Cairo', 'Tajawal', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8'
                        },
                        medical: {
                            50: '#f0f9ff',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1'
                        },
                        admin: {
                            50: '#fef2f2',
                            500: '#ef4444',
                            600: '#dc2626',
                            700: '#b91c1c'
                        }
                    }
                }
            }
        }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; }
        .admin-warning { 
            background: linear-gradient(45deg, #fee2e2, #fecaca);
            border: 2px solid #f87171;
        }
    </style>
</head>

<body class="bg-gray-50">
    <!-- Security Check -->
    <script>
        // Simple security check - in real app, this would be server-side
        const isAdmin = sessionStorage.getItem('userType') === 'admin';
        if (!isAdmin) {
            alert('โ๏ธ ุบูุฑ ูุตุฑุญ ูู ุจุงููุตูู ููุฐู ุงูุตูุญุฉ');
            window.location.href = 'index.html';
        }
    </script>

    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-6xl mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center">
                    <a href="index.html" class="flex items-center hover:opacity-80 transition-opacity">
                        <div class="w-10 h-10 bg-admin-600 rounded-lg flex items-center justify-center">
                            <span class="text-white font-bold text-xl">โ๏ธ</span>
                        </div>
                        <h1 class="mr-3 text-xl font-bold text-gray-800">ุทุฑููุชู ุงูุนูุงุฌู - ุงููุฏูุฑ</h1>
                    </a>
                </div>
                
                <div class="flex items-center space-x-4 space-x-reverse">
                    <button onclick="quickAdminActions()" class="bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm">
                        โก ุฅุฌุฑุงุกุงุช ุณุฑูุนุฉ
                    </button>
                    <div class="admin-warning px-3 py-2 rounded-lg">
                        <span class="text-admin-700 font-medium text-sm">โ๏ธ ูุถุน ุงููุฏูุฑ</span>
                    </div>
                    <div class="flex items-center space-x-2 space-x-reverse">
                        <span class="text-sm text-admin-600 font-medium">ูุฑุญุจุงูุ <span data-admin-name>ูุฏูุฑ ุงูููุตุฉ</span></span>
                        <a href="index.html" onclick="logout()" class="text-red-600 hover:text-red-700 px-3 py-2 rounded-lg hover:bg-red-50 transition-colors text-sm">
                            ุฎุฑูุฌ
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="min-h-screen bg-gray-50 py-8">
        <div class="max-w-7xl mx-auto px-4">
            <!-- Header -->
            <div class="mb-8">
                <h1 class="text-3xl font-bold text-gray-900 mb-2">ููุญุฉ ุชุญูู ุงููุฏูุฑ</h1>
                <p class="text-gray-600">ูุฑุญุจุงู <span data-admin-name>ูุฏูุฑ ุงูููุตุฉ</span> - ุฅุฏุงุฑุฉ ุดุงููุฉ ูููุตุฉ ุทุฑููุชู ุงูุนูุงุฌู</p>
                <p class="text-sm text-gray-500 mt-1">ุงูุตูุงุญูุฉ: <span data-admin-role>ูุฏูุฑ ุนุงู</span></p>
            </div>

            <!-- Navigation Tabs -->
            <div class="mb-8">
                <nav class="flex space-x-8 space-x-reverse">
                    <button onclick="showTab('overview')" id="tab-overview" class="flex items-center px-3 py-2 text-sm font-medium rounded-md bg-admin-100 text-admin-700">
                        <span class="ml-2">๐</span>
                        ูุธุฑุฉ ุนุงูุฉ
                    </button>
                    <button onclick="showTab('doctors')" id="tab-doctors" class="flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100">
                        <span class="ml-2">๐ฅ</span>
                        ุฅุฏุงุฑุฉ ุงูุฃุทุจุงุก
                    </button>
                    <button onclick="showTab('requests')" id="tab-requests" class="flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100">
                        <span class="ml-2">๐</span>
                        ุทูุจุงุช ุงูุงูุถูุงู
                    </button>
                    <button onclick="showTab('reports')" id="tab-reports" class="flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100">
                        <span class="ml-2">๐</span>
                        ุงูุชูุงุฑูุฑ
                    </button>
                    <button onclick="showTab('settings')" id="tab-settings" class="flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100">
                        <span class="ml-2">โ๏ธ</span>
                        ุงูุฅุนุฏุงุฏุงุช
                    </button>
                </nav>
            </div>

            <!-- Overview Tab -->
            <div id="content-overview" class="tab-content">
                <!-- Stats Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                                <span class="text-blue-600 text-xl">๐ฅ</span>
                            </div>
                            <div class="mr-4">
                                <p class="text-sm font-medium text-gray-600">ุฅุฌูุงูู ุงูุฃุทุจุงุก</p>
                                <p class="text-2xl font-bold text-gray-900">2,847</p>
                                <p class="text-xs text-green-600">+12.5% ูุฐุง ุงูุดูุฑ</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                <span class="text-green-600 text-xl">๐ฌ</span>
                            </div>
                            <div class="mr-4">
                                <p class="text-sm font-medium text-gray-600">ุฅุฌูุงูู ุงูุงุณุชุดุงุฑุงุช</p>
                                <p class="text-2xl font-bold text-gray-900">15,420</p>
                                <p class="text-xs text-green-600">+8.3% ูุฐุง ุงูุดูุฑ</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                                <span class="text-purple-600 text-xl">๐ข</span>
                            </div>
                            <div class="mr-4">
                                <p class="text-sm font-medium text-gray-600">ุงููุณุชุฎุฏููู ุงููุดุทูู</p>
                                <p class="text-2xl font-bold text-gray-900">342</p>
                                <p class="text-xs text-gray-500">ุงูุขู</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center">
                                <span class="text-orange-600 text-xl">๐</span>
                            </div>
                            <div class="mr-4">
                                <p class="text-sm font-medium text-gray-600">ุทูุจุงุช ุงูุงูุถูุงู</p>
                                <p class="text-2xl font-bold text-gray-900">23</p>
                                <p class="text-xs text-orange-600">ูู ุงูุงูุชุธุงุฑ</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts and Recent Activity -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Growth Chart -->
                    <div class="bg-white rounded-lg shadow p-6">
                        <h3 class="text-lg font-medium text-gray-900 mb-4">ููู ุงูููุตุฉ</h3>
                        <div class="h-64 bg-gray-50 rounded-lg flex items-center justify-center">
                            <div class="text-center">
                                <div class="text-4xl mb-2">๐</div>
                                <p class="text-gray-600">ุฑุณู ุจูุงูู ูููู ุงูููุตุฉ</p>
                                <p class="text-sm text-gray-500">ุณูุชู ุฅุถุงูุฉ ุงููุฎุทุทุงุช ูุฑูุจุงู</p>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Activities -->
                    <div class="bg-white rounded-lg shadow p-6">
                        <h3 class="text-lg font-medium text-gray-900 mb-4">ุงูุฃูุดุทุฉ ุงูุญุฏูุซุฉ</h3>
                        <div class="space-y-3">
                            <div class="flex items-center p-3 bg-gray-50 rounded-lg">
                                <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center ml-3">
                                    <span class="text-blue-600 text-sm">๐</span>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-gray-900">ุชุณุฌูู ุฏุฎูู</p>
                                    <p class="text-xs text-gray-600">ุฏ. ุฃุญูุฏ ูุญูุฏ โข ููุฐ 5 ุฏูุงุฆู</p>
                                </div>
                            </div>
                            <div class="flex items-center p-3 bg-gray-50 rounded-lg">
                                <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center ml-3">
                                    <span class="text-green-600 text-sm">๐ฌ</span>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-gray-900">ุงุณุชุดุงุฑุฉ ุฌุฏูุฏุฉ</p>
                                    <p class="text-xs text-gray-600">ุฏ. ูุงุทูุฉ ุนูู โข ููุฐ 15 ุฏูููุฉ</p>
                                </div>
                            </div>
                            <div class="flex items-center p-3 bg-gray-50 rounded-lg">
                                <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center ml-3">
                                    <span class="text-purple-600 text-sm">๐ค</span>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-gray-900">ุชุญุฏูุซ ุงูููู ุงูุดุฎุตู</p>
                                    <p class="text-xs text-gray-600">ุฏ. ูุญูุฏ ุณุงูู โข ููุฐ 30 ุฏูููุฉ</p>
                                </div>
                            </div>
                            <div class="flex items-center p-3 bg-gray-50 rounded-lg">
                                <div class="w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center ml-3">
                                    <span class="text-orange-600 text-sm">๐</span>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-gray-900">ุทูุจ ุงูุถูุงู ุฌุฏูุฏ</p>
                                    <p class="text-xs text-gray-600">ุฏ. ุณุงุฑุฉ ุฃุญูุฏ โข ููุฐ ุณุงุนุฉ</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Doctors Management Tab -->
            <div id="content-doctors" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <div class="flex justify-between items-center">
                            <h3 class="text-lg font-medium text-gray-900">ุฅุฏุงุฑุฉ ุงูุฃุทุจุงุก</h3>
                            <div class="flex space-x-2 space-x-reverse">
                                <button onclick="addNewDoctor()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 text-sm">
                                    โ ุฅุถุงูุฉ ุทุจูุจ
                                </button>
                                <button onclick="refreshDoctors()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm">
                                    ๐ ุชุญุฏูุซ
                                </button>
                                <button onclick="exportDoctors()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 text-sm">
                                    ๐ ุชุตุฏูุฑ
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="p-6">
                        <!-- Loading State -->
                        <div id="doctorsLoading" class="text-center py-8">
                            <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
                            <p class="mt-2 text-gray-600">ุฌุงุฑู ุชุญููู ุจูุงูุงุช ุงูุฃุทุจุงุก...</p>
                        </div>

                        <!-- Doctors Table -->
                        <div id="doctorsTable" class="hidden">
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุงูุทุจูุจ</th>
                                            <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุงูุชุฎุตุต</th>
                                            <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุงููุณุชุดูู</th>
                                            <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุชุงุฑูุฎ ุงูุชุณุฌูู</th>
                                            <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุงูุญุงูุฉ</th>
                                            <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุงูุฅุฌุฑุงุกุงุช</th>
                                        </tr>
                                    </thead>
                                    <tbody id="doctorsTableBody" class="bg-white divide-y divide-gray-200">
                                        <!-- ุณูุชู ููุก ุงูุจูุงูุงุช ูู Firebase -->
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Empty State -->
                        <div id="doctorsEmpty" class="hidden text-center py-12">
                            <div class="text-6xl mb-4">๐จโโ๏ธ</div>
                            <p class="text-gray-600">ูุง ุชูุฌุฏ ุฃุทุจุงุก ูุณุฌููู ุญุงููุงู</p>
                            <p class="text-sm text-gray-500">ุณูุธูุฑ ุงูุฃุทุจุงุก ููุง ุจุนุฏ ุชุณุฌูููู ูู ุงูููุตุฉ</p>
                        </div>

                        <!-- Error State -->
                        <div id="doctorsError" class="hidden text-center py-12">
                            <div class="text-6xl mb-4">โ๏ธ</div>
                            <p class="text-red-600">ุญุฏุซ ุฎุทุฃ ูู ุชุญููู ุจูุงูุงุช ุงูุฃุทุจุงุก</p>
                            <button onclick="loadDoctors()" class="mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                                ุฅุนุงุฏุฉ ุงููุญุงููุฉ
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Requests Tab -->
            <div id="content-requests" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-medium text-gray-900">ุทูุจุงุช ุงูุงูุถูุงู ุงููุนููุฉ</h3>
                        <button onclick="refreshRequests()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm">
                            ๐ ุชุญุฏูุซ
                        </button>
                    </div>

                    <!-- Loading State -->
                    <div id="requestsLoading" class="text-center py-8">
                        <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
                        <p class="mt-2 text-gray-600">ุฌุงุฑู ุชุญููู ุทูุจุงุช ุงูุงูุถูุงู...</p>
                    </div>

                    <!-- Requests List -->
                    <div id="requestsList" class="hidden space-y-4">
                        <!-- ุณูุชู ููุก ุงูุทูุจุงุช ูู Firebase -->
                    </div>

                    <!-- Empty State -->
                    <div id="requestsEmpty" class="hidden text-center py-12">
                        <div class="text-6xl mb-4">๐</div>
                        <p class="text-gray-600">ูุง ุชูุฌุฏ ุทูุจุงุช ุงูุถูุงู ูุนููุฉ</p>
                        <p class="text-sm text-gray-500">ุณุชุธูุฑ ุงูุทูุจุงุช ุงูุฌุฏูุฏุฉ ููุง</p>
                    </div>

                    <!-- Error State -->
                    <div id="requestsError" class="hidden text-center py-12">
                        <div class="text-6xl mb-4">โ๏ธ</div>
                        <p class="text-red-600">ุญุฏุซ ุฎุทุฃ ูู ุชุญููู ุทูุจุงุช ุงูุงูุถูุงู</p>
                        <button onclick="loadRequests()" class="mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                            ุฅุนุงุฏุฉ ุงููุญุงููุฉ
                        </button>
                    </div>
                </div>
            </div>

            <!-- Reports Tab -->
            <div id="content-reports" class="tab-content hidden">
                <!-- Report Header -->
                <div class="bg-white rounded-lg shadow p-6 mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-medium text-gray-900">ุงูุชูุงุฑูุฑ ูุงูุชุญูููุงุช</h3>
                        <div class="flex space-x-2 space-x-reverse">
                            <select id="reportPeriod" class="px-3 py-2 border border-gray-300 rounded-lg text-sm">
                                <option value="today">ุงูููู</option>
                                <option value="week">ูุฐุง ุงูุฃุณุจูุน</option>
                                <option value="month" selected>ูุฐุง ุงูุดูุฑ</option>
                                <option value="year">ูุฐุง ุงูุนุงู</option>
                            </select>
                            <button onclick="exportReport()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm">
                                ๐ ุชุตุฏูุฑ ุงูุชูุฑูุฑ
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Key Metrics Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                                <span class="text-blue-600 text-xl">๐ฅ</span>
                            </div>
                            <div class="mr-4">
                                <p class="text-sm font-medium text-gray-600">ุฃุทุจุงุก ุฌุฏุฏ</p>
                                <p class="text-2xl font-bold text-gray-900">47</p>
                                <p class="text-xs text-green-600">+12.5% ูู ุงูุดูุฑ ุงููุงุถู</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                <span class="text-green-600 text-xl">๐ฌ</span>
                            </div>
                            <div class="mr-4">
                                <p class="text-sm font-medium text-gray-600">ุงุณุชุดุงุฑุงุช ููุชููุฉ</p>
                                <p class="text-2xl font-bold text-gray-900">1,234</p>
                                <p class="text-xs text-green-600">+8.3% ูู ุงูุดูุฑ ุงููุงุถู</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                                <span class="text-purple-600 text-xl">โญ</span>
                            </div>
                            <div class="mr-4">
                                <p class="text-sm font-medium text-gray-600">ูุชูุณุท ุงูุชูููู</p>
                                <p class="text-2xl font-bold text-gray-900">4.7</p>
                                <p class="text-xs text-green-600">+0.2 ูู ุงูุดูุฑ ุงููุงุถู</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center">
                                <span class="text-orange-600 text-xl">๐ฐ</span>
                            </div>
                            <div class="mr-4">
                                <p class="text-sm font-medium text-gray-600">ุงูุฅูุฑุงุฏุงุช</p>
                                <p class="text-2xl font-bold text-gray-900">โน45,230</p>
                                <p class="text-xs text-green-600">+15.2% ูู ุงูุดูุฑ ุงููุงุถู</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                    <!-- Growth Chart -->
                    <div class="bg-white rounded-lg shadow p-6">
                        <h4 class="text-lg font-medium text-gray-900 mb-4">ููู ุงูููุตุฉ ุงูุดูุฑู</h4>
                        <div class="h-64 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg flex items-center justify-center relative">
                            <canvas id="growthChart" class="absolute inset-0 w-full h-full"></canvas>
                            <div class="text-center z-10">
                                <div class="text-4xl mb-2">๐</div>
                                <p class="text-gray-600 font-medium">ููู ูุณุชูุฑ</p>
                                <p class="text-sm text-gray-500">+12.5% ูุฐุง ุงูุดูุฑ</p>
                            </div>
                        </div>
                    </div>

                    <!-- Specialties Distribution -->
                    <div class="bg-white rounded-lg shadow p-6">
                        <h4 class="text-lg font-medium text-gray-900 mb-4">ุชูุฒูุน ุงูุชุฎุตุตุงุช</h4>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <div class="w-4 h-4 bg-blue-500 rounded-full ml-2"></div>
                                    <span class="text-sm text-gray-700">ุทุจ ุงูููุจ</span>
                                </div>
                                <span class="text-sm font-medium text-gray-900">23%</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <div class="w-4 h-4 bg-green-500 rounded-full ml-2"></div>
                                    <span class="text-sm text-gray-700">ุทุจ ุงูุฃุทูุงู</span>
                                </div>
                                <span class="text-sm font-medium text-gray-900">18%</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <div class="w-4 h-4 bg-purple-500 rounded-full ml-2"></div>
                                    <span class="text-sm text-gray-700">ุงูุทุจ ุงูููุณู</span>
                                </div>
                                <span class="text-sm font-medium text-gray-900">15%</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <div class="w-4 h-4 bg-orange-500 rounded-full ml-2"></div>
                                    <span class="text-sm text-gray-700">ุทุจ ุงูุฌูุฏูุฉ</span>
                                </div>
                                <span class="text-sm font-medium text-gray-900">12%</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <div class="w-4 h-4 bg-red-500 rounded-full ml-2"></div>
                                    <span class="text-sm text-gray-700">ุฃุฎุฑู</span>
                                </div>
                                <span class="text-sm font-medium text-gray-900">32%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Detailed Reports -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- Daily Report -->
                    <div class="bg-white rounded-lg shadow p-6">
                        <h4 class="text-lg font-medium text-gray-900 mb-4">๐ ุงูุชูุฑูุฑ ุงููููู</h4>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">ุชุณุฌููุงุช ุฏุฎูู</span>
                                <span class="text-sm font-medium text-gray-900">156</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">ุงุณุชุดุงุฑุงุช ุฌุฏูุฏุฉ</span>
                                <span class="text-sm font-medium text-gray-900">23</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">ุทูุจุงุช ุงูุถูุงู</span>
                                <span class="text-sm font-medium text-gray-900">3</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">ุฃุทุจุงุก ูุดุทูู</span>
                                <span class="text-sm font-medium text-gray-900">89</span>
                            </div>
                        </div>
                    </div>

                    <!-- Performance Report -->
                    <div class="bg-white rounded-lg shadow p-6">
                        <h4 class="text-lg font-medium text-gray-900 mb-4">๐ ุชูุฑูุฑ ุงูุฃุฏุงุก</h4>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">ููุช ุงูุงุณุชุฌุงุจุฉ</span>
                                <span class="text-sm font-medium text-green-600">2.3 ุฏูููุฉ</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">ูุนุฏู ุงูุฑุถุง</span>
                                <span class="text-sm font-medium text-green-600">4.7/5</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">ูุนุฏู ุงูุฅููุงู</span>
                                <span class="text-sm font-medium text-green-600">94%</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">ุงุณุชุฎุฏุงู ุงููุธุงู</span>
                                <span class="text-sm font-medium text-blue-600">87%</span>
                            </div>
                        </div>
                    </div>

                    <!-- Financial Report -->
                    <div class="bg-white rounded-lg shadow p-6">
                        <h4 class="text-lg font-medium text-gray-900 mb-4">๐ฐ ุงูุชูุฑูุฑ ุงููุงูู</h4>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">ุฅูุฑุงุฏุงุช ุงูููู</span>
                                <span class="text-sm font-medium text-gray-900">โน1,450</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">ุฅูุฑุงุฏุงุช ุงูุดูุฑ</span>
                                <span class="text-sm font-medium text-gray-900">โน45,230</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">ุนูููุฉ ุงูููุตุฉ</span>
                                <span class="text-sm font-medium text-gray-900">โน4,523</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">ุงูููู ุงูุดูุฑู</span>
                                <span class="text-sm font-medium text-green-600">+15.2%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Tab -->
            <div id="content-settings" class="tab-content hidden">
                <!-- Settings Header -->
                <div class="bg-white rounded-lg shadow p-6 mb-6">
                    <div class="flex justify-between items-center">
                        <h3 class="text-lg font-medium text-gray-900">ุฅุนุฏุงุฏุงุช ุงููุธุงู</h3>
                        <button onclick="saveAllSettings()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                            ๐พ ุญูุธ ุฌููุน ุงูุฅุนุฏุงุฏุงุช
                        </button>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- General Settings -->
                    <div class="bg-white rounded-lg shadow p-6">
                        <h4 class="text-lg font-medium text-gray-900 mb-4">โ๏ธ ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ</h4>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <label class="text-sm font-medium text-gray-700">ุชูุนูู ุงูุชุณุฌูู ุงูุฌุฏูุฏ</label>
                                    <p class="text-xs text-gray-500">ุงูุณูุงุญ ููุฃุทุจุงุก ุงูุฌุฏุฏ ุจุงูุชุณุฌูู</p>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="newRegistration" class="sr-only peer" checked>
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                </label>
                            </div>

                            <div class="flex items-center justify-between">
                                <div>
                                    <label class="text-sm font-medium text-gray-700">ูุฑุงุฌุนุฉ ุทูุจุงุช ุงูุงูุถูุงู</label>
                                    <p class="text-xs text-gray-500">ูุฑุงุฌุนุฉ ุชููุงุฆูุฉ ุฃู ูุฏููุฉ</p>
                                </div>
                                <select id="reviewMode" class="px-3 py-2 border border-gray-300 rounded-lg text-sm">
                                    <option value="auto">ุชููุงุฆู</option>
                                    <option value="manual" selected>ูุฏูู</option>
                                </select>
                            </div>

                            <div class="flex items-center justify-between">
                                <div>
                                    <label class="text-sm font-medium text-gray-700">ุฅุดุนุงุฑุงุช ุงููุฏูุฑ</label>
                                    <p class="text-xs text-gray-500">ุชููู ุฅุดุนุงุฑุงุช ุงูุฃูุดุทุฉ ุงููููุฉ</p>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="adminNotifications" class="sr-only peer" checked>
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                </label>
                            </div>

                            <div class="flex items-center justify-between">
                                <div>
                                    <label class="text-sm font-medium text-gray-700">ูุถุน ุงูุตูุงูุฉ</label>
                                    <p class="text-xs text-gray-500">ุฅููุงู ุงูููุตุฉ ูุคูุชุงู ููุตูุงูุฉ</p>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="maintenanceMode" class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-red-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"></div>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Security Settings -->
                    <div class="bg-white rounded-lg shadow p-6">
                        <h4 class="text-lg font-medium text-gray-900 mb-4">๐ ุฅุนุฏุงุฏุงุช ุงูุฃูุงู</h4>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <label class="text-sm font-medium text-gray-700">ุชุณุฌูู ุงูุนูููุงุช</label>
                                    <p class="text-xs text-gray-500">ุชุณุฌูู ุฌููุน ุงูุนูููุงุช ุงูุฅุฏุงุฑูุฉ</p>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="auditLogging" class="sr-only peer" checked>
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                </label>
                            </div>

                            <div class="flex items-center justify-between">
                                <div>
                                    <label class="text-sm font-medium text-gray-700">ุงูุชุญูู ุงูุซูุงุฆู</label>
                                    <p class="text-xs text-gray-500">ุชูุนูู ุงูุชุญูู ุงูุซูุงุฆู ูููุฏุฑุงุก</p>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="twoFactorAuth" class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                </label>
                            </div>

                            <div class="flex items-center justify-between">
                                <div>
                                    <label class="text-sm font-medium text-gray-700">ุงูุชูุงุก ุตูุงุญูุฉ ุงูุฌูุณุฉ</label>
                                    <p class="text-xs text-gray-500">ูุฏุฉ ุงูุชูุงุก ุฌูุณุฉ ุงููุฏูุฑ (ุจุงูุฏูุงุฆู)</p>
                                </div>
                                <select id="sessionTimeout" class="px-3 py-2 border border-gray-300 rounded-lg text-sm">
                                    <option value="30">30 ุฏูููุฉ</option>
                                    <option value="60" selected>60 ุฏูููุฉ</option>
                                    <option value="120">120 ุฏูููุฉ</option>
                                    <option value="240">240 ุฏูููุฉ</option>
                                </select>
                            </div>

                            <div class="flex items-center justify-between">
                                <div>
                                    <label class="text-sm font-medium text-gray-700">ุชุดููุฑ ุงูุจูุงูุงุช</label>
                                    <p class="text-xs text-gray-500">ุชุดููุฑ ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ</p>
                                </div>
                                <span class="px-3 py-1 bg-green-100 text-green-800 text-xs rounded-full">ููุนู</span>
                            </div>
                        </div>
                    </div>

                    <!-- Platform Settings -->
                    <div class="bg-white rounded-lg shadow p-6">
                        <h4 class="text-lg font-medium text-gray-900 mb-4">๐ฅ ุฅุนุฏุงุฏุงุช ุงูููุตุฉ</h4>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">ุงุณู ุงูููุตุฉ</label>
                                <input type="text" id="platformName" value="ุทุฑููุชู ุงูุนูุงุฌู" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">ูุตู ุงูููุตุฉ</label>
                                <textarea id="platformDescription" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">ููุตุฉ ุทุจูุฉ ูุชูุฏูุฉ ุชุฑุจุท ุงููุฑุถู ุจุงูุฃุทุจุงุก ุงููุฎุชุตูู ูุชูุฏูู ุงุณุชุดุงุฑุงุช ุทุจูุฉ ุนุงููุฉ ุงูุฌูุฏุฉ</textarea>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููุฏุนู</label>
                                <input type="email" id="supportEmail" value="support@tariqi-alilaji.com" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">ุฑูู ุงูุฏุนู ุงูููู</label>
                                <input type="tel" id="supportPhone" value="+966 11 123 4567" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                        </div>
                    </div>

                    <!-- Notification Settings -->
                    <div class="bg-white rounded-lg shadow p-6">
                        <h4 class="text-lg font-medium text-gray-900 mb-4">๐ ุฅุนุฏุงุฏุงุช ุงูุฅุดุนุงุฑุงุช</h4>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <label class="text-sm font-medium text-gray-700">ุฅุดุนุงุฑุงุช ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                                    <p class="text-xs text-gray-500">ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุนุจุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</p>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="emailNotifications" class="sr-only peer" checked>
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                </label>
                            </div>

                            <div class="flex items-center justify-between">
                                <div>
                                    <label class="text-sm font-medium text-gray-700">ุฅุดุนุงุฑุงุช ุงูุฑุณุงุฆู ุงููุตูุฉ</label>
                                    <p class="text-xs text-gray-500">ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุนุจุฑ ุงูุฑุณุงุฆู ุงููุตูุฉ</p>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="smsNotifications" class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                </label>
                            </div>

                            <div class="flex items-center justify-between">
                                <div>
                                    <label class="text-sm font-medium text-gray-700">ุฅุดุนุงุฑุงุช ุงูุฏูุน</label>
                                    <p class="text-xs text-gray-500">ุฅุดุนุงุฑุงุช ุงูุนูููุงุช ุงููุงููุฉ</p>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="pushNotifications" class="sr-only peer" checked>
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Danger Zone -->
                <div class="mt-6 bg-white rounded-lg shadow p-6">
                    <div class="admin-warning p-4 rounded-lg">
                        <h4 class="font-medium text-admin-700 mb-2">โ๏ธ ููุทูุฉ ุฎุทุฑ</h4>
                        <p class="text-sm text-admin-600 mb-4">ุงูุนูููุงุช ุงูุชุงููุฉ ุชุคุซุฑ ุนูู ุงููุธุงู ุจุงููุงูู ููุง ูููู ุงูุชุฑุงุฌุน ุนููุง</p>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <button onclick="backupSystem()" class="bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 transition-colors">
                                <div class="text-center">
                                    <div class="text-xl mb-1">๐พ</div>
                                    <div class="text-sm font-medium">ูุณุฎ ุงุญุชูุงุทู</div>
                                    <div class="text-xs opacity-80">ุฅูุดุงุก ูุณุฎุฉ ุงุญุชูุงุทูุฉ</div>
                                </div>
                            </button>
                            <button onclick="restoreSystem()" class="bg-orange-600 text-white px-4 py-3 rounded-lg hover:bg-orange-700 transition-colors">
                                <div class="text-center">
                                    <div class="text-xl mb-1">๐</div>
                                    <div class="text-sm font-medium">ุงุณุชุนุงุฏุฉ ุงููุธุงู</div>
                                    <div class="text-xs opacity-80">ุงุณุชุนุงุฏุฉ ูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ</div>
                                </div>
                            </button>
                            <button onclick="resetSystem()" class="bg-red-600 text-white px-4 py-3 rounded-lg hover:bg-red-700 transition-colors">
                                <div class="text-center">
                                    <div class="text-xl mb-1">๐๏ธ</div>
                                    <div class="text-sm font-medium">ุฅุนุงุฏุฉ ุชุนููู</div>
                                    <div class="text-xs opacity-80">ุญุฐู ุฌููุน ุงูุจูุงูุงุช</div>
                                </div>
                            </button>
                        </div>
                    </div>
                </div>
            </div>


        </div>
    </div>

    <script>
        // Enhanced admin authentication with fallback
        function checkAdminAuth() {
            // Check both localStorage and sessionStorage for compatibility
            const currentUser = localStorage.getItem('currentUser') || sessionStorage.getItem('currentUser');
            const userType = localStorage.getItem('userType') || sessionStorage.getItem('userType');
            const urlParams = new URLSearchParams(window.location.search);
            const adminToken = urlParams.get('admin');

            console.log('๐ ูุญุต ุญุงูุฉ ุงููุฏูุฑ:', {
                currentUser: !!currentUser,
                userType,
                adminToken,
                url: window.location.href
            });

            // ุฅุฐุง ูุงู ููุงู token ูู ุงูุฑุงุจุทุ ูู ุจุชุณุฌูู ุฏุฎูู ุชููุงุฆู
            if (adminToken === 'ADMIN001' || adminToken === 'true') {
                console.log('๐ ุชุณุฌูู ุฏุฎูู ุชููุงุฆู ูููุฏูุฑ ูู ุงูุฑุงุจุท');
                const adminUser = {
                    name: 'ูุฏูุฑ ุงูููุตุฉ',
                    license: 'ADMIN001',
                    email: 'admin@tariqi-alilaji.com',
                    phone: '+966 11 123 4567',
                    userType: 'admin',
                    specialty: 'ุฅุฏุงุฑุฉ ุงููุธุงู'
                };

                // ุญูุธ ูู ููุง ุงูููุงููู ููุชูุงูู
                localStorage.setItem('currentUser', JSON.stringify(adminUser));
                localStorage.setItem('userType', 'admin');
                sessionStorage.setItem('currentUser', JSON.stringify(adminUser));
                sessionStorage.setItem('userType', 'admin');

                // ุฅุฒุงูุฉ ุงููุนุงูู ูู ุงูุฑุงุจุท
                const newUrl = window.location.pathname;
                window.history.replaceState({}, document.title, newUrl);

                // ุชุญุฏูุซ ุงูุจูุงูุงุช ูู ุงูุตูุญุฉ
                updateAdminInfo(adminUser);

                return true;
            }

            // ุงูุชุญูู ุงูุนุงุฏู
            if (!currentUser || userType !== 'admin') {
                console.log('โ ุงููุณุชุฎุฏู ุบูุฑ ูุณุฌู ุฃู ููุณ ูุฏูุฑ');

                // ุนุฑุถ ูููุฐุฌ ุชุณุฌูู ุฏุฎูู ุจุฏูุงู ูู ุงูุชูุฌูู ุงููุจุงุดุฑ
                showAdminLoginModal();
                return false;
            }

            try {
                const user = JSON.parse(currentUser);
                console.log('โ ูุฏูุฑ ูุณุฌู:', user.name);

                // Set admin session
                sessionStorage.setItem('userType', 'admin');

                // ุชุญุฏูุซ ุงูุจูุงูุงุช ูู ุงูุตูุญุฉ
                updateAdminInfo(user);

                return true;
            } catch (error) {
                console.error('โ ุฎุทุฃ ูู ูุฑุงุกุฉ ุจูุงูุงุช ุงููุฏูุฑ:', error);
                localStorage.removeItem('currentUser');
                localStorage.removeItem('userType');
                showAdminLoginModal();
                return false;
            }
        }

        // ุชุญุฏูุซ ูุนูููุงุช ุงููุฏูุฑ ูู ุงูุตูุญุฉ
        function updateAdminInfo(adminUser) {
            console.log('๐ ุชุญุฏูุซ ูุนูููุงุช ุงููุฏูุฑ:', adminUser);

            // ุชุญุฏูุซ ุงุณู ุงููุฏูุฑ
            const adminNameElements = document.querySelectorAll('[data-admin-name]');
            adminNameElements.forEach(element => {
                element.textContent = adminUser.name || 'ูุฏูุฑ ุงูููุตุฉ';
            });

            // ุชุญุฏูุซ ุงูุตูุงุญูุฉ
            const adminRoleElements = document.querySelectorAll('[data-admin-role]');
            adminRoleElements.forEach(element => {
                element.textContent = adminUser.specialty || 'ูุฏูุฑ ุนุงู';
            });

            // ุชุญุฏูุซ ุนููุงู ุงูุตูุญุฉ
            document.title = `ููุญุฉ ุชุญูู ุงููุฏูุฑ - ${adminUser.name || 'ูุฏูุฑ ุงูููุตุฉ'}`;

            console.log('โ ุชู ุชุญุฏูุซ ูุนูููุงุช ุงููุฏูุฑ ูู ุงูุตูุญุฉ');
        }

        // ุนุฑุถ ูููุฐุฌ ุชุณุฌูู ุฏุฎูู ุงููุฏูุฑ
        function showAdminLoginModal() {
            const modalHtml = `
                <div id="adminLoginModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                    <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
                        <div class="text-center mb-6">
                            <div class="w-16 h-16 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-4">
                                <span class="text-white text-2xl">โ๏ธ</span>
                            </div>
                            <h2 class="text-2xl font-bold text-gray-900">ุชุณุฌูู ุฏุฎูู ุงููุฏูุฑ</h2>
                            <p class="text-gray-600 mt-2">ูุฑุฌู ุชุณุฌูู ุงูุฏุฎูู ูููุตูู ููุญุฉ ุชุญูู ุงููุฏูุฑ</p>
                        </div>

                        <form id="adminLoginForm" class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">ุงุณู ุงููุณุชุฎุฏู:</label>
                                <input type="text" id="adminUsername" value="ADMIN001" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent" readonly>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">ูููุฉ ุงููุฑูุฑ:</label>
                                <input type="password" id="adminPassword" placeholder="admin123" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent" required>
                            </div>
                            <button type="submit" class="w-full bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors">
                                ๐ ุฏุฎูู ููุญุฉ ุงูุชุญูู
                            </button>
                        </form>

                        <div class="mt-6 text-center">
                            <button onclick="goToHomePage()" class="text-gray-600 hover:text-gray-800 text-sm">
                                ๐ ุงูุนูุฏุฉ ููุตูุญุฉ ุงูุฑุฆูุณูุฉ
                            </button>
                        </div>

                        <div class="mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
                            <p class="text-yellow-800 text-xs">
                                ๐ก ููุงุฎุชุจุงุฑ: ูููุฉ ุงููุฑูุฑ ูู <strong>admin123</strong>
                            </p>
                        </div>
                    </div>
                </div>
            `;

            document.body.insertAdjacentHTML('beforeend', modalHtml);

            // ูุนุงูุฌ ุชุณุฌูู ุงูุฏุฎูู
            document.getElementById('adminLoginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const username = document.getElementById('adminUsername').value;
                const password = document.getElementById('adminPassword').value;

                if (username === 'ADMIN001' && password === 'admin123') {
                    const adminUser = {
                        name: 'ูุฏูุฑ ุงูููุตุฉ',
                        license: 'ADMIN001',
                        email: 'admin@tariqi-alilaji.com',
                        phone: '+966 11 123 4567',
                        userType: 'admin',
                        specialty: 'ุฅุฏุงุฑุฉ ุงููุธุงู'
                    };

                    localStorage.setItem('currentUser', JSON.stringify(adminUser));
                    localStorage.setItem('userType', 'admin');
                    sessionStorage.setItem('userType', 'admin');

                    // ุฅุฒุงูุฉ ุงููููุฐุฌ
                    document.getElementById('adminLoginModal').remove();

                    // ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ
                    window.location.reload();
                } else {
                    alert('โ ูููุฉ ุงููุฑูุฑ ุบูุฑ ุตุญูุญุฉ');
                }
            });

            // ุงูุชุฑููุฒ ุนูู ุญูู ูููุฉ ุงููุฑูุฑ
            setTimeout(() => {
                document.getElementById('adminPassword').focus();
            }, 100);
        }

        // ุงูุนูุฏุฉ ููุตูุญุฉ ุงูุฑุฆูุณูุฉ
        function goToHomePage() {
            window.location.href = 'index.html';
        }

        // Enhanced initialization with Firebase
        document.addEventListener('DOMContentLoaded', function() {
            console.log('๐ ุชุญููู ููุญุฉ ุชุญูู ุงููุฏูุฑ ุงููุญุณูุฉ...');

            // Wait for Firebase to load
            setTimeout(() => {
                if (!checkAdminAuth()) {
                    console.log('๐ ุนุฑุถ ูููุฐุฌ ุชุณุฌูู ุฏุฎูู ุงููุฏูุฑ');
                } else {
                    console.log('โ ุงููุฏูุฑ ูุณุฌู ุฏุฎูู - ุชุญููู ููุญุฉ ุงูุชุญูู');

                    // Initialize features
                    initializeAdminDashboard();
                }
            }, 1000);
        });

        // Initialize admin dashboard features
        async function initializeAdminDashboard() {
            try {
                console.log('๐ง ุชููุฆุฉ ููุฒุงุช ููุญุฉ ุงูุชุญูู...');

                // Setup real-time updates
                setupRealTimeUpdates();

                // Load initial data for overview
                await loadReportsDataFast();

                // Setup auto-refresh every 5 minutes
                setInterval(() => {
                    console.log('๐ ุชุญุฏูุซ ุชููุงุฆู ููุจูุงูุงุช');
                    window.cachedData = null; // Clear cache

                    // Refresh current tab data
                    const activeTab = document.querySelector('[id^="tab-"].bg-admin-100');
                    if (activeTab) {
                        const tabName = activeTab.id.replace('tab-', '');
                        if (tabName === 'overview' || tabName === 'reports') {
                            loadReportsDataFast();
                        } else if (tabName === 'doctors') {
                            loadDoctors();
                        } else if (tabName === 'requests') {
                            loadRequests();
                        }
                    }
                }, 5 * 60 * 1000); // 5 minutes

                console.log('โ ุชู ุชููุฆุฉ ููุญุฉ ุงูุชุญูู ุจูุฌุงุญ');

            } catch (error) {
                console.error('โ ุฎุทุฃ ูู ุชููุฆุฉ ููุญุฉ ุงูุชุญูู:', error);
            }
        }

        // Cleanup on page unload
        window.addEventListener('beforeunload', function() {
            cleanupRealTimeUpdates();
        });



        // Enhanced Firebase Doctors Management Functions
        async function loadDoctors() {
            try {
                window.performanceMonitor.start('ุชุญููู ุจูุงูุงุช ุงูุฃุทุจุงุก');

                // Show loading state with better animation
                showLoadingState('doctors');

                let doctors = [];

                try {
                    // Try to load from Firebase first
                    doctors = await window.dbHelpers.getData('doctors');
                    console.log('โ ุชู ุชุญููู ุงูุจูุงูุงุช ูู Firebase:', doctors.length);
                } catch (firebaseError) {
                    console.warn('โ๏ธ ูุดู ุชุญููู ูู Firebaseุ ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ:', firebaseError);

                    // Fallback to demo data
                    doctors = getDemoDoctors();
                    showInfoMessage('ุชู ุชุญููู ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ - Firebase ุบูุฑ ูุชุงุญ');
                }

                // Sort by creation date (newest first)
                doctors.sort((a, b) => {
                    const aTime = a.createdAt?.seconds || a.createdAt || Date.now();
                    const bTime = b.createdAt?.seconds || b.createdAt || Date.now();
                    return bTime - aTime;
                });

                window.performanceMonitor.end('ุชุญููู ุจูุงูุงุช ุงูุฃุทุจุงุก');
                console.log(`โ ุชู ุชุญููู ${doctors.length} ุทุจูุจ`);

                // Hide loading and show results
                hideLoadingState('doctors');

                if (doctors.length === 0) {
                    showEmptyState('doctors');
                } else {
                    showDataState('doctors');
                    renderDoctorsTable(doctors);
                }

            } catch (error) {
                console.error('โ ุฎุทุฃ ูู ุชุญููู ุงูุฃุทุจุงุก:', error);
                hideLoadingState('doctors');

                // Try demo data as last resort
                try {
                    const demoDoctors = getDemoDoctors();
                    showDataState('doctors');
                    renderDoctorsTable(demoDoctors);
                    showWarningMessage('ุชู ุชุญููู ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ ุจุฏูุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช');
                } catch (demoError) {
                    showErrorState('doctors');
                    showWarningMessage('ูุดู ูู ุชุญููู ุจูุงูุงุช ุงูุฃุทุจุงุก');
                }
            }
        }

        // Demo doctors data for fallback
        function getDemoDoctors() {
            return [
                {
                    id: 'demo1',
                    name: 'ุฏ. ุฃุญูุฏ ูุญูุฏ ุงูุณุนูุฏ',
                    email: 'ahmed.doctor@example.com',
                    phone: '+966 50 123 4567',
                    license: 'DOC001',
                    specialty: 'ุทุจ ุงูููุจ',
                    hospital: 'ูุณุชุดูู ุงูููู ููุตู ุงูุชุฎุตุตู',
                    experience: '10 ุณููุงุช',
                    status: 'active',
                    createdAt: Date.now() - 86400000, // Yesterday
                    bio: 'ุทุจูุจ ูุชุฎุตุต ูู ุทุจ ุงูููุจ ูุน ุฎุจุฑุฉ ูุงุณุนุฉ'
                },
                {
                    id: 'demo2',
                    name: 'ุฏ. ูุงุทูุฉ ุนูู ุฃุญูุฏ',
                    email: 'fatima.doctor@example.com',
                    phone: '+966 50 234 5678',
                    license: 'DOC002',
                    specialty: 'ุทุจ ุงูุฃุทูุงู',
                    hospital: 'ูุณุชุดูู ุงูููู ุนุจุฏุงูุนุฒูุฒ',
                    experience: '8 ุณููุงุช',
                    status: 'active',
                    createdAt: Date.now() - 172800000, // 2 days ago
                    bio: 'ุทุจูุจุฉ ูุชุฎุตุตุฉ ูู ุทุจ ุงูุฃุทูุงู'
                },
                {
                    id: 'demo3',
                    name: 'ุฏ. ูุญูุฏ ุณุงูู ุงูุบุงูุฏู',
                    email: 'mohammed.doctor@example.com',
                    phone: '+966 50 345 6789',
                    license: 'DOC003',
                    specialty: 'ุทุจ ุงูุฌูุฏูุฉ',
                    hospital: 'ูุณุชุดูู ุงูููู ุฎุงูุฏ',
                    experience: '6 ุณููุงุช',
                    status: 'inactive',
                    createdAt: Date.now() - 259200000, // 3 days ago
                    bio: 'ุทุจูุจ ูุชุฎุตุต ูู ุทุจ ุงูุฌูุฏูุฉ ูุงูุชุฌููู'
                },
                {
                    id: 'demo4',
                    name: 'ุฏ. ููุฑุง ุฃุญูุฏ ุงูุฒูุฑุงูู',
                    email: 'nora.doctor@example.com',
                    phone: '+966 50 456 7890',
                    license: 'DOC004',
                    specialty: 'ุทุจ ุงูุฃุนุตุงุจ',
                    hospital: 'ูุณุชุดูู ุงูููู ููุฏ',
                    experience: '12 ุณููุงุช',
                    status: 'active',
                    createdAt: Date.now() - 345600000, // 4 days ago
                    bio: 'ุทุจูุจุฉ ูุชุฎุตุตุฉ ูู ุทุจ ุงูุฃุนุตุงุจ ูุงูุฏูุงุบ'
                },
                {
                    id: 'demo5',
                    name: 'ุฏ. ุฎุงูุฏ ููุณู ุงูุนุชูุจู',
                    email: 'khalid.doctor@example.com',
                    phone: '+966 50 567 8901',
                    license: 'DOC005',
                    specialty: 'ุฌุฑุงุญุฉ ุงูุนุธุงู',
                    hospital: 'ูุณุชุดูู ุงูููู ุณููุงู',
                    experience: '15 ุณููุงุช',
                    status: 'active',
                    createdAt: Date.now() - 432000000, // 5 days ago
                    bio: 'ุทุจูุจ ูุชุฎุตุต ูู ุฌุฑุงุญุฉ ุงูุนุธุงู ูุงูููุงุตู'
                }
            ];
        }

        // Demo requests data for fallback
        function getDemoRequests() {
            return [
                {
                    id: 'req1',
                    name: 'ุฏ. ููุงุฒ ุฌูุงู ุงูุฏูุฏุจ',
                    email: 'fawaz.doctor@tariqi-alilaji.com',
                    phone: '+966 50 123 4567',
                    license: 'DOC001',
                    specialty: '๐ฉบ ุงุณุชุดุงุฑู ุจุงุทููุฉ',
                    hospital: 'ูุณุชุดูู ุงูููู ููุฏ',
                    experience: '15 ุณูุฉ',
                    bio: 'ุงุณุชุดุงุฑู ุฃูุฑุงุถ ุงูุจุงุทูุฉ ูุงูุทุจ ุงูุฏุงุฎููุ ูุคุณุณ ููุตุฉ ุทุฑููุชู ุงูุนูุงุฌู',
                    status: 'pending',
                    createdAt: Date.now() - 3600000, // 1 hour ago
                    updatedAt: Date.now() - 3600000
                },
                {
                    id: 'req2',
                    name: 'ูุญูุฏ ููุงุน ุงูุฑูููู',
                    email: 'mohammed.pharmacist@tariqi-alilaji.com',
                    phone: '+966 50 234 5678',
                    license: 'PHARM001',
                    specialty: '๐ ุตูุฏูู ุฃูู ุณููู',
                    hospital: 'ูุณุชุดูู ุงูููู ุนุจุฏุงูุนุฒูุฒ',
                    experience: '12 ุณูุฉ',
                    bio: 'ุตูุฏูู ูุชุฎุตุต ูู ุนูู ุงูุณููู ูุงูุชูุงุนูุงุช ุงูุฏูุงุฆูุฉุ ูุทูุฑ ุฃูุธูุฉ ุงูููุตุฉ',
                    status: 'pending',
                    createdAt: Date.now() - 7200000, // 2 hours ago
                    updatedAt: Date.now() - 7200000
                },
                {
                    id: 'req3',
                    name: 'ููุณู ูุณูุฑ ุงูุนูุฒู',
                    email: 'yousef.developer@tariqi-alilaji.com',
                    phone: '+966 50 345 6789',
                    license: 'DEV001',
                    specialty: '๐ป ุจุฑูุฌุฉ ูุชุทููุฑ',
                    hospital: 'ูุฑูุฒ ุงูุชุทููุฑ ุงูุชููู',
                    experience: '10 ุณููุงุช',
                    bio: 'ูุทูุฑ ููุจุฑูุฌ ุฃูุธูุฉ ุทุจูุฉุ ูุชุฎุตุต ูู ุชุทููุฑ ููุตุงุช ุงูุงุณุชุดุงุฑุงุช ุงูุทุจูุฉ',
                    status: 'pending',
                    createdAt: Date.now() - 10800000, // 3 hours ago
                    updatedAt: Date.now() - 10800000
                },
                {
                    id: 'req4',
                    name: 'ุฏ. ุณุนุฏ ุงูุนุชูุจู',
                    email: 'saad.doctor@example.com',
                    phone: '+966 50 456 7890',
                    license: 'DOC006',
                    specialty: 'ุทุจ ุงูุจุงุทูุฉ',
                    hospital: 'ูุณุชุดูู ุงูููู ููุตู',
                    experience: '7 ุณููุงุช',
                    bio: 'ุทุจูุจ ูุชุฎุตุต ูู ุงูุทุจ ุงูุจุงุทูู ูุน ุฎุจุฑุฉ ูู ุนูุงุฌ ุงูุฃูุฑุงุถ ุงููุฒููุฉ',
                    status: 'pending',
                    createdAt: Date.now() - 14400000, // 4 hours ago
                    updatedAt: Date.now() - 14400000
                },
                {
                    id: 'req5',
                    name: 'ุฏ. ููุฏ ุงูุดูุฑู',
                    email: 'hind.doctor@example.com',
                    phone: '+966 50 567 8901',
                    license: 'DOC007',
                    specialty: 'ุทุจ ุงููุณุงุก ูุงูููุงุฏุฉ',
                    hospital: 'ูุณุชุดูู ุงูููู ุนุจุฏุงูุนุฒูุฒ',
                    experience: '9 ุณููุงุช',
                    bio: 'ุทุจูุจุฉ ูุชุฎุตุตุฉ ูู ุทุจ ุงููุณุงุก ูุงูููุงุฏุฉ ูุน ุฎุจุฑุฉ ูู ุงูุฌุฑุงุญุฉ ุงููุณุงุฆูุฉ',
                    status: 'approved',
                    createdAt: Date.now() - 86400000, // 1 day ago
                    updatedAt: Date.now() - 3600000
                }
            ];
        }

        // UI State Management Functions
        function showLoadingState(section) {
            document.getElementById(`${section}Loading`).classList.remove('hidden');
            document.getElementById(`${section}Table`).classList.add('hidden');
            document.getElementById(`${section}List`).classList.add('hidden');
            document.getElementById(`${section}Empty`).classList.add('hidden');
            document.getElementById(`${section}Error`).classList.add('hidden');
        }

        function hideLoadingState(section) {
            document.getElementById(`${section}Loading`).classList.add('hidden');
        }

        function showDataState(section) {
            if (section === 'doctors') {
                document.getElementById('doctorsTable').classList.remove('hidden');
            } else if (section === 'requests') {
                document.getElementById('requestsList').classList.remove('hidden');
            }
        }

        function showEmptyState(section) {
            document.getElementById(`${section}Empty`).classList.remove('hidden');
        }

        function showErrorState(section) {
            document.getElementById(`${section}Error`).classList.remove('hidden');
        }

        function renderDoctorsTable(doctors) {
            const tbody = document.getElementById('doctorsTableBody');
            tbody.innerHTML = '';

            doctors.forEach(doctor => {
                const createdDate = doctor.createdAt ?
                    new Date(doctor.createdAt.seconds * 1000).toLocaleDateString('ar-SA') :
                    'ุบูุฑ ูุญุฏุฏ';

                const statusClass = doctor.status === 'active' ?
                    'bg-green-100 text-green-800' :
                    'bg-red-100 text-red-800';

                const statusText = doctor.status === 'active' ? 'ูุดุท' : 'ูุนุทู';

                const row = `
                    <tr>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div>
                                <div class="text-sm font-medium text-gray-900">${doctor.name || 'ุบูุฑ ูุญุฏุฏ'}</div>
                                <div class="text-sm text-gray-500">${doctor.license || 'ุบูุฑ ูุญุฏุฏ'}</div>
                                <div class="text-sm text-gray-500">${doctor.email || 'ุบูุฑ ูุญุฏุฏ'}</div>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${doctor.specialty || 'ุบูุฑ ูุญุฏุฏ'}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${doctor.hospital || 'ุบูุฑ ูุญุฏุฏ'}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${createdDate}</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full ${statusClass}">
                                ${statusText}
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2 space-x-reverse">
                            <button onclick="viewDoctor('${doctor.id}')" class="text-blue-600 hover:text-blue-900">
                                ๐๏ธ ุนุฑุถ
                            </button>
                            <button onclick="toggleDoctorStatus('${doctor.id}', '${doctor.status}')" class="text-orange-600 hover:text-orange-900">
                                ${doctor.status === 'active' ? 'โธ๏ธ ุฅููุงู' : 'โถ๏ธ ุชูุนูู'}
                            </button>
                            <button onclick="deleteDoctor('${doctor.id}')" class="text-red-600 hover:text-red-900">
                                ๐๏ธ ุญุฐู
                            </button>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        async function viewDoctor(doctorId) {
            try {
                console.log('๐๏ธ ุนุฑุถ ุชูุงุตูู ุงูุทุจูุจ:', doctorId);
                let doctor = null;

                // Check if Firebase is available
                if (window.dbHelpers.isFirebaseAvailable()) {
                    try {
                        const { doc, getDoc } = window.firebaseModules;
                        const docRef = doc(window.db, 'doctors', doctorId);
                        const docSnap = await getDoc(docRef);

                        if (docSnap.exists()) {
                            doctor = { id: doctorId, ...docSnap.data() };
                            console.log('โ ุชู ุชุญููู ุจูุงูุงุช ุงูุทุจูุจ ูู Firebase');
                        }
                    } catch (firebaseError) {
                        console.warn('โ๏ธ ูุดู ุชุญููู ูู Firebaseุ ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ');
                    }
                }

                // Fallback to demo data if Firebase fails or not available
                if (!doctor) {
                    const demoDoctors = getDemoDoctors();
                    doctor = demoDoctors.find(d => d.id === doctorId);

                    if (doctor) {
                        console.log('โ ุชู ุชุญููู ุจูุงูุงุช ุงูุทุจูุจ ูู ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ');
                    }
                }

                if (doctor) {
                    showDoctorDetailsModal(doctor);
                } else {
                    showWarningMessage('ูู ูุชู ุงูุนุซูุฑ ุนูู ุจูุงูุงุช ุงูุทุจูุจ');
                }

            } catch (error) {
                console.error('โ ุฎุทุฃ ูู ุนุฑุถ ุชูุงุตูู ุงูุทุจูุจ:', error);
                showWarningMessage('ูุดู ูู ุชุญููู ุชูุงุตูู ุงูุทุจูุจ: ' + error.message);
            }
        }

        // Show doctor details in a modal
        function showDoctorDetailsModal(doctor) {
            const createdDate = doctor.createdAt ?
                (doctor.createdAt.seconds ?
                    new Date(doctor.createdAt.seconds * 1000).toLocaleDateString('ar-SA') :
                    new Date(doctor.createdAt).toLocaleDateString('ar-SA')
                ) : 'ุบูุฑ ูุญุฏุฏ';

            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-8 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-900">๐จโโ๏ธ ุชูุงุตูู ุงูุทุจูุจ</h2>
                        <button onclick="closeAdminModal()" class="text-gray-500 hover:text-gray-700">
                            <span class="text-2xl">ร</span>
                        </button>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700">ุงูุงุณู ุงููุงูู</label>
                                <p class="mt-1 text-sm text-gray-900 bg-gray-50 p-2 rounded">${doctor.name || 'ุบูุฑ ูุญุฏุฏ'}</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">ุงูุชุฎุตุต</label>
                                <p class="mt-1 text-sm text-gray-900 bg-gray-50 p-2 rounded">${doctor.specialty || 'ุบูุฑ ูุญุฏุฏ'}</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">ุฑูู ุงูุชุฑุฎูุต</label>
                                <p class="mt-1 text-sm text-gray-900 bg-gray-50 p-2 rounded">${doctor.license || 'ุบูุฑ ูุญุฏุฏ'}</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">ุงูุญุงูุฉ</label>
                                <p class="mt-1 text-sm ${doctor.status === 'active' ? 'text-green-600' : 'text-red-600'} bg-gray-50 p-2 rounded">
                                    ${doctor.status === 'active' ? 'โ ูุดุท' : 'โ ูุนุทู'}
                                </p>
                            </div>
                        </div>

                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                                <p class="mt-1 text-sm text-gray-900 bg-gray-50 p-2 rounded">${doctor.email || 'ุบูุฑ ูุญุฏุฏ'}</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">ุฑูู ุงููุงุชู</label>
                                <p class="mt-1 text-sm text-gray-900 bg-gray-50 p-2 rounded">${doctor.phone || 'ุบูุฑ ูุญุฏุฏ'}</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">ุงููุณุชุดูู</label>
                                <p class="mt-1 text-sm text-gray-900 bg-gray-50 p-2 rounded">${doctor.hospital || 'ุบูุฑ ูุญุฏุฏ'}</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">ุณููุงุช ุงูุฎุจุฑุฉ</label>
                                <p class="mt-1 text-sm text-gray-900 bg-gray-50 p-2 rounded">${doctor.experience || 'ุบูุฑ ูุญุฏุฏ'}</p>
                            </div>
                        </div>
                    </div>

                    ${doctor.bio ? `
                        <div class="mt-6">
                            <label class="block text-sm font-medium text-gray-700">ูุจุฐุฉ ูุฎุชุตุฑุฉ</label>
                            <p class="mt-1 text-sm text-gray-900 bg-gray-50 p-3 rounded">${doctor.bio}</p>
                        </div>
                    ` : ''}

                    <div class="mt-6 pt-4 border-t border-gray-200">
                        <div class="flex justify-between items-center text-sm text-gray-500">
                            <span>ุชุงุฑูุฎ ุงูุชุณุฌูู: ${createdDate}</span>
                            <span>ID: ${doctor.id}</span>
                        </div>
                    </div>

                    <div class="flex space-x-4 space-x-reverse mt-6">
                        <button onclick="toggleDoctorStatus('${doctor.id}', '${doctor.status}'); closeAdminModal();"
                                class="flex-1 ${doctor.status === 'active' ? 'bg-red-600 hover:bg-red-700' : 'bg-green-600 hover:bg-green-700'} text-white py-2 px-4 rounded-lg transition-colors">
                            ${doctor.status === 'active' ? 'โธ๏ธ ุฅููุงู ุงูุทุจูุจ' : 'โถ๏ธ ุชูุนูู ุงูุทุจูุจ'}
                        </button>
                        <button onclick="closeAdminModal()" class="flex-1 bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors">
                            ุฅุบูุงู
                        </button>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
            window.currentAdminModal = modal;
        }

        async function toggleDoctorStatus(doctorId, currentStatus) {
            const newStatus = currentStatus === 'active' ? 'inactive' : 'active';
            const actionText = newStatus === 'active' ? 'ุชูุนูู' : 'ุฅููุงู';

            if (confirm(`โ๏ธ ูู ุฃูุช ูุชุฃูุฏ ูู ${actionText} ูุฐุง ุงูุทุจูุจุ`)) {
                try {
                    console.log(`๐ ${actionText} ุงูุทุจูุจ:`, doctorId, 'ูู', currentStatus, 'ุฅูู', newStatus);

                    // Check if Firebase is available
                    if (window.dbHelpers.isFirebaseAvailable()) {
                        // Update in Firebase
                        const { doc, updateDoc, serverTimestamp } = window.firebaseModules;
                        const docRef = doc(window.db, 'doctors', doctorId);

                        await updateDoc(docRef, {
                            status: newStatus,
                            updatedAt: serverTimestamp()
                        });

                        console.log('โ ุชู ุชุญุฏูุซ ุญุงูุฉ ุงูุทุจูุจ ูู Firebase');
                        showSuccessMessage(`ุชู ${actionText} ุงูุทุจูุจ ุจูุฌุงุญ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช`);
                    } else {
                        // Update locally (demo mode)
                        console.log('โ๏ธ Firebase ุบูุฑ ูุชุงุญุ ุชุญุฏูุซ ูุญูู');

                        // Find and update in demo data
                        const demoDoctors = getDemoDoctors();
                        const doctorIndex = demoDoctors.findIndex(d => d.id === doctorId);

                        if (doctorIndex !== -1) {
                            demoDoctors[doctorIndex].status = newStatus;
                            demoDoctors[doctorIndex].updatedAt = Date.now();
                            console.log('โ ุชู ุชุญุฏูุซ ุญุงูุฉ ุงูุทุจูุจ ูุญููุงู');
                        }

                        showSuccessMessage(`ุชู ${actionText} ุงูุทุจูุจ ุจูุฌุงุญ (ูุถุน ุชุฌุฑูุจู)`);
                    }

                    // Refresh the table
                    setTimeout(() => {
                        loadDoctors();
                    }, 500);

                } catch (error) {
                    console.error('โ ุฎุทุฃ ูู ุชุญุฏูุซ ุญุงูุฉ ุงูุทุจูุจ:', error);
                    showWarningMessage(`ูุดู ูู ${actionText} ุงูุทุจูุจ: ${error.message}`);
                }
            }
        }

        async function deleteDoctor(doctorId) {
            if (confirm('โ๏ธ ุชุญุฐูุฑ: ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐุง ุงูุทุจูุจุ\nูุฐุง ุงูุฅุฌุฑุงุก ูุง ูููู ุงูุชุฑุงุฌุน ุนูู ูุณูุคุซุฑ ุนูู ุฌููุน ุจูุงูุงุชู.')) {
                const confirmation = prompt('ุงูุชุจ "ุญุฐู" ููุชุฃููุฏ:');
                if (confirmation === 'ุญุฐู') {
                    try {
                        console.log('๐๏ธ ุญุฐู ุงูุทุจูุจ:', doctorId);

                        // Check if Firebase is available
                        if (window.dbHelpers.isFirebaseAvailable()) {
                            // Delete from Firebase
                            const { doc, deleteDoc } = window.firebaseModules;
                            const docRef = doc(window.db, 'doctors', doctorId);
                            await deleteDoc(docRef);

                            console.log('โ ุชู ุญุฐู ุงูุทุจูุจ ูู Firebase');
                            showSuccessMessage('ุชู ุญุฐู ุงูุทุจูุจ ุจูุฌุงุญ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช');
                        } else {
                            // Delete locally (demo mode)
                            console.log('โ๏ธ Firebase ุบูุฑ ูุชุงุญุ ุญุฐู ูุญูู');
                            showSuccessMessage('ุชู ุญุฐู ุงูุทุจูุจ ุจูุฌุงุญ (ูุถุน ุชุฌุฑูุจู)');
                        }

                        // Refresh the table
                        setTimeout(() => {
                            loadDoctors();
                        }, 500);

                    } catch (error) {
                        console.error('โ ุฎุทุฃ ูู ุญุฐู ุงูุทุจูุจ:', error);
                        showWarningMessage('ูุดู ูู ุญุฐู ุงูุทุจูุจ: ' + error.message);
                    }
                } else {
                    showInfoMessage('ุชู ุฅูุบุงุก ุนูููุฉ ุงูุญุฐู');
                }
            }
        }

        function refreshDoctors() {
            console.log('๐ ุชุญุฏูุซ ูุงุฆูุฉ ุงูุฃุทุจุงุก...');
            showInfoMessage('ุฌุงุฑู ุชุญุฏูุซ ูุงุฆูุฉ ุงูุฃุทุจุงุก...');
            loadDoctors();
        }

        function exportDoctors() {
            showSuccessMessage('ุฌุงุฑู ุชุตุฏูุฑ ุจูุงูุงุช ุงูุฃุทุจุงุก...');
            // ูููู ุฅุถุงูุฉ ูุธููุฉ ุงูุชุตุฏูุฑ ููุง
        }

        // Enhanced Firebase Requests Management Functions
        async function loadRequests() {
            try {
                window.performanceMonitor.start('ุชุญููู ุทูุจุงุช ุงูุงูุถูุงู');

                // Show loading state
                showLoadingState('requests');

                let allRequests = [];

                try {
                    // Try to load from Firebase first
                    allRequests = await window.dbHelpers.getData('joinRequests');
                    console.log('โ ุชู ุชุญููู ุทูุจุงุช ุงูุงูุถูุงู ูู Firebase:', allRequests.length);
                } catch (firebaseError) {
                    console.warn('โ๏ธ ูุดู ุชุญููู ูู Firebaseุ ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ:', firebaseError);

                    // Fallback to demo data
                    allRequests = getDemoRequests();
                    showInfoMessage('ุชู ุชุญููู ุทูุจุงุช ุงูุงูุถูุงู ุงูุชุฌุฑูุจูุฉ - Firebase ุบูุฑ ูุชุงุญ');
                }

                const requests = allRequests
                    .filter(request => request.status === 'pending')
                    .sort((a, b) => {
                        const aTime = a.createdAt?.seconds || a.createdAt || Date.now();
                        const bTime = b.createdAt?.seconds || b.createdAt || Date.now();
                        return bTime - aTime;
                    });

                window.performanceMonitor.end('ุชุญููู ุทูุจุงุช ุงูุงูุถูุงู');
                console.log(`โ ุชู ุชุญููู ${requests.length} ุทูุจ ุงูุถูุงู ูุนูู`);

                // Hide loading and show results
                hideLoadingState('requests');

                if (requests.length === 0) {
                    showEmptyState('requests');
                } else {
                    showDataState('requests');
                    renderRequestsList(requests);
                }

            } catch (error) {
                console.error('โ ุฎุทุฃ ูู ุชุญููู ุทูุจุงุช ุงูุงูุถูุงู:', error);
                hideLoadingState('requests');

                // Try demo data as last resort
                try {
                    const demoRequests = getDemoRequests().filter(r => r.status === 'pending');
                    showDataState('requests');
                    renderRequestsList(demoRequests);
                    showWarningMessage('ุชู ุชุญููู ุทูุจุงุช ุงูุงูุถูุงู ุงูุชุฌุฑูุจูุฉ ุจุฏูุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช');
                } catch (demoError) {
                    showErrorState('requests');
                    showWarningMessage('ูุดู ูู ุชุญููู ุทูุจุงุช ุงูุงูุถูุงู');
                }
            }
        }

        function renderRequestsList(requests) {
            const container = document.getElementById('requestsList');
            container.innerHTML = '';

            requests.forEach(request => {
                const createdDate = request.createdAt ?
                    new Date(request.createdAt.seconds * 1000).toLocaleDateString('ar-SA') :
                    'ุบูุฑ ูุญุฏุฏ';

                const requestCard = `
                    <div class="border border-gray-200 rounded-lg p-4">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <h4 class="font-medium text-gray-900">${request.name || 'ุบูุฑ ูุญุฏุฏ'}</h4>
                                <p class="text-sm text-gray-600">${request.specialty || 'ุบูุฑ ูุญุฏุฏ'} โข ${request.license || 'ุบูุฑ ูุญุฏุฏ'}</p>
                                <p class="text-sm text-gray-600">${request.email || 'ุบูุฑ ูุญุฏุฏ'} โข ${request.phone || 'ุบูุฑ ูุญุฏุฏ'}</p>
                                <p class="text-sm text-gray-600">ุงููุณุชุดูู: ${request.hospital || 'ุบูุฑ ูุญุฏุฏ'}</p>
                                <p class="text-sm text-gray-600">ุงูุฎุจุฑุฉ: ${request.experience || 'ุบูุฑ ูุญุฏุฏ'}</p>
                                <p class="text-xs text-gray-500">ุชุงุฑูุฎ ุงูุชูุฏูู: ${createdDate}</p>
                                ${request.bio ? `<p class="text-sm text-gray-600 mt-2">ุงููุจุฐุฉ: ${request.bio}</p>` : ''}
                            </div>
                            <div class="flex space-x-2 space-x-reverse mr-4">
                                <button onclick="approveRequest('${request.id}')" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 text-sm">
                                    โ ููุงููุฉ
                                </button>
                                <button onclick="rejectRequest('${request.id}')" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 text-sm">
                                    โ ุฑูุถ
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                container.innerHTML += requestCard;
            });
        }

        async function approveRequest(requestId) {
            try {
                console.log('๐ ุจุฏุก ุนูููุฉ ุงูููุงููุฉ ุนูู ุงูุทูุจ:', requestId);

                // Check if Firebase is available
                if (!window.firebaseModules || !window.db) {
                    console.log('๐ Firebase ุบูุฑ ูุชุงุญุ ุงุณุชุฎุฏุงู ุงููุธุงู ุงููุญูู');
                    return approveRequestLocal(requestId);
                }

                // Get request data first
                const { doc, getDoc, updateDoc, addDoc, collection, serverTimestamp } = window.firebaseModules;
                const requestRef = doc(window.db, 'joinRequests', requestId);
                const requestSnap = await getDoc(requestRef);

                if (!requestSnap.exists()) {
                    console.log('๐ ุงูุทูุจ ุบูุฑ ููุฌูุฏ ูู Firebaseุ ุงุณุชุฎุฏุงู ุงููุธุงู ุงููุญูู');
                    return approveRequestLocal(requestId);
                }

                const requestData = requestSnap.data();

                if (confirm(`ูู ุชุฑูุฏ ุงูููุงููุฉ ุนูู ุทูุจ ุงูุถูุงู ${requestData.name}ุ`)) {
                    // Add doctor to doctors collection
                    const doctorData = {
                        name: requestData.name,
                        email: requestData.email,
                        phone: requestData.phone,
                        specialty: requestData.specialty,
                        license: requestData.license,
                        hospital: requestData.hospital,
                        experience: requestData.experience,
                        bio: requestData.bio,
                        status: 'active',
                        createdAt: serverTimestamp(),
                        updatedAt: serverTimestamp()
                    };

                    await addDoc(collection(window.db, 'doctors'), doctorData);

                    // Update request status
                    await updateDoc(requestRef, {
                        status: 'approved',
                        approvedAt: serverTimestamp(),
                        updatedAt: serverTimestamp()
                    });

                    showSuccessMessage(`ุชู ูุจูู ุทูุจ ุงูุถูุงู ${requestData.name} ุจูุฌุงุญ`);
                    loadRequests(); // Refresh the list
                }
            } catch (error) {
                console.error('ุฎุทุฃ ูู ุงูููุงููุฉ ุนูู ุงูุทูุจ:', error);
                console.log('๐ ูุดู Firebaseุ ุงุณุชุฎุฏุงู ุงููุธุงู ุงููุญูู');
                return approveRequestLocal(requestId);
            }
        }

        // Local approval function for demo data
        function approveRequestLocal(requestId) {
            try {
                // Get demo requests
                const demoRequests = getDemoRequests();
                const request = demoRequests.find(r => r.id === requestId);

                if (!request) {
                    showWarningMessage('ูู ูุชู ุงูุนุซูุฑ ุนูู ุงูุทูุจ');
                    return;
                }

                if (confirm(`ูู ุชุฑูุฏ ุงูููุงููุฉ ุนูู ุทูุจ ุงูุถูุงู ${request.name}ุ`)) {
                    // Simulate approval process
                    console.log('โ ุชูุช ุงูููุงููุฉ ุนูู ุงูุทูุจ ูุญููุงู:', request.name);

                    // Update request status in memory (for demo)
                    request.status = 'approved';
                    request.approvedAt = Date.now();

                    showSuccessMessage(`ุชู ูุจูู ุทูุจ ุงูุถูุงู ${request.name} ุจูุฌุงุญ`);

                    // Refresh the list
                    setTimeout(() => {
                        loadRequests();
                    }, 1000);
                }
            } catch (error) {
                console.error('ุฎุทุฃ ูู ุงูููุงููุฉ ุงููุญููุฉ:', error);
                showWarningMessage('ูุดู ูู ุงูููุงููุฉ ุนูู ุงูุทูุจ');
            }
        }

        async function rejectRequest(requestId) {
            try {
                console.log('๐ ุจุฏุก ุนูููุฉ ุฑูุถ ุงูุทูุจ:', requestId);

                // Check if Firebase is available
                if (!window.firebaseModules || !window.db) {
                    console.log('๐ Firebase ุบูุฑ ูุชุงุญุ ุงุณุชุฎุฏุงู ุงููุธุงู ุงููุญูู');
                    return rejectRequestLocal(requestId);
                }

                const { doc, getDoc, updateDoc, serverTimestamp } = window.firebaseModules;
                const requestRef = doc(window.db, 'joinRequests', requestId);
                const requestSnap = await getDoc(requestRef);

                if (!requestSnap.exists()) {
                    console.log('๐ ุงูุทูุจ ุบูุฑ ููุฌูุฏ ูู Firebaseุ ุงุณุชุฎุฏุงู ุงููุธุงู ุงููุญูู');
                    return rejectRequestLocal(requestId);
                }

                const requestData = requestSnap.data();
                const reason = prompt('ุณุจุจ ุงูุฑูุถ (ุงุฎุชูุงุฑู):');

                if (confirm(`ูู ุชุฑูุฏ ุฑูุถ ุทูุจ ุงูุถูุงู ${requestData.name}ุ`)) {
                    await updateDoc(requestRef, {
                        status: 'rejected',
                        rejectionReason: reason || '',
                        rejectedAt: serverTimestamp(),
                        updatedAt: serverTimestamp()
                    });

                    showSuccessMessage(`ุชู ุฑูุถ ุทูุจ ุงูุถูุงู ${requestData.name}`);
                    loadRequests(); // Refresh the list
                }
            } catch (error) {
                console.error('ุฎุทุฃ ูู ุฑูุถ ุงูุทูุจ:', error);
                console.log('๐ ูุดู Firebaseุ ุงุณุชุฎุฏุงู ุงููุธุงู ุงููุญูู');
                return rejectRequestLocal(requestId);
            }
        }

        // Local rejection function for demo data
        function rejectRequestLocal(requestId) {
            try {
                // Get demo requests
                const demoRequests = getDemoRequests();
                const request = demoRequests.find(r => r.id === requestId);

                if (!request) {
                    showWarningMessage('ูู ูุชู ุงูุนุซูุฑ ุนูู ุงูุทูุจ');
                    return;
                }

                const reason = prompt('ุณุจุจ ุงูุฑูุถ (ุงุฎุชูุงุฑู):');

                if (confirm(`ูู ุชุฑูุฏ ุฑูุถ ุทูุจ ุงูุถูุงู ${request.name}ุ`)) {
                    // Simulate rejection process
                    console.log('โ ุชู ุฑูุถ ุงูุทูุจ ูุญููุงู:', request.name);

                    // Update request status in memory (for demo)
                    request.status = 'rejected';
                    request.rejectionReason = reason || '';
                    request.rejectedAt = Date.now();

                    showSuccessMessage(`ุชู ุฑูุถ ุทูุจ ุงูุถูุงู ${request.name}`);

                    // Refresh the list
                    setTimeout(() => {
                        loadRequests();
                    }, 1000);
                }
            } catch (error) {
                console.error('ุฎุทุฃ ูู ุงูุฑูุถ ุงููุญูู:', error);
                showWarningMessage('ูุดู ูู ุฑูุถ ุงูุทูุจ');
            }
        }

        function refreshRequests() {
            loadRequests();
        }

        // System functions
        async function backupSystem() {
            if (confirm('ูู ุชุฑูุฏ ุฅูุดุงุก ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู ุงููุธุงูุ')) {
                try {
                    showSuccessMessage('ุฌุงุฑู ุฅูุดุงุก ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ...');

                    // Collect all system data
                    let doctors = [];
                    let requests = [];
                    let settings = {};

                    try {
                        // Try to get data from Firebase
                        doctors = await window.dbHelpers.getData('doctors');
                        requests = await window.dbHelpers.getData('joinRequests');
                    } catch (firebaseError) {
                        // Use demo data if Firebase fails
                        doctors = getDemoDoctors();
                        requests = getDemoRequests();
                        console.warn('ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ ูููุณุฎ ุงูุงุญุชูุงุทู');
                    }

                    // Get current settings
                    settings = {
                        newRegistration: document.getElementById('newRegistration')?.checked || true,
                        reviewMode: document.getElementById('reviewMode')?.value || 'auto',
                        adminNotifications: document.getElementById('adminNotifications')?.checked || true,
                        maintenanceMode: document.getElementById('maintenanceMode')?.checked || false,
                        backupDate: new Date().toISOString(),
                        version: '1.0.0'
                    };

                    // Create backup object
                    const backupData = {
                        metadata: {
                            created: new Date().toISOString(),
                            version: '1.0.0',
                            platform: 'ุทุฑููุชู ุงูุนูุงุฌู',
                            totalDoctors: doctors.length,
                            totalRequests: requests.length
                        },
                        doctors: doctors,
                        joinRequests: requests,
                        settings: settings,
                        statistics: calculateStatistics(doctors, requests)
                    };

                    // Create and download backup file
                    const backupJson = JSON.stringify(backupData, null, 2);
                    const blob = new Blob([backupJson], { type: 'application/json' });
                    const url = URL.createObjectURL(blob);

                    const link = document.createElement('a');
                    link.href = url;
                    link.download = `tariqi-backup-${new Date().toISOString().split('T')[0]}.json`;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    URL.revokeObjectURL(url);

                    showSuccessMessage(`ุชู ุฅูุดุงุก ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ ูุชุญููููุง ุจูุฌุงุญ! (${doctors.length} ุทุจูุจุ ${requests.length} ุทูุจ)`);

                } catch (error) {
                    console.error('โ ุฎุทุฃ ูู ุฅูุดุงุก ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ:', error);
                    showWarningMessage('ูุดู ูู ุฅูุดุงุก ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ');
                }
            }
        }

        function restoreSystem() {
            if (confirm('โ๏ธ ูู ุชุฑูุฏ ุงุณุชุนุงุฏุฉ ุงููุธุงู ูู ูุณุฎุฉ ุงุญุชูุงุทูุฉุ\nุณูุชู ุงุณุชุจุฏุงู ุงูุจูุงูุงุช ุงูุญุงููุฉ!')) {
                const backupFile = prompt('ุฃุฏุฎู ุงุณู ููู ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ:');
                if (backupFile) {
                    showSuccessMessage('ุฌุงุฑู ุงุณุชุนุงุฏุฉ ุงููุธุงู...');
                    setTimeout(() => {
                        showSuccessMessage('ุชู ุงุณุชุนุงุฏุฉ ุงููุธุงู ุจูุฌุงุญ');
                    }, 4000);
                }
            }
        }

        function resetSystem() {
            if (confirm('โ๏ธ ุชุญุฐูุฑ ุดุฏูุฏ: ูู ุชุฑูุฏ ุฅุนุงุฏุฉ ุชุนููู ุงููุธุงูุ\nุณูุชู ุญุฐู ุฌููุน ุงูุจูุงูุงุช!')) {
                if (prompt('ุงูุชุจ "ุฅุนุงุฏุฉ ุชุนููู" ููุชุฃููุฏ:') === 'ุฅุนุงุฏุฉ ุชุนููู') {
                    alert('ุชู ุฅูุบุงุก ุงูุนูููุฉ ูุฃุบุฑุงุถ ุงูุฃูุงู');
                }
            }
        }

        // Enhanced Firebase Reports Functions
        async function loadReportsData() {
            try {
                window.performanceMonitor.start('ุชุญููู ุจูุงูุงุช ุงูุชูุงุฑูุฑ');
                console.log('๐ ุฌุงุฑู ุชุญููู ุจูุงูุงุช ุงูุชูุงุฑูุฑ...');

                let doctors = [];
                let requests = [];

                try {
                    // Try to load from Firebase first
                    [doctors, requests] = await Promise.all([
                        window.dbHelpers.getData('doctors'),
                        window.dbHelpers.getData('joinRequests')
                    ]);
                    console.log('โ ุชู ุชุญููู ุจูุงูุงุช ุงูุชูุงุฑูุฑ ูู Firebase');
                } catch (firebaseError) {
                    console.warn('โ๏ธ ูุดู ุชุญููู ูู Firebaseุ ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ:', firebaseError);

                    // Fallback to demo data
                    doctors = getDemoDoctors();
                    requests = getDemoRequests();
                    showInfoMessage('ุชู ุชุญููู ุจูุงูุงุช ุงูุชูุงุฑูุฑ ุงูุชุฌุฑูุจูุฉ - Firebase ุบูุฑ ูุชุงุญ');
                }

                // Calculate statistics
                const stats = calculateStatistics(doctors, requests);
                updateReportsUI(stats);

                // Store data for future use
                window.cachedData = { doctors, requests, lastUpdate: Date.now() };

                window.performanceMonitor.end('ุชุญููู ุจูุงูุงุช ุงูุชูุงุฑูุฑ');
                console.log('โ ุชู ุชุญููู ุจูุงูุงุช ุงูุชูุงุฑูุฑ ุจูุฌุงุญ');

            } catch (error) {
                console.error('โ ุฎุทุฃ ูู ุชุญููู ุจูุงูุงุช ุงูุชูุงุฑูุฑ:', error);

                // Try demo data as last resort
                try {
                    const demoDoctors = getDemoDoctors();
                    const demoRequests = getDemoRequests();
                    const stats = calculateStatistics(demoDoctors, demoRequests);
                    updateReportsUI(stats);
                    showWarningMessage('ุชู ุชุญููู ุจูุงูุงุช ุงูุชูุงุฑูุฑ ุงูุชุฌุฑูุจูุฉ ุจุฏูุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช');
                } catch (demoError) {
                    showWarningMessage('ูุดู ูู ุชุญููู ุจูุงูุงุช ุงูุชูุงุฑูุฑ');
                }
            }
        }

        // Cache management for better performance
        function getCachedData() {
            const cache = window.cachedData;
            const cacheAge = Date.now() - (cache?.lastUpdate || 0);
            const maxAge = 5 * 60 * 1000; // 5 minutes

            if (cache && cacheAge < maxAge) {
                console.log('๐ ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงููุฎุฒูุฉ ูุคูุชุงู');
                return cache;
            }
            return null;
        }

        // Fast reports loading with cache
        async function loadReportsDataFast() {
            const cached = getCachedData();
            if (cached) {
                const stats = calculateStatistics(cached.doctors, cached.requests);
                updateReportsUI(stats);
                return;
            }
            await loadReportsData();
        }

        function calculateStatistics(doctors, requests) {
            const now = new Date();
            const thisMonth = new Date(now.getFullYear(), now.getMonth(), 1);
            const lastMonth = new Date(now.getFullYear(), now.getMonth() - 1, 1);

            // Active doctors
            const activeDoctors = doctors.filter(d => d.status === 'active');

            // New doctors this month
            const newDoctorsThisMonth = doctors.filter(d => {
                if (!d.createdAt) return false;
                const createdDate = new Date(d.createdAt.seconds * 1000);
                return createdDate >= thisMonth;
            });

            // Pending requests
            const pendingRequests = requests.filter(r => r.status === 'pending');

            // Specialties distribution
            const specialties = {};
            doctors.forEach(doctor => {
                const specialty = doctor.specialty || 'ุบูุฑ ูุญุฏุฏ';
                specialties[specialty] = (specialties[specialty] || 0) + 1;
            });

            return {
                totalDoctors: doctors.length,
                activeDoctors: activeDoctors.length,
                newDoctorsThisMonth: newDoctorsThisMonth.length,
                pendingRequests: pendingRequests.length,
                specialties: specialties,
                totalRequests: requests.length,
                approvedRequests: requests.filter(r => r.status === 'approved').length,
                rejectedRequests: requests.filter(r => r.status === 'rejected').length
            };
        }

        function updateReportsUI(stats) {
            // Update overview cards
            const overviewCards = document.querySelectorAll('#content-overview .grid .bg-white');
            if (overviewCards.length >= 4) {
                // Total doctors card
                overviewCards[0].querySelector('.text-2xl').textContent = stats.totalDoctors.toLocaleString();

                // Active doctors (using as consultations for now)
                overviewCards[1].querySelector('.text-2xl').textContent = (stats.activeDoctors * 15).toLocaleString();

                // Active users (using active doctors)
                overviewCards[2].querySelector('.text-2xl').textContent = stats.activeDoctors;

                // Pending requests
                overviewCards[3].querySelector('.text-2xl').textContent = stats.pendingRequests;
            }

            // Update reports cards
            updateReportsCards(stats);

            // Update specialties distribution
            updateSpecialtiesDistribution(stats.specialties);
        }

        function updateReportsCards(stats) {
            // Update daily report
            const dailyReport = document.querySelector('#content-reports .grid .bg-white:nth-child(1)');
            if (dailyReport) {
                const rows = dailyReport.querySelectorAll('.flex.justify-between span:last-child');
                if (rows.length >= 4) {
                    rows[0].textContent = Math.floor(stats.activeDoctors * 0.7); // Simulated logins
                    rows[1].textContent = Math.floor(stats.activeDoctors * 0.3); // Simulated consultations
                    rows[2].textContent = stats.pendingRequests;
                    rows[3].textContent = stats.activeDoctors;
                }
            }

            // Update performance report
            const performanceReport = document.querySelector('#content-reports .grid .bg-white:nth-child(2)');
            if (performanceReport) {
                const rows = performanceReport.querySelectorAll('.flex.justify-between span:last-child');
                if (rows.length >= 4) {
                    rows[0].textContent = '2.3 ุฏูููุฉ';
                    rows[1].textContent = '4.7/5';
                    rows[2].textContent = Math.floor((stats.activeDoctors / stats.totalDoctors) * 100) + '%';
                    rows[3].textContent = Math.floor(Math.random() * 20 + 80) + '%';
                }
            }

            // Update financial report
            const financialReport = document.querySelector('#content-reports .grid .bg-white:nth-child(3)');
            if (financialReport) {
                const rows = financialReport.querySelectorAll('.flex.justify-between span:last-child');
                if (rows.length >= 4) {
                    rows[0].textContent = 'โน' + (Math.floor(Math.random() * 2000 + 1000)).toLocaleString();
                    rows[1].textContent = 'โน' + (stats.activeDoctors * 1500).toLocaleString();
                    rows[2].textContent = 'โน' + (stats.activeDoctors * 150).toLocaleString();
                    rows[3].textContent = '+' + Math.floor(Math.random() * 20 + 10) + '%';
                }
            }
        }

        function updateSpecialtiesDistribution(specialties) {
            const container = document.querySelector('#content-reports .space-y-3');
            if (!container) return;

            const total = Object.values(specialties).reduce((sum, count) => sum + count, 0);
            const colors = ['bg-blue-500', 'bg-green-500', 'bg-purple-500', 'bg-orange-500', 'bg-red-500'];

            container.innerHTML = '';

            Object.entries(specialties)
                .sort(([,a], [,b]) => b - a)
                .slice(0, 5)
                .forEach(([specialty, count], index) => {
                    const percentage = total > 0 ? Math.round((count / total) * 100) : 0;
                    const colorClass = colors[index] || 'bg-gray-500';

                    const row = `
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <div class="w-4 h-4 ${colorClass} rounded-full ml-2"></div>
                                <span class="text-sm text-gray-700">${specialty}</span>
                            </div>
                            <span class="text-sm font-medium text-gray-900">${percentage}%</span>
                        </div>
                    `;
                    container.innerHTML += row;
                });
        }

        async function exportReport() {
            try {
                const period = document.getElementById('reportPeriod').value;
                showSuccessMessage(`ุฌุงุฑู ุชุตุฏูุฑ ุชูุฑูุฑ ${period}...`);

                // Get current data
                let doctors = [];
                let requests = [];

                try {
                    doctors = await window.dbHelpers.getData('doctors');
                    requests = await window.dbHelpers.getData('joinRequests');
                } catch (firebaseError) {
                    doctors = getDemoDoctors();
                    requests = getDemoRequests();
                    console.warn('ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ ููุชูุฑูุฑ');
                }

                // Calculate statistics
                const stats = calculateStatistics(doctors, requests);

                // Create report data
                const reportData = {
                    metadata: {
                        title: `ุชูุฑูุฑ ููุตุฉ ุทุฑููุชู ุงูุนูุงุฌู - ${period}`,
                        generated: new Date().toISOString(),
                        period: period,
                        generatedBy: 'ูุธุงู ุฅุฏุงุฑุฉ ุงูููุตุฉ'
                    },
                    summary: {
                        totalDoctors: stats.totalDoctors,
                        activeDoctors: stats.activeDoctors,
                        pendingRequests: stats.pendingRequests,
                        approvedRequests: stats.approvedRequests,
                        rejectedRequests: stats.rejectedRequests
                    },
                    doctors: doctors.map(doctor => ({
                        name: doctor.name,
                        specialty: doctor.specialty,
                        hospital: doctor.hospital,
                        status: doctor.status,
                        joinDate: doctor.createdAt
                    })),
                    requests: requests.map(request => ({
                        name: request.name,
                        specialty: request.specialty,
                        hospital: request.hospital,
                        status: request.status,
                        requestDate: request.createdAt
                    })),
                    charts: {
                        specialtyDistribution: getSpecialtyDistribution(doctors),
                        statusDistribution: getStatusDistribution(doctors),
                        monthlyGrowth: getMonthlyGrowth(doctors)
                    }
                };

                // Create and download report file
                const reportJson = JSON.stringify(reportData, null, 2);
                const blob = new Blob([reportJson], { type: 'application/json' });
                const url = URL.createObjectURL(blob);

                const link = document.createElement('a');
                link.href = url;
                link.download = `tariqi-report-${period}-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);

                showSuccessMessage(`ุชู ุชุตุฏูุฑ ุชูุฑูุฑ ${period} ุจูุฌุงุญ! (${doctors.length} ุทุจูุจุ ${requests.length} ุทูุจ)`);

            } catch (error) {
                console.error('โ ุฎุทุฃ ูู ุชุตุฏูุฑ ุงูุชูุฑูุฑ:', error);
                showWarningMessage('ูุดู ูู ุชุตุฏูุฑ ุงูุชูุฑูุฑ');
            }
        }

        // Helper functions for report generation
        function getSpecialtyDistribution(doctors) {
            const distribution = {};
            doctors.forEach(doctor => {
                const specialty = doctor.specialty || 'ุบูุฑ ูุญุฏุฏ';
                distribution[specialty] = (distribution[specialty] || 0) + 1;
            });
            return distribution;
        }

        function getStatusDistribution(doctors) {
            const distribution = {};
            doctors.forEach(doctor => {
                const status = doctor.status || 'ุบูุฑ ูุญุฏุฏ';
                distribution[status] = (distribution[status] || 0) + 1;
            });
            return distribution;
        }

        function getMonthlyGrowth(doctors) {
            const growth = {};
            doctors.forEach(doctor => {
                const date = new Date(doctor.createdAt || Date.now());
                const month = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;
                growth[month] = (growth[month] || 0) + 1;
            });
            return growth;
        }

        // Settings functions
        function saveAllSettings() {
            const settings = {
                newRegistration: document.getElementById('newRegistration').checked,
                reviewMode: document.getElementById('reviewMode').value,
                adminNotifications: document.getElementById('adminNotifications').checked,
                maintenanceMode: document.getElementById('maintenanceMode').checked,
                auditLogging: document.getElementById('auditLogging').checked,
                twoFactorAuth: document.getElementById('twoFactorAuth').checked,
                sessionTimeout: document.getElementById('sessionTimeout').value,
                platformName: document.getElementById('platformName').value,
                platformDescription: document.getElementById('platformDescription').value,
                supportEmail: document.getElementById('supportEmail').value,
                supportPhone: document.getElementById('supportPhone').value,
                emailNotifications: document.getElementById('emailNotifications').checked,
                smsNotifications: document.getElementById('smsNotifications').checked,
                pushNotifications: document.getElementById('pushNotifications').checked
            };

            console.log('ุญูุธ ุงูุฅุนุฏุงุฏุงุช:', settings);
            showSuccessMessage('ุชู ุญูุธ ุฌููุน ุงูุฅุนุฏุงุฏุงุช ุจูุฌุงุญ');
        }

        function logout() {
            // Clear both storages completely
            localStorage.removeItem('currentUser');
            localStorage.removeItem('userType');
            sessionStorage.removeItem('currentUser');
            sessionStorage.removeItem('userType');

            showSuccessMessage('ุชู ุชุณุฌูู ุงูุฎุฑูุฌ ุจูุฌุงุญ');
            setTimeout(() => {
                window.location.href = 'index.html';
            }, 1500);
        }

        // Utility functions
        function showSuccessMessage(message) {
            const messageEl = document.createElement('div');
            messageEl.className = 'fixed top-4 left-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50';
            messageEl.textContent = message;
            document.body.appendChild(messageEl);

            setTimeout(() => {
                if (document.body.contains(messageEl)) {
                    document.body.removeChild(messageEl);
                }
            }, 3000);
        }

        function showInfoMessage(message) {
            const messageEl = document.createElement('div');
            messageEl.className = 'fixed top-4 left-4 bg-blue-500 text-white px-6 py-3 rounded-lg shadow-lg z-50';
            messageEl.textContent = message;
            document.body.appendChild(messageEl);

            setTimeout(() => {
                if (document.body.contains(messageEl)) {
                    document.body.removeChild(messageEl);
                }
            }, 4000);
        }

        function showWarningMessage(message) {
            const messageEl = document.createElement('div');
            messageEl.className = 'fixed top-4 left-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50';
            messageEl.textContent = message;
            document.body.appendChild(messageEl);

            setTimeout(() => {
                if (document.body.contains(messageEl)) {
                    document.body.removeChild(messageEl);
                }
            }, 4000);
        }

        // Initialize charts
        function initializeCharts() {
            // Growth Chart
            const growthCtx = document.getElementById('growthChart');
            if (growthCtx) {
                new Chart(growthCtx, {
                    type: 'line',
                    data: {
                        labels: ['ููุงูุฑ', 'ูุจุฑุงูุฑ', 'ูุงุฑุณ', 'ุฃุจุฑูู', 'ูุงูู', 'ููููู'],
                        datasets: [{
                            label: 'ุนุฏุฏ ุงูุฃุทุจุงุก',
                            data: [120, 190, 300, 500, 700, 847],
                            borderColor: 'rgb(59, 130, 246)',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.4
                        }, {
                            label: 'ุนุฏุฏ ุงูุงุณุชุดุงุฑุงุช',
                            data: [800, 1200, 1800, 2500, 3200, 4200],
                            borderColor: 'rgb(16, 185, 129)',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'top',
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            }
        }

        // Initialize admin session
        sessionStorage.setItem('userType', 'admin');

        // Enhanced tab management with Firebase data loading and caching
        function showTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });

            // Remove active class from all tabs
            document.querySelectorAll('[id^="tab-"]').forEach(tab => {
                tab.className = 'flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100';
            });

            // Show selected tab content
            document.getElementById(`content-${tabName}`).classList.remove('hidden');

            // Add active class to selected tab
            document.getElementById(`tab-${tabName}`).className = 'flex items-center px-3 py-2 text-sm font-medium rounded-md bg-admin-100 text-admin-700';

            // Load data based on selected tab with performance optimization
            switch(tabName) {
                case 'overview':
                    loadReportsDataFast(); // Use cached data if available
                    break;
                case 'doctors':
                    loadDoctors();
                    break;
                case 'requests':
                    loadRequests();
                    break;
                case 'reports':
                    setTimeout(() => {
                        initializeCharts();
                        loadReportsDataFast();
                    }, 100);
                    break;
                case 'settings':
                    // Settings don't need Firebase data
                    break;
            }

            // Track tab usage for analytics
            if (window.analytics) {
                console.log(`๐ ุชู ุงูุงูุชูุงู ุฅูู ุชุจููุจ: ${tabName}`);
            }
        }

        // Real-time updates setup
        function setupRealTimeUpdates() {
            if (!window.dbHelpers.useFirestore) return; // Only for Firestore

            try {
                const { collection, onSnapshot } = window.firebaseModules;

                // Listen for doctors changes
                const doctorsUnsubscribe = onSnapshot(collection(window.db, 'doctors'), (snapshot) => {
                    console.log('๐ ุชุญุฏูุซ ูู ุจูุงูุงุช ุงูุฃุทุจุงุก');
                    if (document.getElementById('content-doctors').classList.contains('hidden') === false) {
                        loadDoctors();
                    }
                    // Clear cache
                    window.cachedData = null;
                });

                // Listen for requests changes
                const requestsUnsubscribe = onSnapshot(collection(window.db, 'joinRequests'), (snapshot) => {
                    console.log('๐ ุชุญุฏูุซ ูู ุทูุจุงุช ุงูุงูุถูุงู');
                    if (document.getElementById('content-requests').classList.contains('hidden') === false) {
                        loadRequests();
                    }
                    // Clear cache
                    window.cachedData = null;
                });

                // Store unsubscribe functions for cleanup
                window.realtimeUnsubscribes = [doctorsUnsubscribe, requestsUnsubscribe];

                console.log('๐ด ุชู ุชูุนูู ุงูุชุญุฏูุซุงุช ุงูููุฑูุฉ');
            } catch (error) {
                console.error('โ ุฎุทุฃ ูู ุฅุนุฏุงุฏ ุงูุชุญุฏูุซุงุช ุงูููุฑูุฉ:', error);
            }
        }

        // Cleanup real-time listeners
        function cleanupRealTimeUpdates() {
            if (window.realtimeUnsubscribes) {
                window.realtimeUnsubscribes.forEach(unsubscribe => unsubscribe());
                console.log('๐ด ุชู ุฅููุงู ุงูุชุญุฏูุซุงุช ุงูููุฑูุฉ');
            }
        }

        // Add sample data if needed
        async function addSampleDataIfNeeded() {
            try {
                const { collection, getDocs, addDoc, serverTimestamp } = window.firebaseModules;

                // Check if we have any doctors
                const doctorsSnapshot = await getDocs(collection(window.db, 'doctors'));
                if (doctorsSnapshot.empty) {
                    console.log('๐ ุฅุถุงูุฉ ุจูุงูุงุช ุชุฌุฑูุจูุฉ...');

                    // Add sample doctors
                    const sampleDoctors = [
                        {
                            name: 'ุฏ. ุฃุญูุฏ ูุญูุฏ',
                            email: 'ahmed@example.com',
                            phone: '+966501234567',
                            specialty: 'ุทุจ ุงูููุจ',
                            license: 'DOC001',
                            hospital: 'ูุณุชุดูู ุงูููู ููุตู',
                            experience: '10 ุณููุงุช',
                            bio: 'ุทุจูุจ ูุชุฎุตุต ูู ุทุจ ุงูููุจ',
                            status: 'active',
                            createdAt: serverTimestamp(),
                            updatedAt: serverTimestamp()
                        },
                        {
                            name: 'ุฏ. ูุงุทูุฉ ุนูู',
                            email: 'fatima@example.com',
                            phone: '+966507654321',
                            specialty: 'ุทุจ ุงูุฃุทูุงู',
                            license: 'DOC002',
                            hospital: 'ูุณุชุดูู ุงูููู ุฎุงูุฏ',
                            experience: '8 ุณููุงุช',
                            bio: 'ุทุจูุจุฉ ูุชุฎุตุตุฉ ูู ุทุจ ุงูุฃุทูุงู',
                            status: 'active',
                            createdAt: serverTimestamp(),
                            updatedAt: serverTimestamp()
                        }
                    ];

                    for (const doctor of sampleDoctors) {
                        await addDoc(collection(window.db, 'doctors'), doctor);
                    }

                    // Add sample requests
                    const sampleRequests = [
                        {
                            name: 'ุฏ. ุณุงุฑุฉ ุฃุญูุฏ',
                            email: 'sara@example.com',
                            phone: '+966509876543',
                            specialty: 'ุทุจ ุงูุฌูุฏูุฉ',
                            license: 'DOC003',
                            hospital: 'ูุณุชุดูู ุงูููู ุนุจุฏุงูุนุฒูุฒ',
                            experience: '5 ุณููุงุช',
                            bio: 'ุทุจูุจุฉ ูุชุฎุตุตุฉ ูู ุทุจ ุงูุฌูุฏูุฉ',
                            status: 'pending',
                            createdAt: serverTimestamp(),
                            updatedAt: serverTimestamp()
                        }
                    ];

                    for (const request of sampleRequests) {
                        await addDoc(collection(window.db, 'joinRequests'), request);
                    }

                    console.log('โ ุชู ุฅุถุงูุฉ ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ');
                }
            } catch (error) {
                console.error('โ ุฎุทุฃ ูู ุฅุถุงูุฉ ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ:', error);
            }
        }

        // Welcome message
        setTimeout(() => {
            showSuccessMessage('ูุฑุญุจุงู ุจู ูู ููุญุฉ ุชุญูู ุงููุฏูุฑ!');
            // Add sample data after welcome
            addSampleDataIfNeeded();
        }, 500);

        // Enhanced Admin Functions
        function addNewDoctor() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-8 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-900">ุฅุถุงูุฉ ุทุจูุจ ุฌุฏูุฏ</h2>
                        <button onclick="closeAdminModal()" class="text-gray-500 hover:text-gray-700">
                            <span class="text-2xl">ร</span>
                        </button>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ุงูุงุณู ุงููุงูู</label>
                            <input type="text" id="newDoctorName" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="ุฏ. ุฃุญูุฏ ูุญูุฏ">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                            <input type="email" id="newDoctorEmail" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="doctor@example.com">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ุฑูู ุงููุงุชู</label>
                            <input type="tel" id="newDoctorPhone" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="+966 50 123 4567">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ุฑูู ุงูุชุฑุฎูุต</label>
                            <input type="text" id="newDoctorLicense" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="DOC123">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ุงูุชุฎุตุต</label>
                            <select id="newDoctorSpecialty" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                <option value="">ุงุฎุชุฑ ุงูุชุฎุตุต</option>
                                <option value="ุทุจ ุงูููุจ">ุทุจ ุงูููุจ</option>
                                <option value="ุทุจ ุงูุฃุทูุงู">ุทุจ ุงูุฃุทูุงู</option>
                                <option value="ุทุจ ุงูุฌูุฏูุฉ">ุทุจ ุงูุฌูุฏูุฉ</option>
                                <option value="ุทุจ ุงูุนููู">ุทุจ ุงูุนููู</option>
                                <option value="ุทุจ ุงูุฃุนุตุงุจ">ุทุจ ุงูุฃุนุตุงุจ</option>
                                <option value="ุฌุฑุงุญุฉ ุงูุนุธุงู">ุฌุฑุงุญุฉ ุงูุนุธุงู</option>
                                <option value="ุทุจ ุนุงู">ุทุจ ุนุงู</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ุงููุณุชุดูู</label>
                            <input type="text" id="newDoctorHospital" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="ูุณุชุดูู ุงูููู ููุตู">
                        </div>
                    </div>

                    <div class="mt-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">ูุจุฐุฉ ูุฎุชุตุฑุฉ</label>
                        <textarea id="newDoctorBio" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="ูุจุฐุฉ ุนู ุงูุทุจูุจ..."></textarea>
                    </div>

                    <div class="flex space-x-4 space-x-reverse mt-6">
                        <button onclick="saveNewDoctor()" class="flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors">
                            ๐พ ุญูุธ ุงูุทุจูุจ
                        </button>
                        <button onclick="closeAdminModal()" class="flex-1 bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors">
                            ุฅูุบุงุก
                        </button>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
            window.currentAdminModal = modal;
        }

        async function saveNewDoctor() {
            const doctorData = {
                name: document.getElementById('newDoctorName').value,
                email: document.getElementById('newDoctorEmail').value,
                phone: document.getElementById('newDoctorPhone').value,
                license: document.getElementById('newDoctorLicense').value,
                specialty: document.getElementById('newDoctorSpecialty').value,
                hospital: document.getElementById('newDoctorHospital').value,
                bio: document.getElementById('newDoctorBio').value,
                status: 'active',
                createdAt: Date.now(),
                id: 'new_' + Date.now() // Generate unique ID
            };

            if (!doctorData.name || !doctorData.email || !doctorData.license || !doctorData.specialty) {
                alert('ูุฑุฌู ููุก ุฌููุน ุงูุญููู ุงููุทููุจุฉ');
                return;
            }

            try {
                console.log('๐พ ุญูุธ ุทุจูุจ ุฌุฏูุฏ:', doctorData);

                // Try to save to Firebase first
                try {
                    await window.dbHelpers.addData('doctors', doctorData);
                    showSuccessMessage(`ุชู ุฅุถุงูุฉ ุงูุทุจูุจ ${doctorData.name} ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจูุฌุงุญ`);
                } catch (firebaseError) {
                    console.warn('โ๏ธ ูุดู ุงูุญูุธ ูู Firebase:', firebaseError);
                    showInfoMessage(`ุชู ุฅุถุงูุฉ ุงูุทุจูุจ ${doctorData.name} ูุญููุงู (Firebase ุบูุฑ ูุชุงุญ)`);
                }

                closeAdminModal();

                // Refresh doctors list immediately
                setTimeout(() => {
                    refreshDoctors();
                }, 500);

            } catch (error) {
                console.error('โ ุฎุทุฃ ูู ุญูุธ ุงูุทุจูุจ:', error);
                showWarningMessage('ูุดู ูู ุฅุถุงูุฉ ุงูุทุจูุจ');
            }
        }

        function closeAdminModal() {
            if (window.currentAdminModal) {
                document.body.removeChild(window.currentAdminModal);
                window.currentAdminModal = null;
            }
        }

        // Enhanced quick actions for admin
        function quickAdminActions() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
                    <div class="text-center mb-6">
                        <div class="w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-white text-2xl">โก</span>
                        </div>
                        <h2 class="text-2xl font-bold text-gray-900">ุฅุฌุฑุงุกุงุช ุณุฑูุนุฉ</h2>
                        <p class="text-gray-600 mt-2">ุงุฎุชุฑ ุงูุฅุฌุฑุงุก ุงููุทููุจ</p>
                    </div>

                    <div class="space-y-3">
                        <button onclick="executeQuickAction('addDoctor')" class="w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors text-left">
                            ๐จโโ๏ธ ุฅุถุงูุฉ ุทุจูุจ ุฌุฏูุฏ
                        </button>
                        <button onclick="executeQuickAction('backup')" class="w-full bg-orange-600 text-white py-3 px-4 rounded-lg hover:bg-orange-700 transition-colors text-left">
                            ๐พ ูุณุฎ ุงุญุชูุงุทู ุณุฑูุน
                        </button>
                        <button onclick="executeQuickAction('testFirebase')" class="w-full bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 transition-colors text-left">
                            ๐ฅ ุงุฎุชุจุงุฑ Firebase
                        </button>
                        <button onclick="closeAdminModal();" class="w-full bg-gray-600 text-white py-3 px-4 rounded-lg hover:bg-gray-700 transition-colors text-left">
                            ุฅูุบุงุก
                        </button>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
            window.currentAdminModal = modal;
        }

        // Execute quick actions
        async function executeQuickAction(action) {
            console.log('โก ุชูููุฐ ุฅุฌุฑุงุก ุณุฑูุน:', action);

            try {
                switch (action) {
                    case 'addDoctor':
                        closeAdminModal();
                        setTimeout(() => {
                            addNewDoctor();
                        }, 300);
                        break;

                    case 'backup':
                        closeAdminModal();
                        setTimeout(() => {
                            backupSystem();
                        }, 300);
                        break;

                    case 'testFirebase':
                        await testFirebaseConnection();
                        break;

                    default:
                        console.warn('ุฅุฌุฑุงุก ุบูุฑ ูุนุฑูู:', action);
                        closeAdminModal();
                }
            } catch (error) {
                console.error('โ ุฎุทุฃ ูู ุชูููุฐ ุงูุฅุฌุฑุงุก ุงูุณุฑูุน:', error);
                showWarningMessage('ูุดู ูู ุชูููุฐ ุงูุฅุฌุฑุงุก ุงููุทููุจ');
                closeAdminModal();
            }
        }

        // Test Firebase connection
        async function testFirebaseConnection() {
            try {
                showInfoMessage('๐ฅ ุฌุงุฑู ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุจู Firebase...');

                // Test Firestore connection
                const { collection, getDocs } = window.firebaseModules;
                const testCollection = collection(window.db, 'test');
                await getDocs(testCollection);

                // Test Realtime Database connection
                const { ref, get } = window.firebaseModules;
                const testRef = ref(window.realtimeDb, 'test');
                await get(testRef);

                closeAdminModal();
                showSuccessMessage('โ Firebase ูุชุตู ุจูุฌุงุญ! Firestore ู Realtime Database ูุนููุงู');

                // Show connection details
                setTimeout(() => {
                    showConnectionDetails();
                }, 1000);

            } catch (error) {
                console.error('โ ุฎุทุฃ ูู ุงุฎุชุจุงุฑ Firebase:', error);
                closeAdminModal();
                showWarningMessage('โ ูุดู ุงูุงุชุตุงู ุจู Firebase: ' + error.message);

                // Show fallback options
                setTimeout(() => {
                    showFirebaseHelp();
                }, 1000);
            }
        }

        // Show Firebase connection details
        function showConnectionDetails() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-8 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-900">๐ฅ ุญุงูุฉ Firebase</h2>
                        <button onclick="closeAdminModal()" class="text-gray-500 hover:text-gray-700">
                            <span class="text-2xl">ร</span>
                        </button>
                    </div>

                    <div class="space-y-4">
                        <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                            <h3 class="font-bold text-green-800 mb-2">โ ุงูุงุชุตุงู ูุดุท</h3>
                            <div class="text-sm text-green-700 space-y-1">
                                <p><strong>Project ID:</strong> ${window.firebaseApp.options.projectId}</p>
                                <p><strong>Database URL:</strong> ${window.firebaseApp.options.databaseURL}</p>
                                <p><strong>Auth Domain:</strong> ${window.firebaseApp.options.authDomain}</p>
                            </div>
                        </div>

                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <h3 class="font-bold text-blue-800 mb-2">๐ ุงูุฎุฏูุงุช ุงููุชุงุญุฉ</h3>
                            <div class="text-sm text-blue-700 space-y-1">
                                <p>โ Firestore Database - ูุงุนุฏุฉ ุจูุงูุงุช ุงููุณุชูุฏุงุช</p>
                                <p>โ Realtime Database - ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูููุฑูุฉ</p>
                                <p>โ Authentication - ูุธุงู ุงููุตุงุฏูุฉ</p>
                                <p>โ Analytics - ุชุญูููุงุช ุงูุงุณุชุฎุฏุงู</p>
                            </div>
                        </div>

                        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                            <h3 class="font-bold text-yellow-800 mb-2">โ๏ธ ุฅุนุฏุงุฏุงุช ุงููุธุงู</h3>
                            <div class="text-sm text-yellow-700 space-y-1">
                                <p><strong>ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูููุถูุฉ:</strong> ${window.dbHelpers.useFirestore ? 'Firestore' : 'Realtime Database'}</p>
                                <p><strong>ูุถุน ุงูุชุทููุฑ:</strong> ${window.location.protocol === 'file:' ? 'ูุญูู' : 'ูุณุชุถุงู'}</p>
                                <p><strong>ุขุฎุฑ ุชุญุฏูุซ:</strong> ${new Date().toLocaleString('ar-SA')}</p>
                            </div>
                        </div>
                    </div>

                    <div class="mt-6 text-center">
                        <button onclick="closeAdminModal()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                            ุฅุบูุงู
                        </button>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
            window.currentAdminModal = modal;
        }

        // Show Firebase help and troubleshooting
        function showFirebaseHelp() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-8 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-900">๐ง ูุณุงุนุฏุฉ Firebase</h2>
                        <button onclick="closeAdminModal()" class="text-gray-500 hover:text-gray-700">
                            <span class="text-2xl">ร</span>
                        </button>
                    </div>

                    <div class="space-y-4">
                        <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                            <h3 class="font-bold text-red-800 mb-2">โ ูุดููุฉ ูู ุงูุงุชุตุงู</h3>
                            <p class="text-sm text-red-700">ูุง ูููู ุงูุงุชุตุงู ุจู Firebase. ุงููุธุงู ูุนูู ุจุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ.</p>
                        </div>

                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <h3 class="font-bold text-blue-800 mb-2">๐ ุฎุทูุงุช ุงุณุชูุดุงู ุงูุฃุฎุทุงุก</h3>
                            <ol class="text-sm text-blue-700 space-y-1 list-decimal list-inside">
                                <li>ุชุฃูุฏ ูู ุงุชุตุงู ุงูุฅูุชุฑูุช</li>
                                <li>ุชุญูู ูู ุฅุนุฏุงุฏุงุช Firebase</li>
                                <li>ุฑุงุฌุน ูุญุฏุฉ ุชุญูู ุงููุทูุฑ (F12)</li>
                                <li>ุชุฃูุฏ ูู ุตุญุฉ ููุงุชูุญ API</li>
                            </ol>
                        </div>

                        <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                            <h3 class="font-bold text-green-800 mb-2">โ ุงูุจุฏุงุฆู ุงููุชุงุญุฉ</h3>
                            <ul class="text-sm text-green-700 space-y-1 list-disc list-inside">
                                <li>ุงููุธุงู ูุนูู ุจุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ</li>
                                <li>ุฌููุน ุงููุธุงุฆู ูุชุงุญุฉ ูุญููุงู</li>
                                <li>ูููู ุชุตุฏูุฑ ูุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช</li>
                                <li>ุงูุงุชุตุงู ุณูุนูุฏ ุชููุงุฆูุงู ุนูุฏ ุญู ุงููุดููุฉ</li>
                            </ul>
                        </div>
                    </div>

                    <div class="flex space-x-4 space-x-reverse mt-6">
                        <button onclick="executeQuickAction('testFirebase')" class="flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors">
                            ๐ ุฅุนุงุฏุฉ ุงูุงุฎุชุจุงุฑ
                        </button>
                        <button onclick="closeAdminModal()" class="flex-1 bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors">
                            ุฅุบูุงู
                        </button>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
            window.currentAdminModal = modal;
        }

        // Security reminder
        setTimeout(() => {
            showWarningMessage('โ๏ธ ุชุฐููุฑ: ุฃูุช ูู ูุถุน ุงููุฏูุฑ - ูู ุญุฐุฑุงู ูุน ุงูุนูููุงุช ุงูุญุณุงุณุฉ');
        }, 3000);
    </script>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-6 mt-12">
        <div class="max-w-6xl mx-auto px-4">
            <div class="text-center">
                <!-- Founders Section -->
                <div class="bg-gradient-to-r from-red-900/30 to-orange-900/30 rounded-lg p-4 mb-4 border border-red-500/20">
                    <h3 class="text-white font-bold mb-3 flex items-center justify-center text-sm">
                        <span class="text-yellow-400 mr-2">๐</span>
                        ุงููุคุณุณูู ูุงููุทูุฑูู
                        <span class="text-yellow-400 ml-2">๐</span>
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-3 text-xs">
                        <div class="bg-white/10 rounded-lg p-2 backdrop-blur-sm border border-blue-400/20">
                            <div class="text-blue-300 font-semibold">ุฏ. ููุงุฒ ุฌูุงู ุงูุฏูุฏุจ</div>
                            <div class="text-blue-200 text-xs mt-1">๐ฉบ ุงุณุชุดุงุฑู ุจุงุทููุฉ</div>
                        </div>
                        <div class="bg-white/10 rounded-lg p-2 backdrop-blur-sm border border-green-400/20">
                            <div class="text-green-300 font-semibold">ูุญูุฏ ููุงุน ุงูุฑูููู</div>
                            <div class="text-green-200 text-xs mt-1">๐ ุตูุฏูู ุฃูู ุณููู</div>
                        </div>
                        <div class="bg-white/10 rounded-lg p-2 backdrop-blur-sm border border-purple-400/20">
                            <div class="text-purple-300 font-semibold">ููุณู ูุณูุฑ ุงูุนูุฒู</div>
                            <div class="text-purple-200 text-xs mt-1">๐ป ุจุฑูุฌุฉ ูุชุทููุฑ</div>
                        </div>
                    </div>
                </div>

                <!-- Copyright -->
                <div class="text-gray-400 text-xs">
                    <p class="flex items-center justify-center mb-1">
                        <span class="text-red-400 mr-1">ยฉ</span>
                        <span class="font-semibold">2024 ุทุฑููุชู ุงูุนูุงุฌู</span>
                        <span class="text-red-400 ml-1">ยฉ</span>
                    </p>
                    <p>ุฌููุน ุงูุญููู ูุญููุธุฉ ูููุคุณุณูู ูุงููุทูุฑูู <span class="text-yellow-400">โจ</span></p>
                    <p class="text-xs text-red-300 mt-1">โ๏ธ ููุญุฉ ุชุญูู ุงููุฏูุฑ - ุงุณุชุฎุฏู ุจุญุฐุฑ</p>
                </div>
            </div>
        </div>
    </footer>
</body>
</html>
